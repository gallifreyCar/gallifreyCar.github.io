<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gallifrey&#39;s Blog</title>
  
  <subtitle>个人文章归档</subtitle>
  <link href="http://101.43.65.22/atom.xml" rel="self"/>
  
  <link href="http://101.43.65.22/"/>
  <updated>2022-04-05T21:47:03.000Z</updated>
  <id>http://101.43.65.22/</id>
  
  <author>
    <name>Gallifrey</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AndroidStudio_Fragment练习</title>
    <link href="http://101.43.65.22/posts/e897d3717c7c/"/>
    <id>http://101.43.65.22/posts/e897d3717c7c/</id>
    <published>2022-04-05T21:47:03.000Z</published>
    <updated>2022-04-05T21:47:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><ul><li>在Activity中显示如下效果</li></ul><p><img src="/posts/e897d3717c7c/clip_image002.jpg" alt="图1"></p><p>1） 界面元素如图1所示</p><p>2） 点击”人物“，文字和图片都会相应改变，如图2所示。点击”动物“和”植物“时，效果类似。</p><p><img src="/posts/e897d3717c7c/clip_image004.jpg" alt="图2"></p><p>（3） 点击“Click我，传data给Activity”按钮，首先实现按钮本身的按压效果，并修改上方TextView的内容为“Animal from fragment。如图3所示。<br> 提示：按钮在fragment类中，TextView在Activity类中</p><p><img src="/posts/e897d3717c7c/clip_image006.jpg" alt="图3"></p><h1 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h1><h3 id="Activity布局"><a href="#Activity布局" class="headerlink" title="Activity布局"></a>Activity布局</h3><p><img src="/posts/e897d3717c7c/image-20220406093348784.png" alt="image-20220406093348784"></p><ul><li>这里要用动态方式引入fragment        <FrameLayout>…….</FrameLayout></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/textview&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;这里之后用Java代码动态填写&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;30dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/radiogroup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checkedButton</span>=<span class="string">&quot;@id/rg_person&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_person&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;人物&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/fl_rb_textcolor&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_person_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_animal&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;动物&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/fl_rb_textcolor2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_animal_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_plant&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/fl_rb_textcolor3&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_plant_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;植物&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在values目录下创建flRadioButton.xml文件，编写统一的样式，减少重复代码</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;flRadioButton&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_width&quot;</span>&gt;</span>0dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_height&quot;</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_weight&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>24sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:gravity&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_marginTop&quot;</span>&gt;</span>10dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_marginBottom&quot;</span>&gt;</span>10dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:button&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在drawble目录下创建并分别编写人物，动物，植物点击变化的图标，文字变化的xml文件，这里只给出一个样例。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@mipmap/plant2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@mipmap/plant&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>Button样例的修改，必须修改themes.xml文件里的parent属性才能显示自定义效果</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;Theme.DialogTestApplication&quot; parent=&quot;Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="Fragment布局"><a href="#Fragment布局" class="headerlink" title="Fragment布局"></a>Fragment布局</h3><ul><li>新建三个fragment文件(PersonFragment,PlantFragment,AnimalFragment)后，先对其对应xml文件进行设计</li></ul><p><img src="/posts/e897d3717c7c/image-20220406094202201.png" alt="image-20220406094202201"></p><ul><li>三个fragment布局基本相同，这里给出一个样例。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.fragment.PersonFragment&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_btn_person&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/button_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;25dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;Click我，传data给Activity&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/fl_btn_person&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_image&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Activtity和Fragment交互"><a href="#Activtity和Fragment交互" class="headerlink" title="Activtity和Fragment交互"></a>Activtity和Fragment交互</h3><ul><li><p>这里为了更好理解Activity和Fragment传值的方式，我先在Activity中把值传到Fragment中</p></li><li><p>然后再把Fragment中获得的值通过回调接口传回Activity中，最后在textview中显示出来</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.fragmnettestapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentTransaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.fragment.AnimalFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.fragment.PersonFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.fragment.PlantFragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">PersonFragment</span>.PersonCallBack, PlantFragment.PlantCallBack, AnimalFragment.AnimalCallBack &#123;</span><br><span class="line">    <span class="keyword">private</span> FragmentManager fragmentManager;</span><br><span class="line">    <span class="keyword">private</span> FragmentTransaction fragmentTransaction;</span><br><span class="line">    <span class="keyword">private</span> RadioGroup mRg;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Fragment&gt; linkedList;</span><br><span class="line">    <span class="keyword">private</span> PersonFragment personFragment;</span><br><span class="line">    <span class="keyword">private</span> PlantFragment plantFragment;</span><br><span class="line">    <span class="keyword">private</span> AnimalFragment animalFragment;</span><br><span class="line">    <span class="keyword">private</span> TextView textView;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        linkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        textView=findViewById(R.id.textview);</span><br><span class="line">        mRg=findViewById(R.id.radiogroup);</span><br><span class="line">        fragmentManager=getSupportFragmentManager();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**这里为了更好理解Activity和Fragment传值的方式</span></span><br><span class="line"><span class="comment">         * 我先在Activity中把值传到Fragment中</span></span><br><span class="line"><span class="comment">         * 然后再把Fragment中获得的值通过回调接口传回Activity中</span></span><br><span class="line"><span class="comment">         * 最会在textview中显示出来</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        mRg.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                    <span class="keyword">case</span> R.id.rg_person:</span><br><span class="line">                        <span class="keyword">if</span>(personFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            personFragment=PersonFragment.newInstance(<span class="string">&quot;person from fragment&quot;</span>);<span class="comment">//创建对象，传参</span></span><br><span class="line">                            linkedList.add(personFragment);<span class="comment">//加入列表</span></span><br><span class="line">                            hideOtherFragment(personFragment,<span class="literal">true</span>);<span class="comment">//第一次加入，添加到activity</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            hideOtherFragment(personFragment,<span class="literal">false</span>);<span class="comment">//直接隐藏</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.rg_plant:</span><br><span class="line">                        <span class="keyword">if</span>(plantFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            plantFragment=PlantFragment.newInstance(<span class="string">&quot;plant from fragment&quot;</span>);<span class="comment">//创建对象，传参</span></span><br><span class="line">                            linkedList.add(plantFragment);<span class="comment">//加入列表</span></span><br><span class="line">                            hideOtherFragment(plantFragment,<span class="literal">true</span>);<span class="comment">//第一次加入，添加到activity</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            hideOtherFragment(plantFragment,<span class="literal">false</span>);<span class="comment">//直接隐藏</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.rg_animal:</span><br><span class="line">                        <span class="keyword">if</span>(animalFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            animalFragment=AnimalFragment.newInstance(<span class="string">&quot;animal from fragment&quot;</span>);<span class="comment">//创建对象，传参</span></span><br><span class="line"></span><br><span class="line">                            linkedList.add(animalFragment);<span class="comment">//加入列表</span></span><br><span class="line">                            hideOtherFragment(animalFragment,<span class="literal">true</span>);<span class="comment">//第一次加入，添加到activity</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            hideOtherFragment(animalFragment,<span class="literal">false</span>);<span class="comment">//直接隐藏</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//隐藏其他fragment</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">hideOtherFragment</span><span class="params">(Fragment currentFragment, <span class="type">boolean</span> b)</span>&#123;</span><br><span class="line">        fragmentTransaction=fragmentManager.beginTransaction();<span class="comment">//创建事务</span></span><br><span class="line">        <span class="keyword">if</span>(b) &#123;</span><br><span class="line">            fragmentTransaction.add(R.id.fl_container, currentFragment);<span class="comment">//如果从未加入，则将当前Fragment添加到activity</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//遍历列表</span></span><br><span class="line">        <span class="keyword">for</span>(Fragment tempFragment:linkedList)&#123;</span><br><span class="line">            <span class="comment">//如果选中，则显示;否则则隐藏</span></span><br><span class="line">            <span class="keyword">if</span>(tempFragment.equals(currentFragment))&#123;</span><br><span class="line">                fragmentTransaction.show(tempFragment);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                fragmentTransaction.hide(tempFragment);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//提交事务</span></span><br><span class="line">        fragmentTransaction.commitAllowingStateLoss();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//同回调接口使得activity的textview获得数据</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        textView.setText(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>三个Fragment的写法是一样的，这里给出一个样例</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.fragmnettestapplication.fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnimalFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ImageView imageView;</span><br><span class="line">    <span class="keyword">private</span> Button button;</span><br><span class="line">    <span class="keyword">private</span> AnimalCallBack animalCallBack;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//让回调接口初始化</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttach</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onAttach(context);</span><br><span class="line">        animalCallBack=(AnimalCallBack) context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这里只要一个String作为键值对,之后通过回调接口传参数给Activity就可以了</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ARG_PARAM1</span> <span class="operator">=</span> <span class="string">&quot;param1&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String mParam1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnimalFragment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Required empty public constructor</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AnimalFragment <span class="title function_">newInstance</span><span class="params">(String param1)</span> &#123;</span><br><span class="line">        <span class="type">AnimalFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnimalFragment</span>();</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        args.putString(ARG_PARAM1, param1);</span><br><span class="line">        fragment.setArguments(args);</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">if</span> (getArguments() != <span class="literal">null</span>) &#123;</span><br><span class="line">            mParam1 = getArguments().getString(ARG_PARAM1);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span><br><span class="line"><span class="params">                             Bundle savedInstanceState)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//这里返回一个view</span></span><br><span class="line">         View view=inflater.inflate(R.layout.fragment_animal, container, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//在这里加入监听</span></span><br><span class="line">        imageView=view.findViewById(R.id.fl_image);</span><br><span class="line">        imageView.setImageResource(R.drawable.laohu);</span><br><span class="line"></span><br><span class="line">        button=view.findViewById(R.id.fl_btn_animal);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">//这用一个回调接口的方法回调回来</span></span><br><span class="line">                animalCallBack.setData(mParam1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个回调接口</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AnimalCallBack</span>&#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h3><p><img src="/posts/e897d3717c7c/image-20220406095144589.png" alt="image-20220406095144589"></p><p><img src="/posts/e897d3717c7c/image-20220406095337844.png" alt="image-20220406095337844"></p><p><img src="/posts/e897d3717c7c/image-20220406095219675.png" alt="image-20220406095219675"></p><p><img src="/posts/e897d3717c7c/image-20220406095248132.png" alt="image-20220406095248132"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;需求分析&quot;&gt;&lt;a href=&quot;#需求分析&quot; class=&quot;headerlink&quot; title=&quot;需求分析&quot;&gt;&lt;/a&gt;需求分析&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;在Activity中显示如下效果&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/posts/e897d371</summary>
      
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="实战练习" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio_Dialog练习</title>
    <link href="http://101.43.65.22/posts/8018615b09fa/"/>
    <id>http://101.43.65.22/posts/8018615b09fa/</id>
    <published>2022-04-05T19:06:49.000Z</published>
    <updated>2022-04-05T19:06:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="练习一"><a href="#练习一" class="headerlink" title="练习一"></a>练习一</h1><h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><ul><li>下面是弹出的提示对话框的内容（背景为白色的提示对话框），请自行设计布局文件，要求满足 :</li></ul><p><img src="/posts/8018615b09fa/image-20220406031446645.png" alt="image-20220406031446645"></p><ol><li>界面元素如图所示，图片文件请自行选择任意图片<strong>替换</strong>：</li><li>点击“立即开启”，弹出新的Activity，内容为“我是一条新消息”</li><li>点击“我再想想”，关闭对话框。</li></ol><h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><h3 id="对话框布局"><a href="#对话框布局" class="headerlink" title="对话框布局"></a>对话框布局</h3><ul><li><p>这里先在layout目录下新建一个xml文件设计弹出的对话框布局</p></li><li><p>这里button的background用了自定的drawable文件效果，要修改themes.xml文件里的parent属性才能显示自定效果</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;Theme.DialogTestApplication&quot; parent=&quot;Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;</span><br></pre></td></tr></table></figure><p><img src="/posts/8018615b09fa/image-20220406035745181.png" alt="image-20220406035745181"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_tv1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/lingdang&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;请开启消息通知&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_tv2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/custom_tv1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;这样可以及时获取天气情况，预警提醒。掌握天气变化,生活无忧规划！&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_btn1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/custom_tv2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;立即开启&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/btn_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;124dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#88000000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_btn2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/custom_btn1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我再想想&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在drawable目录下新建btn_round.xml文件，添加一个按钮样式</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#0384F4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;25dp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="跳转页面"><a href="#跳转页面" class="headerlink" title="跳转页面"></a>跳转页面</h3><ul><li>新建一个activity，作为跳转页面</li></ul><p><img src="/posts/8018615b09fa/image-20220406043730358.png" alt="image-20220406043730358"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我是一条新消息&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="触发对话框按钮"><a href="#触发对话框按钮" class="headerlink" title="触发对话框按钮"></a>触发对话框按钮</h3><ul><li>在MainActivity添加一个触发弹出对话框的按钮</li></ul><p><img src="/posts/8018615b09fa/image-20220406043530799.png" alt="image-20220406043530799"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;自定义对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_custom&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Dialog动态加载及监听设置"><a href="#Dialog动态加载及监听设置" class="headerlink" title="Dialog动态加载及监听设置"></a>Dialog动态加载及监听设置</h3><ul><li>在MainActivity关联组件，设置监听，动态加载dialog并显示。</li></ul><p><img src="/posts/8018615b09fa/image-20220406050016620.png" alt="image-20220406050016620"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.dialogtestapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnCustom;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        mBtnCustom=findViewById(R.id.btn_custom);</span><br><span class="line"></span><br><span class="line">        mBtnCustom.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">//动态加载</span></span><br><span class="line">                view= LayoutInflater.from(MainActivity.<span class="built_in">this</span>).inflate(R.layout.layout_custom,<span class="literal">null</span>,<span class="literal">false</span>);</span><br><span class="line">                AlertDialog.Builder customDialog=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">                Button customBtn1=view.findViewById(R.id.custom_btn1);</span><br><span class="line">                Button customBtn2=view.findViewById(R.id.custom_btn2);</span><br><span class="line">                customDialog.setView(view).show();</span><br><span class="line">                <span class="comment">//给两个按钮分别添加监听</span></span><br><span class="line">                customBtn1.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                        <span class="comment">//实现页面跳转</span></span><br><span class="line">                        Intent intent=<span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>,SecondActivity.class);</span><br><span class="line">                        startActivity(intent);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                customBtn2.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                         finish();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h1><h2 id="需求分析-1"><a href="#需求分析-1" class="headerlink" title="需求分析"></a>需求分析</h2><ul><li>根据下图，弹出进度对话框</li></ul><ol><li>界面元素的效果如图所示，图标可以用任意图案替换</li><li>要求进度条能发生模拟进度变化。</li></ol><p><img src="/posts/8018615b09fa/clip_image002-16491925948833.jpg" alt="img"></p><h2 id="设计-1"><a href="#设计-1" class="headerlink" title="设计"></a>设计</h2><h3 id="添加弹出按钮"><a href="#添加弹出按钮" class="headerlink" title="添加弹出按钮"></a>添加弹出按钮</h3><ul><li>在原来MainActivity里面再加一个弹出按钮</li></ul><p><img src="/posts/8018615b09fa/image-20220406051520338.png" alt="image-20220406051520338"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;进程对话框&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_progress&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="设计进程对话框"><a href="#设计进程对话框" class="headerlink" title="设计进程对话框"></a>设计进程对话框</h3><ul><li>进程对话框直接在Activity类中写java代码就可以实现了</li></ul><p><img src="/posts/8018615b09fa/image-20220406053348085.png" alt="image-20220406053348085"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mBtnProgress=findViewById(R.id.btn_progress);</span><br><span class="line">      mBtnProgress.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">              ProgressDialog progressDialog=<span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(MainActivity.<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">              progressDialog.setIcon(R.mipmap.bilibili);</span><br><span class="line">              progressDialog.setTitle(<span class="string">&quot;网络加载&quot;</span>);</span><br><span class="line">              progressDialog.setMessage(<span class="string">&quot;正在努力加载，请耐心等待......&quot;</span>);</span><br><span class="line">              progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL); <span class="comment">//设置水平条进度条</span></span><br><span class="line">              progressDialog.setProgress(<span class="number">0</span>);<span class="comment">//设置初始值</span></span><br><span class="line">              progressDialog.setSecondaryProgress(<span class="number">5</span>);<span class="comment">//设置二级进度条的初始值</span></span><br><span class="line">              progressDialog.setMax(<span class="number">2233</span>);<span class="comment">//设置最大值</span></span><br><span class="line">              progressDialog.show();<span class="comment">//显示</span></span><br><span class="line">              <span class="comment">//这里尝试一下lamda表达式的写法</span></span><br><span class="line">              <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                 <span class="keyword">while</span>(progressDialog.getProgress()&lt;progressDialog.getMax())&#123;</span><br><span class="line">                     <span class="keyword">try</span> &#123;</span><br><span class="line">                         Thread.sleep(<span class="number">100</span>);<span class="comment">//间隔100毫秒</span></span><br><span class="line">                         progressDialog.incrementProgressBy(<span class="number">23</span>);<span class="comment">//一级进度条增长值</span></span><br><span class="line">                         progressDialog.incrementSecondaryProgressBy(<span class="number">25</span>);<span class="comment">//二级进度增长值</span></span><br><span class="line">                     &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                         e.printStackTrace();</span><br><span class="line">                     &#125;</span><br><span class="line"></span><br><span class="line">                 &#125;</span><br><span class="line">              &#125;).start();<span class="comment">//记得start</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;练习一&quot;&gt;&lt;a href=&quot;#练习一&quot; class=&quot;headerlink&quot; title=&quot;练习一&quot;&gt;&lt;/a&gt;练习一&lt;/h1&gt;&lt;h2 id=&quot;需求分析&quot;&gt;&lt;a href=&quot;#需求分析&quot; class=&quot;headerlink&quot; title=&quot;需求分析&quot;&gt;&lt;/a&gt;需求分</summary>
      
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="实战练习" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio_4.3AdapterView与Adapter</title>
    <link href="http://101.43.65.22/posts/8925808c2fe0/"/>
    <id>http://101.43.65.22/posts/8925808c2fe0/</id>
    <published>2022-04-05T11:43:01.000Z</published>
    <updated>2022-04-05T11:43:01.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</li><li>部分素材和代码没有给出（例如drawable中的文件代码），请读者自己补全或者删除，或者可以到本人github下载完整素材和代码。</li><li>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></li></ul><h1 id="AdapterView与Adapter"><a href="#AdapterView与Adapter" class="headerlink" title="AdapterView与Adapter"></a>AdapterView与Adapter</h1><ul><li>AdapterView实现过程类似于MVC架构</li></ul><img src="/posts/8925808c2fe0/image-20220405203208912.png" alt="image-20220405203208912"><ul><li>AdapterView实现过程</li></ul><ol><li>控制层： Adapter适配器承担了控制层的角色</li><li>视图层： AdapterView将前端显示和后端数据分离</li><li>模型层： 数组、XML文件、List（ArrayList，LinkList）等形式的数据</li></ol><h3 id="AdapterView组件"><a href="#AdapterView组件" class="headerlink" title="AdapterView组件"></a>AdapterView组件</h3><ul><li><p>AdapterView特征</p><ul><li><p>AdapterView继承了ViewGroup，其本质上是容器</p></li><li><p>AdapterView可以包括多个“列表项”，并将“列表项”以合适的形式显示出来</p></li><li><p>AdapterView所显示的“列表项”是由Adapter提供，通过AdapterView的setAdapter()方法来设置Adapter适配器</p></li></ul></li><li><p>AdapterView及其子类的继承关系</p></li></ul><p><img src="/posts/8925808c2fe0/image-20220405204201334.png" alt="image-20220405204201334"></p><p>ps:通常将ListView、GridView、Spinner和Gallery等AdapterView子类作为容器，然后使用Adapter为容器提供“列表项”，AdapterView负责采用合适的方式显示这些列表项。</p><ul><li><p>Adapter的常用子接口</p><ul><li><p>ListAdapter接口</p></li><li><p>SimpleAdapter类</p></li><li><p>SimpleCursorAdapter类</p></li><li><p><strong>ArrayAdapter类</strong></p></li><li><p><strong>BaseAdapter抽象类</strong></p></li></ul></li></ul><h1 id="ListView"><a href="#ListView" class="headerlink" title="ListView"></a>ListView</h1><h3 id="ListView列表视图"><a href="#ListView列表视图" class="headerlink" title="ListView列表视图"></a>ListView列表视图</h3><ul><li><p>ListView通常具有两个职责：</p><ul><li>将数据填充到布局，以列表的方式来显示数据</li><li>处理用户的选择、点击等操作Adapter类</li></ul></li><li><p>通常创建ListView有以下两种方式： </p><ul><li>直接使用ListView进行创建</li><li>使用Activity继承ListActivity，实现ListView对象的获取</li></ul></li><li><p>ListView的独有属性</p></li></ul><table><thead><tr><th>XML属性</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>android:divider</td><td>设置列表的分隔条</td></tr><tr><td>android:dividerHeight</td><td>用来指定分隔条的高度</td></tr><tr><td>android:entries</td><td>指定一个数组资源</td></tr><tr><td>android:footerDividersEnabled</td><td>各个footer之间绘制分隔条</td></tr><tr><td>android:headerDividersEnabled</td><td>各个header之间绘制分隔条</td></tr></tbody></table><ul><li>ListView从AbsListView中继承的属性</li></ul><table><thead><tr><th>XML属性</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>android:cacheColorHint</td><td>用于设置该列表的背景始终以单一、固定的颜色绘制</td></tr><tr><td>android:choiceMode</td><td>为视图指定选择的行为</td></tr><tr><td>android:drawSelectorOnTop</td><td>如果为true，选中的列表项将会显示在上面</td></tr><tr><td>android:fastScrollEnabled</td><td>用于设置是否允许使用快速滚动滑块</td></tr><tr><td>android:listSelector</td><td>设置选中项显示的可绘制对象</td></tr><tr><td>android:scrollingCache</td><td>设置在滚动时是否使用绘制缓存，默认为true。</td></tr><tr><td>android:smoothScrollbar</td><td>列表会使用更精确的基于条目在屏幕上的可见像素高度的计算方法</td></tr><tr><td>android:stackFromBottom</td><td>设置是否将列表项从底部开始显示</td></tr><tr><td>android:textFilterEnabled</td><td>设置是否对列表项进行过滤</td></tr><tr><td>android:transcriptMode</td><td>设置该组件的滚动模式</td></tr></tbody></table><h3 id="使用ListView步骤"><a href="#使用ListView步骤" class="headerlink" title="使用ListView步骤"></a>使用ListView步骤</h3><ol><li>准备ListView所要显示的数据</li><li>使用数组或List集合存储数据</li><li>创建适配器（Adapter），作为列表项数据源</li><li>将适配器对象（Adapter）添加到ListView，并进行展示</li></ol><ul><li><p>自定义的ListView</p><p>ListView组件id为用户自定义字段</p></li></ul><h3 id="复杂ListView的使用"><a href="#复杂ListView的使用" class="headerlink" title="复杂ListView的使用"></a>复杂ListView的使用</h3><ul><li>实现图文混排步骤：<ul><li>定义行选项的布局格式</li><li>自定义一个Adapter，并重写其中的关键方法</li><li>注册列表选项的单击事件</li><li>创建Activity并加载对应的布局文件</li></ul></li></ul><h1 id="ArrayAdapter"><a href="#ArrayAdapter" class="headerlink" title="ArrayAdapter"></a>ArrayAdapter</h1><h3 id="用ArrayAdapter实现ListView步骤"><a href="#用ArrayAdapter实现ListView步骤" class="headerlink" title="用ArrayAdapter实现ListView步骤"></a>用ArrayAdapter实现ListView步骤</h3><ul><li>步骤其实和使用ListView是一样的，这里简写成三步</li></ul><ol><li>准备ListView所要显示的数据</li><li>将数据和适配器（Adapter）相关联</li><li>将适配器对象（Adapter）添加到ListView，并进行展示</li></ol><h3 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/8925808c2fe0/image-20220405222105584.png" alt="image-20220405222105584"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ListView mlv;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_list_view);</span><br><span class="line"></span><br><span class="line">        mlv=findViewById(R.id.lv1);</span><br><span class="line"><span class="comment">//        ArrayAdapter创建方式一</span></span><br><span class="line"><span class="comment">//        ArrayAdapter&lt;CharSequence&gt; adapter=ArrayAdapter.createFromResource(this,R.array.car, android.R.layout.simple_expandable_list_item_1);</span></span><br><span class="line"><span class="comment">//        mlv.setAdapter(adapter);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        ArrayAdapter创建方式二</span></span><br><span class="line">        List&lt;String&gt; datalist=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        datalist.add(<span class="string">&quot;大众&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;丰田&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;福特&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;比亚迪&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;哈弗&quot;</span>);</span><br><span class="line"><span class="comment">//        ArrayAdapter adapter=new ArrayAdapter(this, android.R.layout.simple_list_item_1,datalist);</span></span><br><span class="line">        ArrayAdapter adapter=<span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>(<span class="built_in">this</span>, android.R.layout.simple_list_item_single_choice,datalist);</span><br><span class="line">        mlv.setAdapter(adapter);</span><br><span class="line">        mlv.addHeaderView(LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.viewhead,<span class="literal">null</span>));</span><br><span class="line">        mlv.addFooterView(LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.viewfoot,<span class="literal">null</span>));</span><br><span class="line"></span><br><span class="line">        mlv.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                Toast.makeText(ListViewActivity.<span class="built_in">this</span>,i+<span class="string">&quot; Clicked&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.listview.ListViewActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/lv1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:divider</span>=<span class="string">&quot;@color/purple_200&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:dividerHeight</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:listSelector</span>=<span class="string">&quot;@drawable/listseletor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:stackFromBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:choiceMode</span>=<span class="string">&quot;multipleChoice&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout_editor_absoluteX</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout_editor_absoluteY</span>=<span class="string">&quot;-68dp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--android:entries=&quot;@array/car&quot;  设置静态数组--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>viewfoot.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/school&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>viewhead.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;48dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;表头&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#FF5722&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>假如使用静态加载数组&#x2F;链表 ，可以在value目录下创建资源文件，以下以arrays.xml为例</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>别克<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>宝马<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>奥迪<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>奔驰<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>保时捷<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>凯迪拉克<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>劳斯莱斯<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>法拉利<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>宾利<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="BaseAdapter"><a href="#BaseAdapter" class="headerlink" title="BaseAdapter"></a>BaseAdapter</h1><h3 id="用baseAdapter实现图文混排步骤"><a href="#用baseAdapter实现图文混排步骤" class="headerlink" title="用baseAdapter实现图文混排步骤"></a>用baseAdapter实现图文混排步骤</h3><ul><li>定义行选项的布局格式</li><li>自定义一个Adapter，并重写其中的关键方法（四个方法，其中getCout(),getView()是重点）</li><li>注册列表选项的单击事件</li><li>创建Activity并加载对应的布局文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps：Layout下的&lt;android:descendantFocusability=&quot;blocksDescendants&quot; &gt;可以设置不抢占焦点</span><br></pre></td></tr></table></figure><h3 id="测试样例代码-1"><a href="#测试样例代码-1" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/8925808c2fe0/image-20220406023111627.png" alt="效果图"></p><p><img src="/posts/8925808c2fe0/image-20220406023246749.png" alt="新增（绿）与修改（蓝）的文件"></p><ul><li>Flower实体类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Flower</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> imageId;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span>  Boolean checkStatus;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Flower</span><span class="params">(<span class="type">int</span> imageId,String name,String content)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId=imageId;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.content=content;</span><br><span class="line">        checkStatus=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getImageId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageId</span><span class="params">(<span class="type">int</span> imageId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getCheckStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> checkStatus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCheckStatus</span><span class="params">(Boolean checkStatus)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.checkStatus=checkStatus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>FolwerAdapter类和对应xml布局文件（继承自BaseAadpter类）</li><li>对getView()方法进行了优化，详情请看代码</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.CheckBox;</span><br><span class="line"><span class="keyword">import</span> android.widget.CompoundButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.channels.ClosedByInterruptException;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FlowerAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Flower&gt; mDatalist;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> count=<span class="number">0</span>;<span class="comment">//添加一个计数器看看，优化后view的创建次数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FlowerAdapter</span><span class="params">(LinkedList&lt;Flower&gt; datalist, Context context)</span>&#123;</span><br><span class="line">        mDatalist=datalist;</span><br><span class="line">        mContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mDatalist.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mDatalist.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *这是优化前的代码，可重用性低，view不断新建，组件也不断查找</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">        public View getView(int i, View view, ViewGroup viewGroup) &#123;</span></span><br><span class="line"><span class="comment">            view = LayoutInflater.from(mContext).inflate(R.layout.listitem, viewGroup, false);</span></span><br><span class="line"><span class="comment">            ImageView item_iv=view.findViewById(R.id.item_iv);</span></span><br><span class="line"><span class="comment">            TextView item_name=view.findViewById(R.id.item_name);</span></span><br><span class="line"><span class="comment">            TextView item_content=view.findViewById(R.id.item_content);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            item_iv.setImageResource(mDatalist.get(i).getImageId());</span></span><br><span class="line"><span class="comment">            item_name.setText(mDatalist.get(i).getName());</span></span><br><span class="line"><span class="comment">            item_content.setText(mDatalist.get(i).getContent());</span></span><br><span class="line"><span class="comment">            return view;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">        ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//优化,为空才构造view;那样只有创建第一页能显示的花的view，之后的直接重用好了</span></span><br><span class="line">        <span class="comment">//实际测试效果是创建了7个view</span></span><br><span class="line">        <span class="keyword">if</span>(view==<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//动态构造</span></span><br><span class="line">            view = LayoutInflater.from(mContext).inflate(R.layout.listitem, viewGroup, <span class="literal">false</span>);</span><br><span class="line">            viewHolder=<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line"></span><br><span class="line">            viewHolder.item_iv=view.findViewById(R.id.item_iv);</span><br><span class="line">            viewHolder.item_name=view.findViewById(R.id.item_name);</span><br><span class="line">            viewHolder.item_content=view.findViewById(R.id.item_content);</span><br><span class="line">            viewHolder.item_check=view.findViewById(R.id.item_check);</span><br><span class="line">            view.setTag(viewHolder);<span class="comment">//用view记录数据，不用重复查找</span></span><br><span class="line">            count++;<span class="comment">//view的创建数+1</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            viewHolder=(ViewHolder)view.getTag();<span class="comment">//重新赋值</span></span><br><span class="line">        &#125;</span><br><span class="line">        Log.i(<span class="string">&quot;Flower&quot;</span>, <span class="string">&quot;getView: 测试一下优化效果 &quot;</span>+count);</span><br><span class="line">        <span class="comment">//记录一下位置</span></span><br><span class="line">        viewHolder.item_check.setTag(i);</span><br><span class="line">        viewHolder.item_check.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">CompoundButton</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(CompoundButton compoundButton, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">                <span class="comment">//重新获取位置并设置状态</span></span><br><span class="line">                <span class="type">int</span> index=(<span class="type">int</span>)compoundButton.getTag();</span><br><span class="line">                mDatalist.get(index).setCheckStatus(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//重新设置</span></span><br><span class="line">        viewHolder.item_check.setChecked(mDatalist.get(i).getCheckStatus());</span><br><span class="line">        viewHolder.item_iv.setImageResource(mDatalist.get(i).getImageId());</span><br><span class="line">        viewHolder.item_name.setText(mDatalist.get(i).getName());</span><br><span class="line">        viewHolder.item_content.setText(mDatalist.get(i).getContent());</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//优化,添加一个静态类记录数据,增加重用性</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        ImageView item_iv;</span><br><span class="line">        TextView item_name;</span><br><span class="line">        TextView item_content;</span><br><span class="line">        CheckBox item_check;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加点击删除功能</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> position)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(mDatalist!=<span class="literal">null</span>)&#123;</span><br><span class="line">            mDatalist.remove(position);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//更新变化的信息</span></span><br><span class="line">        notifyDataSetChanged();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:descendantFocusability</span>=<span class="string">&quot;blocksDescendants&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;10dp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:button</span>=<span class="string">&quot;@drawable/checkbox_bg_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:buttonTint</span>=<span class="string">&quot;@drawable/checkbox_color_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_check&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/item_check&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/item_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">&quot;@id/item_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在ListView中添加FlowerAdapter</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ListView mlv;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Flower&gt; flowerList;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_list_view);</span><br><span class="line"></span><br><span class="line">        mlv=findViewById(R.id.lv1);</span><br><span class="line"></span><br><span class="line">        initFlower();</span><br><span class="line">        FlowerAdapter flowerAdapter=<span class="keyword">new</span> <span class="title class_">FlowerAdapter</span>((LinkedList&lt;Flower&gt;) flowerList,<span class="built_in">this</span>);</span><br><span class="line">        mlv.setAdapter(flowerAdapter);</span><br><span class="line">        mlv.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                flowerAdapter.remove(i);</span><br><span class="line">                Toast.makeText(ListViewActivity.<span class="built_in">this</span>,i+<span class="string">&quot; Clicked&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initFlower</span><span class="params">()</span> &#123;</span><br><span class="line">        flowerList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.baihe,<span class="string">&quot;百合&quot;</span>,<span class="string">&quot;百年好合&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.rose,<span class="string">&quot;红玫瑰&quot;</span>,<span class="string">&quot;富有热情&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.yinghua,<span class="string">&quot;樱花&quot;</span>,<span class="string">&quot;幸福永远&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.sunflower,<span class="string">&quot;向日葵&quot;</span>,<span class="string">&quot;光辉忠诚&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.ziluolan,<span class="string">&quot;紫罗兰&quot;</span>,<span class="string">&quot;永恒的美与爱&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.jidanhua,<span class="string">&quot;鸡蛋花&quot;</span>,<span class="string">&quot;孕育希望复活&quot;</span>));</span><br><span class="line"></span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.baihe,<span class="string">&quot;百合22&quot;</span>,<span class="string">&quot;百年好合&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.rose,<span class="string">&quot;红玫瑰22&quot;</span>,<span class="string">&quot;富有热情&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.yinghua,<span class="string">&quot;樱花22&quot;</span>,<span class="string">&quot;幸福永远&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.sunflower,<span class="string">&quot;向日葵22&quot;</span>,<span class="string">&quot;光辉忠诚&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.ziluolan,<span class="string">&quot;紫罗兰22&quot;</span>,<span class="string">&quot;永恒的美与爱&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.jidanhua,<span class="string">&quot;鸡蛋花22&quot;</span>,<span class="string">&quot;孕育希望复活&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。&lt;/li&gt;
&lt;li&gt;部分素材和代码没有给出（例如drawable</summary>
      
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI进阶" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E8%BF%9B%E9%98%B6/"/>
    
    
  </entry>
  
  <entry>
    <title>AndroidStudio_4.2Menu和Toolbar</title>
    <link href="http://101.43.65.22/posts/b43dacf3ed69/"/>
    <id>http://101.43.65.22/posts/b43dacf3ed69/</id>
    <published>2022-04-04T11:37:41.000Z</published>
    <updated>2022-04-04T11:37:41.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</li><li>部分素材和代码没有给出（例如drawable中的文件代码），请读者自己补全或者删除，或者可以到本人github下载完整素材和代码。</li><li>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></li></ul><h1 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h1><ul><li><p>Android中提供的菜单有如下几种：</p><ul><li>选项菜单OptionsMenu</li><li>上下文菜单ContextMenu</li><li>弹出菜单PopupMenu</li></ul></li></ul><h1 id="Options-Menu"><a href="#Options-Menu" class="headerlink" title="Options Menu"></a>Options Menu</h1><h3 id="Options-Menu选项菜单"><a href="#Options-Menu选项菜单" class="headerlink" title="Options Menu选项菜单"></a>Options Menu选项菜单</h3><p><img src="/posts/b43dacf3ed69/image-20220404195941766.png" alt="image-20220404195941766"></p><ul><li><p>使用onCreateOptionsMenu()回调方法对菜单进行初始化</p></li><li><p>使用onPrepareOptionsMenu()方法动态改变选项菜单的内容</p></li><li><p>onOptionsItemSelected()方法用于响应菜单项的点击事件</p></li></ul><h3 id="SubMenu子菜单"><a href="#SubMenu子菜单" class="headerlink" title="SubMenu子菜单"></a>SubMenu子菜单</h3><ul><li>创建子菜单的步骤：<ul><li>重写Activity类的onCreateOptionsMenu()方法</li><li>调用Menu的addSubMenu()方法添加子菜单</li><li>调用SubMenu的add()方法为子菜单添加菜单项</li><li>重写Activity类的onOptionsItemSelected ()方法</li></ul></li></ul><h3 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/b43dacf3ed69/image-20220405124922857.png" alt="xml文件添加menu效果图"></p><p><img src="/posts/b43dacf3ed69/image-20220405125319328.png" alt="直接通过Java代码添加menu效果图"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.SubMenu;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionsMenuActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_options_menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//用java代码方式添加菜单</span></span><br><span class="line">        menu.add(<span class="string">&quot;options1&quot;</span>);<span class="comment">//默认groupId:0,order:0</span></span><br><span class="line">        menu.add(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&quot;options2&quot;</span>);<span class="comment">//四个参数分别为 groupId（分组Id）,itemId（组内itemId）,order（出现顺序）,title</span></span><br><span class="line">        menu.add(<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="string">&quot;options3&quot;</span>);</span><br><span class="line">        menu.add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="string">&quot;options4&quot;</span>);</span><br><span class="line">        menu.add(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="string">&quot;options5&quot;</span>);</span><br><span class="line"><span class="comment">//        menu.removeGroup(0); //分组方便管理</span></span><br><span class="line">        SubMenu f=menu.addSubMenu(<span class="string">&quot;sub_options&quot;</span>);</span><br><span class="line">        f.add(<span class="string">&quot;sub1&quot;</span>);</span><br><span class="line">        SubMenu f2=f.addSubMenu(<span class="string">&quot;sub1-2&quot;</span>);</span><br><span class="line">        f2.add(<span class="string">&quot;sub2&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onPrepareOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        <span class="comment">//用xml文件添加菜单,动态添加菜单</span></span><br><span class="line">        menu.clear();<span class="comment">//清楚之前在Java代码中添加的menu的内容，注释这两行代码可以看到Java中设置menu的效果</span></span><br><span class="line">        getMenuInflater().inflate(R.menu.options_menu,menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onPrepareOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.menu_open:</span><br><span class="line">                str=<span class="string">&quot;menu_open&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.menu_close:</span><br><span class="line">                str=<span class="string">&quot;menu_close&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                str=<span class="string">&quot;NULL&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,str+<span class="string">&quot; Click&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在res文件夹下创建menu目录，然后建立options_meu.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">&quot;File&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;ifRoom&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_open&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/open&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;open&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_close&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/close&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;close&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Edit&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_cut&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/cut&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;Cut&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_copy&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/copy&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;Copy&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ContextMenu"><a href="#ContextMenu" class="headerlink" title="ContextMenu"></a>ContextMenu</h1><h3 id="ContextMenu上下文菜单"><a href="#ContextMenu上下文菜单" class="headerlink" title="ContextMenu上下文菜单"></a>ContextMenu上下文菜单</h3><ul><li>上下文菜单是通过调用ContextMenu接口中的方法来实现</li></ul><p><img src="/posts/b43dacf3ed69/image-20220404202328692.png" alt="image-20220404202328692"></p><ul><li>onCreateContextMenu()方法来生成ContextMenu对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onCreateContextMenu(ContextMenu menu, View v,ContextMenu.ContextMenuInfo menuInfo)</span><br></pre></td></tr></table></figure><ul><li>创建上下文菜单的步骤：<ul><li>通过registerForContextMenu()方法为ContextMenu分配一个View对象</li><li>通过onCreateContextMenu()创建一个上下文对象</li></ul></li></ul><h3 id="使用XML资源生成菜单项的步骤："><a href="#使用XML资源生成菜单项的步骤：" class="headerlink" title="使用XML资源生成菜单项的步骤："></a>使用XML资源生成菜单项的步骤：</h3><ul><li>在res目录中创建menu子目录</li><li>在menu子目录中创建一个Menu Resource file（XML文件）</li><li>使用XML文件的资源ID，在Activity中将XML文件中所定义的菜单元素添加到menu对象中</li><li>判断资源ID，实现相应事件处理</li></ul><h3 id="测试样例代码-1"><a href="#测试样例代码-1" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><ul><li>上下文菜单基于View，长按显示</li><li>上下文菜单中，一级菜单不显示icon图标，二级菜单才显示icon图标。（一级菜单设置了图标也没有用）</li></ul><p><img src="/posts/b43dacf3ed69/image-20220405144126837.png" alt="image-20220405144126837"></p><p><img src="/posts/b43dacf3ed69/image-20220405144016596.png" alt="image-20220405144016596"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.ContextMenu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.SubMenu;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContextMenuActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TextView mTvContext1,mTvContext2;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_context_menu);</span><br><span class="line">        mTvContext1=findViewById(R.id.tv_context_menu1);</span><br><span class="line">        mTvContext2=findViewById(R.id.tv_context_menu2);</span><br><span class="line"></span><br><span class="line">        registerForContextMenu(mTvContext1);</span><br><span class="line">        registerForContextMenu(mTvContext2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreateContextMenu</span><span class="params">(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreateContextMenu(menu, v, menuInfo);</span><br><span class="line">        <span class="keyword">if</span>(v.equals(mTvContext1))&#123;</span><br><span class="line">            <span class="comment">//java方式创建contextMenu</span></span><br><span class="line">            menu.add(<span class="string">&quot;context java 1&quot;</span>);</span><br><span class="line">            SubMenu f=menu.addSubMenu(<span class="string">&quot;context java 2&quot;</span>);</span><br><span class="line">            f.add(<span class="string">&quot;context java 21&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//xml方式创建contextMenu</span></span><br><span class="line">            getMenuInflater().inflate(R.menu.context_menu,menu);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onContextItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.context_menu_cut:</span><br><span class="line">                str=<span class="string">&quot;context_menu_cut&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.context_menu_paste:</span><br><span class="line">                str=<span class="string">&quot;context_menu_paste&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">super</span>.onContextItemSelected(item);</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,str,Toast.LENGTH_LONG).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.menu.ContextMenuActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_context_menu1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Context1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/tv_context_menu1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_context_menu2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Context2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;39dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在res文件夹下创建menu目录，然后建立context_meu.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;File&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Edit&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/context_menu_cut&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;context_cut&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/cut&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/context_menu_paste&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;context_paste&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/paste&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="PopupMenu"><a href="#PopupMenu" class="headerlink" title="PopupMenu"></a>PopupMenu</h1><p>PopupMenu弹出菜单</p><h3 id="使用PopupMenu的步骤"><a href="#使用PopupMenu的步骤" class="headerlink" title="使用PopupMenu的步骤"></a>使用PopupMenu的步骤</h3><ol><li>创建PopupMenu的实例</li><li>填充实例</li><li>设置监听</li><li>展示弹出菜单</li></ol><h3 id="测试样例代码-2"><a href="#测试样例代码-2" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><ul><li>一级菜单不显示icon图标，二级菜单才显示icon图标。（一级菜单设置了图标也没有用）</li></ul><p><img src="/posts/b43dacf3ed69/image-20220405152041828.png" alt="image-20220405152041828"></p><p><img src="/posts/b43dacf3ed69/image-20220405152059993.png" alt="image-20220405152059993"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.PopupMenu;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PopupMenuActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnPopup0;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_popup_menu);</span><br><span class="line"></span><br><span class="line">        mBtnPopup0 =findViewById(R.id.btn_popup);</span><br><span class="line">        mBtnPopup0.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                PopupMenu popupMenu=<span class="keyword">new</span> <span class="title class_">PopupMenu</span>(PopupMenuActivity.<span class="built_in">this</span>,view);</span><br><span class="line">                popupMenu.getMenuInflater().inflate(R.menu.popupo_menu,popupMenu.getMenu());</span><br><span class="line">                popupMenu.setOnMenuItemClickListener(<span class="keyword">new</span> <span class="title class_">PopupMenu</span>.OnMenuItemClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onMenuItemClick</span><span class="params">(MenuItem menuItem)</span> &#123;</span><br><span class="line">                        String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                        <span class="keyword">switch</span> (menuItem.getItemId())&#123;</span><br><span class="line">                            <span class="keyword">case</span> R.id.popup_file:</span><br><span class="line">                                str=<span class="string">&quot;popup_file&quot;</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> R.id.popup_save:</span><br><span class="line">                                str=<span class="string">&quot;popup_save&quot;</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> R.id.popup_search:</span><br><span class="line">                                str=<span class="string">&quot;popup_search&quot;</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">default</span>:</span><br><span class="line">                                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        Toast.makeText(PopupMenuActivity.<span class="built_in">this</span>,str,Toast.LENGTH_LONG).show();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                popupMenu.show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.menu.PopupMenuActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_popup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;弹出菜单&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在res文件夹下创建menu目录，然后建立popup_meu.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/popup_file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;File&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">&quot;Edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/edit&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/popup_search&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Search&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/search&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/popup_save&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Save&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/save&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h1><h3 id="Toolbar操作栏"><a href="#Toolbar操作栏" class="headerlink" title="Toolbar操作栏"></a>Toolbar操作栏</h3><ul><li>Material Design风格的导航组件</li><li>取代Actionbar(Toolbar可以出现屏幕任意位置，允许开发者更多定制，Actionbar只能出现在屏幕最上方且开发有限)</li><li>为开发者预留许多可定制修改的余地：<ul><li>支持添加一个或多个的自定义组件</li><li>设置App的Logo图标</li><li>支持设置标题和子标题</li><li>设置导航栏图标</li><li>支持Action Menu</li></ul></li></ul><table><thead><tr><th>方法</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>setTitle(int resId)</td><td>设置标题</td></tr><tr><td>setSubtitle(int resId)</td><td>设置子标题</td></tr><tr><td>setTitleTextColor(int  color)</td><td>设置标题字体颜色</td></tr><tr><td>setSubtitleTextColor(int  color)</td><td>设置子标题字体颜色</td></tr><tr><td>setNavigationIcon(Drawable  icon)</td><td>设置导航栏的图标</td></tr><tr><td>setLogo(Drawable drawable)</td><td>设置Toolbar的Logo图标</td></tr></tbody></table><h3 id="Toolbar的简单应用"><a href="#Toolbar的简单应用" class="headerlink" title="Toolbar的简单应用"></a>Toolbar的简单应用</h3><p>Toolbar的使用步骤：</p><ul><li>在styles.xml文件中对原主题进行修改(使用Toolbar，必须设置不支持Actionbar)</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar/&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>添加Toolbar组件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/my_toolbar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span> &gt;</span></span><br></pre></td></tr></table></figure><ul><li>在Java代码中设置Toolbar</li></ul><h3 id="Toolbar的综合应用"><a href="#Toolbar的综合应用" class="headerlink" title="Toolbar的综合应用"></a>Toolbar的综合应用</h3><p>ToolBar可以包含导航按钮、应用的Logo、标题和子标题、若干个自定义View以及动作菜单等元素</p><p>ps:Toolbar的setTitle()方法需要在setSupportActionBar()方法之前调用，否则无效</p><h3 id="测试样例代码-3"><a href="#测试样例代码-3" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/b43dacf3ed69/image-20220405171009654.png" alt="image-20220405171009654"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.toolbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.Toolbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.ContextMenu;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToolbarActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Toolbar mToolbar;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_toolbar);</span><br><span class="line"></span><br><span class="line">        mToolbar=findViewById(R.id.toolbar);</span><br><span class="line">        <span class="comment">//Java代码中设置标题优先级比xml中设置高</span></span><br><span class="line">        <span class="comment">//要设置空标题，必须要在java代码中设置</span></span><br><span class="line">        <span class="comment">//setTitle()必须要在setSupportActionBar()前面才能生效</span></span><br><span class="line">        mToolbar.setTitle(<span class="string">&quot;一级标题&quot;</span>);</span><br><span class="line"></span><br><span class="line">        setSupportActionBar(mToolbar);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//监听必须在setSupportActionBar()下面才能生效</span></span><br><span class="line">        mToolbar.setNavigationOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        getMenuInflater().inflate(R.menu.toolbae_options_menu,menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.toolbar_search:</span><br><span class="line">                str=<span class="string">&quot;toolbar_search&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.toolbar_menu_cut:</span><br><span class="line">                str=<span class="string">&quot;toolbar_menu_cut&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.toolbar_menu_copy:</span><br><span class="line">                str=<span class="string">&quot;toolbar_menu_copy&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,str,Toast.LENGTH_LONG).show();</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.toolbar.ToolbarActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;?actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;?colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:titleTextColor</span>=<span class="string">&quot;#f00&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:titleTextAppearance</span>=<span class="string">&quot;@style/ToolbarTextStyle&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:navigationIcon</span>=<span class="string">&quot;@mipmap/back&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ToolbarPopupTheme&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textStyle</span>=<span class="string">&quot;italic|bold&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableLeft</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTint</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;新标题&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#FF5722&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.appcompat.widget.Toolbar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在themes目录themes.xml里面设置一个NoActionBar的style（使用Toolbar，必须设置不支持ActionBar）</li><li>在清单文件AndroidManifest.xml中，修改使用toolbar的activitty的themes（如果在application中设置会影响所有activity！）</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.TodayApplication.NoActionBar&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.DayNight.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span> <span class="attr">tools:targetApi</span>=<span class="string">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MyApplication&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:roundIcon</span>=<span class="string">&quot;@mipmap/ic_launcher_round&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">&quot;@style/Theme.TodayApplication&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/Theme.TodayApplication.NoActionBar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">&quot;.toolbar.ToolbarActivity&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在style.xml设置弹出时在不掩盖锚点</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;ToolbarTextStyle&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>30sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textStyle&quot;</span>&gt;</span>bold<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;ToolbarPopupTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;ThemeOverlay.AppCompat.DayNight&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;actionOverflowMenuStyle&quot;</span>&gt;</span>@style/OverFlowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;OverFlowMenuStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Widget.AppCompat.PopupMenu.Overflow&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;overlapAnchor&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">本章内容为AndroidStudio中Menu和Toolbar的使用</summary>
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI进阶" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio_4.1Fragment</title>
    <link href="http://101.43.65.22/posts/4a295e5b0938/"/>
    <id>http://101.43.65.22/posts/4a295e5b0938/</id>
    <published>2022-04-04T02:53:54.000Z</published>
    <updated>2022-04-04T02:53:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</li><li>部分素材和代码没有给出（例如drawable中的文件代码），请读者自己补全或者删除，或者可以到本人github下载完整素材和代码。</li><li>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></li></ul><h1 id="Fragment基础知识"><a href="#Fragment基础知识" class="headerlink" title="Fragment基础知识"></a>Fragment基础知识</h1><h3 id="Fragment碎片"><a href="#Fragment碎片" class="headerlink" title="Fragment碎片"></a>Fragment碎片</h3><ul><li><p>fragment必须依赖Activity存在，必须嵌入到Activity当中，不能独立存在。</p></li><li><p>Android从3.0开始引入Fragment（碎片）</p></li><li><p>允许将Activity拆分成多个完全独立封装的可重用的组件</p></li><li><p>每个组件拥有自己的生命周期和UI布局</p></li><li><p>为不同型号、尺寸、分辨率的设备提供统一的UI设计方案</p></li></ul><p><img src="/posts/4a295e5b0938/image-20220404111008148.png" alt="image-20220404111008148"></p><p><img src="/posts/4a295e5b0938/image-20220404111013831.png" alt="image-20220404111013831"></p><ul><li>自定义的Fragment必须继承Fragment类或其子类</li></ul><p><img src="/posts/4a295e5b0938/image-20220404111037940.png" alt="image-20220404111037940"></p><h3 id="创建Fragment"><a href="#创建Fragment" class="headerlink" title="创建Fragment"></a>创建Fragment</h3><ul><li>通常在创建Fragment时，需要实现方法：<ul><li>onCreateView()</li></ul></li><li>将Fragment加载到Activity中主要有两种方式：<ul><li>把Fragment添加到Activity的布局文件中</li><li>在Activity的代码中动态添加Fragment</li></ul></li></ul><h3 id="管理Fragment"><a href="#管理Fragment" class="headerlink" title="管理Fragment"></a>管理Fragment</h3><ul><li><p>通过FragmentManager实现Fragment对象的管理</p></li><li><p>通过getFragmentManager()获取FragmentManager对象</p></li><li><p>FragmentManager能够完成以下三方面的操作：</p><ul><li>通过findFragmentById()或findFragmentByTag()方法，来获取Activity中已存在的Fragment对象</li><li>通过popBackStack()方法将Fragment从Activity的后退栈中弹出</li><li>通过addOnBackStackChangedListerner()方法来注册一个侦听器以监视后退栈的变化</li></ul></li><li><p>获取FragmentTransaction对象</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FragmentManager fragmentManager=getFragmentManager();</span><br><span class="line">FragmentTransaction fragmentTransaction=fragmentManager.beginTransaction();</span><br></pre></td></tr></table></figure><p>ps:FragmentTransaction被称作Fragment事务，与数据库事务类似，Fragment事务代表了Activity对Fragment执行的多个改变操作。</p><ul><li>使用FragmentTransaction</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个新的Fragment对象</span></span><br><span class="line">Fragment newFragment=<span class="keyword">new</span> <span class="title class_">ExampleFragment</span>();</span><br><span class="line"><span class="comment">//通过FragmentManager获取Fragment事务对象</span></span><br><span class="line">FragmentTransaction transaction=getFragmentManager().beginTransaction();</span><br><span class="line"><span class="comment">//通过replace()方法把fragment_container替换成新的Fragment对象 </span></span><br><span class="line">transaction.replace(R.id.fragment_container,newFragment);</span><br><span class="line"><span class="comment">//添加到回退栈 </span></span><br><span class="line">transaction.addToBackStack(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">//提交事务</span></span><br><span class="line">transaction.commit();</span><br></pre></td></tr></table></figure><p>事务中动作的执行顺序可以随意，但需注意以下两点： </p><ul><li>程序的最后必须调用commit()方法</li><li>程序中添加了多个Fragment对象，显示的顺序跟添加顺序一致</li><li>当删除Fragment对象时，在没有调用addToBackStack()方法情况下，Fragment对象会被销毁</li></ul><p>ps:调用commit()后，事务并不会马上提交，而是会在Activity的UI线程中等待直到线程能执行的时候才执行。</p><h3 id="与Activity通讯"><a href="#与Activity通讯" class="headerlink" title="与Activity通讯"></a>与Activity通讯</h3><ul><li>Fragment获取其所在的Activity中的组件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">View listView=getActivity().findViewById(R.id.list);</span><br></pre></td></tr></table></figure><ul><li>Activity获取指定Fragment实例</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExampleFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> (ExampleFragment)getFragmentManager()</span><br><span class="line">.findFragmentById(R.id.example_fragment)</span><br></pre></td></tr></table></figure><ul><li>在Fragment中定义回调接口</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FragmentA</span> <span class="keyword">extends</span> <span class="title class_">ListFragment</span> &#123; </span><br><span class="line">......省略</span><br><span class="line">    <span class="comment">//Activity必须实现下面的接口 </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnNewsSelectedListener</span>&#123;</span><br><span class="line">    <span class="comment">//传递当前被选中的标题的id </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNewsSelected</span><span class="params">(<span class="type">long</span> id)</span>; </span><br><span class="line">    &#125;</span><br><span class="line">......省略</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><ul><li>使用onAttach()方法检查Activity是否实现回调接口</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FragmentA</span> <span class="keyword">extends</span> <span class="title class_">ListFragment</span> &#123; </span><br><span class="line">    OnNewsSelectedListener mListener;</span><br><span class="line">    ......省略</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttach</span><span class="params">(Activity activity)</span>&#123;</span><br><span class="line"><span class="built_in">super</span>.onAttach(activity);</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    mListener =(OnNewsSelectedListener)activity;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(ClassCastException e)&#123; </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ClassCastException</span>(activity.toString()</span><br><span class="line">+<span class="string">&quot;必须继承接口 OnNewsSelectedListener&quot;</span>); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ......省略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Fragment的生命周期"><a href="#Fragment的生命周期" class="headerlink" title="Fragment的生命周期"></a>Fragment的生命周期</h1><h3 id="Fragment的生命周期状态"><a href="#Fragment的生命周期状态" class="headerlink" title="Fragment的生命周期状态"></a>Fragment的生命周期状态</h3><ul><li>Fragment的生命周期具有以下四个状态：<ul><li>活动状态:  onResume()</li><li>暂停状态:  onPause()</li><li>停止状态:  onStop() </li><li>销毁状态:  onDestroyView()  || onDestroy()</li></ul></li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2015/08/31722863.jpg" alt="img"></p><p><img src="/posts/4a295e5b0938/image-20220404113812287.png" alt="image-20220404113812287"></p><p>ps： onActivityCreated()方法已经过期 </p><table><thead><tr><th><strong>方法</strong></th><th align="left"><strong>功能描述</strong></th></tr></thead><tbody><tr><td>onAttach()</td><td align="left">当一个Fragment对象关联到一个Activity时被调用</td></tr><tr><td>onCreate()</td><td align="left">初始化创建Fragment对象时被调用</td></tr><tr><td>onCreateView()</td><td align="left">当Activity获得Fragment的布局时调用此方法</td></tr><tr><td>onActivityCreated()</td><td align="left">当Activity对象完成自己的onCreate()方法时调用 (该方法已经过期)</td></tr><tr><td>onStart()</td><td align="left">Fragment对象在UI界面可见时调用</td></tr><tr><td>onResume()</td><td align="left">Fragment对象的UI可以与用户交互时调用</td></tr><tr><td>onPause()</td><td align="left">由Activity对象转为onPause状态时调用</td></tr><tr><td>onStop()</td><td align="left">有组件完全遮挡，或者宿主Activity对象转为onStop状态时调用</td></tr><tr><td>onDestroyView()</td><td align="left">Fragment对象清理View资源时调用，即移除Fragment中的视图</td></tr><tr><td>onDestroy()</td><td align="left">Fragment对象完成对象清理View资源时调用</td></tr><tr><td>onDetach()</td><td align="left">当Fragment被从Activity中删掉时被调用</td></tr></tbody></table><h3 id="Fragment和Activity两者之间生命周期的关系"><a href="#Fragment和Activity两者之间生命周期的关系" class="headerlink" title="Fragment和Activity两者之间生命周期的关系"></a>Fragment和Activity两者之间生命周期的关系</h3><ul><li><p>Activity直接影响其所包含的Fragment的生命周期</p></li><li><p>Fragment的回调方法要比Activity多，多出的方法主要用于与Activity的交互</p></li><li><p>当Activity进入运行状态时（即running状态），才允许添加或删除Fragment</p></li><li><p>有当Activity处于resumed状态时，Fragment的生命周期才能独立运转</p></li><li><p>其他阶段依赖于Activity的生命周期</p></li></ul><p><img src="/posts/4a295e5b0938/image-20220404114229962.png" alt="image-20220404114229962"></p><h3 id="静态方式"><a href="#静态方式" class="headerlink" title="静态方式"></a>静态方式</h3><p><img src="https://www.runoob.com/wp-content/uploads/2015/08/14443487.jpg" alt="img"></p><ul><li><p>Fragment的生命周期调用过程</p><ul><li><p>1当首次展示布局页面时，其生命周期方法调用的顺序是：</p><ul><li><p>onAttach()</p></li><li><p>onCreate()</p></li><li><p>onCreateView()</p></li><li><p>onStart()</p></li><li><p>onResume()</p></li></ul></li><li><p>当关闭手机屏幕或者手机屏幕变暗时，其生命周期方法调用顺序是：</p><ul><li>onPause()</li></ul></li><li><p>onStop()</p></li></ul></li><li><p>使用时方法，在Activity布局文件中写入fragment，属性中加入android：name，值写关联的Fragment类</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.gallifrey.todayapplication.fragment.MessageFragment&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_container&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="动态方式"><a href="#动态方式" class="headerlink" title="动态方式"></a>动态方式</h3><p><img src="https://www.runoob.com/wp-content/uploads/2015/08/29546434.jpg" alt="img"></p><ul><li>通过重写Fragment生命周期的方法</li><li>在Activity代码中动态使用Fragment</li></ul><h3 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/4a295e5b0938/image-20220404183956838.png" alt="image-20220404183956838"></p><p><img src="/posts/4a295e5b0938/image-20220404191200920.png" alt="image-20220404191200920"></p><p><img src="/posts/4a295e5b0938/image-20220404191323103.png" alt="image-20220404191323103"></p><ul><li>FragmentActivity.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentTransaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.DiscoverFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.MeFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.MessageFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.PhoneFragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FragmentActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">PhoneFragment</span>.IPhoneCallBack&#123;</span><br><span class="line">    <span class="keyword">private</span> FragmentManager fragmentManager;</span><br><span class="line">    <span class="keyword">private</span> FragmentTransaction fragmentTransaction;</span><br><span class="line">    <span class="keyword">private</span> PhoneFragment phoneFragment;</span><br><span class="line">    <span class="keyword">private</span> MessageFragment messageFragment;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MeFragment meFragment;</span><br><span class="line">    <span class="keyword">private</span> DiscoverFragment discoverFragment;</span><br><span class="line">    <span class="keyword">private</span> RadioGroup mRg;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Fragment&gt; fragmentList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_fragment);</span><br><span class="line"></span><br><span class="line">        mRg=findViewById(R.id.fl_rg);</span><br><span class="line"></span><br><span class="line">        fragmentManager=getSupportFragmentManager();</span><br><span class="line"></span><br><span class="line">        messageFragment =<span class="keyword">new</span> <span class="title class_">MessageFragment</span>();</span><br><span class="line">        fragmentList.add(messageFragment);</span><br><span class="line"></span><br><span class="line">        hideOtherFragment(messageFragment,<span class="literal">true</span>);</span><br><span class="line">        mRg.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_message:</span><br><span class="line">                        hideOtherFragment(messageFragment,<span class="literal">false</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_phone:</span><br><span class="line">                        <span class="keyword">if</span>(phoneFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            phoneFragment=PhoneFragment.newInstance(<span class="string">&quot;phone 12315&quot;</span>);</span><br><span class="line">                            fragmentList.add(phoneFragment);</span><br><span class="line">                            hideOtherFragment(phoneFragment,<span class="literal">true</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            hideOtherFragment(phoneFragment,<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_me:</span><br><span class="line">                        <span class="keyword">if</span>(meFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            meFragment=<span class="keyword">new</span> <span class="title class_">MeFragment</span>();</span><br><span class="line">                            fragmentList.add(meFragment);</span><br><span class="line">                            hideOtherFragment(meFragment,<span class="literal">true</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            hideOtherFragment(meFragment,<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_discover:</span><br><span class="line">                        <span class="keyword">if</span>(phoneFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            discoverFragment=<span class="keyword">new</span> <span class="title class_">DiscoverFragment</span>();</span><br><span class="line">                            fragmentList.add(discoverFragment);</span><br><span class="line">                            hideOtherFragment(discoverFragment,<span class="literal">true</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            hideOtherFragment(discoverFragment,<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//隐藏其他fragment</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">hideOtherFragment</span><span class="params">(Fragment currentFragment,<span class="type">boolean</span> b)</span>&#123;</span><br><span class="line">        fragmentTransaction=fragmentManager.beginTransaction();<span class="comment">//创建事务</span></span><br><span class="line">        <span class="keyword">if</span>(b) &#123;</span><br><span class="line">            fragmentTransaction.add(R.id.fl_container, currentFragment);<span class="comment">//如果从未加入，则将当前Fragment添加到activity</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Fragment tempFragment:fragmentList)&#123;</span><br><span class="line">            <span class="keyword">if</span>(tempFragment.equals(currentFragment))&#123;</span><br><span class="line">                fragmentTransaction.show(tempFragment);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                fragmentTransaction.hide(tempFragment);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        fragmentTransaction.commitAllowingStateLoss();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        setTitle(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>activity_fragment.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.FragmentActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_container&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;2dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#E4E3E3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checkedButton</span>=<span class="string">&quot;@id/fl_rb_message&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">           <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_message&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;消息&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_message_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_phone&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;通信录&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_phone_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_discover&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;发现&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_discover_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_me&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;我&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_me_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>PhoneFragment.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String ARG_PARAM=<span class="string">&quot;param1&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG=<span class="string">&quot;PhoneFragment&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String param;</span><br><span class="line">    <span class="keyword">private</span> IPhoneCallBack iPhoneCallBack;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PhoneFragment</span><span class="params">()</span>&#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;PhoneFragment: &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PhoneFragment <span class="title function_">newInstance</span><span class="params">(String param1)</span>&#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;newInstance: into&quot;</span>);</span><br><span class="line">        PhoneFragment phoneFragment=<span class="keyword">new</span> <span class="title class_">PhoneFragment</span>();</span><br><span class="line">        Bundle args=<span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        args.putString(ARG_PARAM,param1);</span><br><span class="line">        phoneFragment.setArguments(args);</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;newInstance: out&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> phoneFragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttach</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onAttach: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onAttach(context);</span><br><span class="line">        iPhoneCallBack= (IPhoneCallBack) context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onCreate: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">if</span>(getArguments()!=<span class="literal">null</span>)&#123;</span><br><span class="line">            param=getArguments().getString(ARG_PARAM);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(<span class="meta">@NonNull</span> LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onCreateView: &quot;</span>);</span><br><span class="line">        View view=inflater.inflate(R.layout.fragment_phone,container,<span class="literal">false</span>);</span><br><span class="line">        TextView textView=view.findViewById(R.id.fl_tv);</span><br><span class="line">        textView.setText(param);</span><br><span class="line">        iPhoneCallBack.setData(<span class="string">&quot;通讯录Activity&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroyView</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onDestroyView: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDestroyView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onDestroy: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDetach</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onDetach: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDetach();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IPhoneCallBack</span>&#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>fragment_phone.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.fragment.PhoneFragment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我是通讯录&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;32sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>styles.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;blue_textview&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>30sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textColor&quot;</span>&gt;</span>#673AB7<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textStyle&quot;</span>&gt;</span>bold|italic<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;flRadioButton&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_width&quot;</span>&gt;</span>0dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_height&quot;</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_weight&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>24sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:gravity&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:button&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textColor&quot;</span>&gt;</span>@drawable/fl_rb_textcolor<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">本章内容为Fragment的学习</summary>
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI进阶" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>线性规划</title>
    <link href="http://101.43.65.22/posts/72681c2003bb/"/>
    <id>http://101.43.65.22/posts/72681c2003bb/</id>
    <published>2022-04-01T01:14:23.000Z</published>
    <updated>2022-04-01T01:14:23.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="线性规划介绍"><a href="#线性规划介绍" class="headerlink" title="线性规划介绍"></a>线性规划介绍</h2><p>线性规划描述了一大类优化任务，这些任务的共同特点是约束条件和优化准则都可以表示为<strong>线性函数</strong>。</p><p>线性规划所研究的对象属于最优化的范畴，本质上是一个极值问题。<strong>三个基本要素</strong>：</p><ul><li>决策变量：决策者所控制的量，它们的取值由决策者决定</li><li>约束条件：决策变量在这些限制范围内才有意义</li><li>目标函数：代表决策者希望对其优化的指标。目标函数是决策变量的函数。</li></ul><h4 id="示例：利润最大化"><a href="#示例：利润最大化" class="headerlink" title="示例：利润最大化"></a>示例：利润最大化</h4><p>巧克力作坊生成两种产品：Pyramide和Nuit</p><p>-假设每天生产x1盒pyramide和x2盒Nuit，前者利润为$1，后者每盒$6</p><p>-市场需求，每日最多200盒Pyramide,300盒Nuit</p><p>-巧克力作坊每日最多生成400盒巧克力</p><p>问：如何做到利润最大化</p><ul><li><p>线性规划：</p><p>-决策变量：x1,x2</p><p>-目标函数：max 1<em>x1+6</em>x2</p><p>-约束条件：x1&lt;&#x3D;200</p><p>​                     x2&lt;&#x3D;300</p><p>​                     x1+x2&lt;&#x3D;400    </p><p>​                      x1&gt;&#x3D;0&amp;&amp;x2&gt;&#x3D;0</p></li></ul><h4 id="图解法求解"><a href="#图解法求解" class="headerlink" title="图解法求解"></a>图解法求解</h4><p><img src="/posts/72681c2003bb/image-20220401094617931.png" alt="image-20220401094617931"></p><h4 id="建立线性规划数学模型的步骤"><a href="#建立线性规划数学模型的步骤" class="headerlink" title="建立线性规划数学模型的步骤"></a>建立线性规划数学模型的步骤</h4><ul><li>首先，决定决策变量</li><li>决定约束条件</li><li>决定目标函数</li></ul><h2 id="单纯形法"><a href="#单纯形法" class="headerlink" title="单纯形法"></a>单纯形法</h2><h4 id="示例：更多产品"><a href="#示例：更多产品" class="headerlink" title="示例：更多产品"></a>示例：更多产品</h4><p>巧克力作坊推出一种新产品 Luxe，每盒利润$13。（原来两种产品：Pyramide($1)和Nuit($6)）</p><p>市场需求，每日最多200盒Pyramide,300盒Nuit</p><p>三种巧克力每天最多生产400 盒。</p><p>Nuit和Luxe 需要使用相同的包装设备，而且每个Luxe 的包装需要使用三次该设备，设备每天最多使用600次。</p><p>最优的生产计划应该又是怎样的呢？</p><ul><li><p>线性规划</p><ul><li><p>决策变量：<em>x</em>1、<em>x</em>2、<em>x</em>3 分别表示每天生产的数量，</p></li><li><p>目标函数：max  <em>x</em>1+6<em>x</em>2+13<em>x</em>3</p></li><li><p>S.t.* <em>：</em>   <em>x</em>1≤200</p></li></ul></li></ul><p>​                                <em>x</em>2≤300</p><p>​                            <em>x</em>1+<em>x</em>2+<em>x</em>3≤400</p><p>​                             <em>x</em>2+3<em>x</em>3≤600</p><p>​                             <em>x</em>1, <em>x</em>2, <em>x</em>3≥0</p><h3 id="单纯形法求解线性规划（爬山法）"><a href="#单纯形法求解线性规划（爬山法）" class="headerlink" title="单纯形法求解线性规划（爬山法）"></a>单纯形法求解线性规划（爬山法）</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><ul><li><p>算法从一个顶点开始，不断重复地寻找 目标函数值较高的邻居顶点(该顶点与原顶点由可行区域的一条边相连)，并向其移动</p></li><li><p>一旦再也找不到更高的邻居，结束计算</p></li><li><p>对于线性规划问题是一定能找出最优解的，无论是几维</p></li></ul><h4 id="实现方法（不作教学要求）："><a href="#实现方法（不作教学要求）：" class="headerlink" title="实现方法（不作教学要求）："></a>实现方法（不作教学要求）：</h4><ul><li>在每次迭代中，单纯形法需要完成如下两项任务：<ul><li>1.检测当前顶点是否最优，如果是，则退出</li><li>2.决定下一个移动方向</li></ul></li></ul><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><ul><li>单纯形法解决 示例：利润最大化</li></ul><p><img src="/posts/72681c2003bb/image-20220401100349190.png" alt="image-20220401100349190"></p><ul><li>单纯形法解决 示例：更多产品</li></ul><p><img src="/posts/72681c2003bb/image-20220401100057776.png" alt="image-20220401100057776"></p><p>单纯形法的工作状态</p><p><img src="/posts/72681c2003bb/image-20220401101803471.png" alt="image-20220401101803471"> </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;线性规划介绍&quot;&gt;&lt;a href=&quot;#线性规划介绍&quot; class=&quot;headerlink&quot; title=&quot;线性规划介绍&quot;&gt;&lt;/a&gt;线性规划介绍&lt;/h2&gt;&lt;p&gt;线性规划描述了一大类优化任务，这些任务的共同特点是约束条件和优化准则都可以表示为&lt;strong&gt;线性函数&lt;/</summary>
      
    
    
    
    <category term="算法" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="http://101.43.65.22/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>操作系统学习笔记（一）</title>
    <link href="http://101.43.65.22/posts/4194d1de52bf/"/>
    <id>http://101.43.65.22/posts/4194d1de52bf/</id>
    <published>2022-03-16T04:28:25.000Z</published>
    <updated>2022-03-30T04:42:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="操作系统的概念，功能和目标"><a href="#操作系统的概念，功能和目标" class="headerlink" title="操作系统的概念，功能和目标"></a>操作系统的概念，功能和目标</h1><h4 id="操作系统的概念"><a href="#操作系统的概念" class="headerlink" title="操作系统的概念"></a>操作系统的概念</h4><p>操作系统（Operating System，OS）是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源分配，以提供给用户和其他软件方便的接口和环境，是计算机系统中最基本的系统软件。</p><h4 id="操作系统的功能和目标"><a href="#操作系统的功能和目标" class="headerlink" title="操作系统的功能和目标"></a>操作系统的功能和目标</h4><p>补充知识：进程是应该程序的执行过程，执行前需要将该程序放到内存中，才能CPU处理。</p><h5 id="功能和目标"><a href="#功能和目标" class="headerlink" title="功能和目标"></a>功能和目标</h5><ul><li>作为系统资源的管理者<ul><li>功能<ul><li>处理机管理</li><li>储存机管理</li><li>文件管理</li><li>设备管理</li></ul></li><li>目标<ul><li>安全</li><li>高效</li></ul></li></ul></li><li>作为用户和计算机硬件之间的接口<ul><li>功能<ul><li>命令接口：允许用户直接使用<ul><li>联机命令接口：用户说一句，操作系统做一句（交互式命令接口）</li><li>脱机命令接口：用户说一堆，操作系统做一堆（批处理命令接口）</li></ul></li><li>程序接口：允许用户用过程序间接使用（系统调用&#x2F;广义指令）</li><li>GUI（图形用户界面）</li></ul></li><li>目标<ul><li>方便用户使用</li></ul></li></ul></li><li>作为最接近硬件的层次<ul><li>功能和目标<ul><li>需要实现对硬件机器的扩展</li><li>没有任何软件支持的计算机称为裸机。在裸机上安装的操作系统可以提供资源管理功能和方便用户的服务功能，将裸机改造橙功能更强，使用更方便的机器</li><li>通常把覆盖了软件的机器称为扩充机器，又称之为虚拟机</li></ul></li></ul></li></ul><p><img src="/posts/4194d1de52bf/image-20220317144853609.png" alt="image-20220317144853609"></p><h1 id="操作系统的特征"><a href="#操作系统的特征" class="headerlink" title="操作系统的特征"></a>操作系统的特征</h1><h4 id="操作系统的四个特征"><a href="#操作系统的四个特征" class="headerlink" title="操作系统的四个特征"></a>操作系统的四个特征</h4><ul><li>并发</li><li>共享</li><li>虚拟</li><li>异步</li></ul><h4 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h4><ul><li><p>并发：指两个或者多个事件在同一个时间间隔内发生。这些事情宏观上同时发生的，但在微观上是交替发生的。</p><p>易混淆–并行：指两个或者多个事件在同一个时刻同时发生。</p></li><li><p>操作系统的并发性指计算机系统中同时存在着多个运行着的程序。</p><p>一个单核处理机（CPU）同一时刻只能执行一个程序，因此操作系统会负责协调多个程序交替执行(这些程序微观上是交替执行的，但宏观上看起来就像在同时执行)</p><p>事实上，操作系统就是伴随着”多道程序技术“而出现的。因此，操作系统和程序并发是一起诞生的</p></li><li><p>当今的计算机，一般都是多核cpu，如4核cpu这就意味着同一个时刻可以有4个程序并行执行，但是操作系统的并发性依然必不可少</p></li></ul><h4 id="共享"><a href="#共享" class="headerlink" title="共享"></a>共享</h4><ul><li>共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用</li><li>两种资源共享方式<ul><li>互斥共享：一个时间端只允许一个进程访问该资源</li><li>同时共享：允许一个时间段内由多个进程“同时”对它们进行访问（所谓的“同时”往往是宏观上的，但是微观上<strong>有可能</strong>是交替对该资源进行访问，即分时共享）</li></ul></li><li>并发与共享的关系：互为存在条件</li></ul><h4 id="虚拟"><a href="#虚拟" class="headerlink" title="虚拟"></a>虚拟</h4><ul><li>虚拟是指把一个物理上的实体变为若干逻辑上的对应物。物理实体（前者）是实际存在的，而逻辑上对应物（后者）是用户感受到的。</li><li>虚拟技术<ul><li>空分复用技术（如虚拟存储器技术）</li><li>时分复用技术（如虚拟处理器–cpu）</li></ul></li></ul><h4 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h4><ul><li>异步是指，在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是一贯到底，而是走走停停，以不可预知的速度向前推进，这就是进程的异步性。</li><li>只有系统拥有并发性，才有可能导致异步性</li></ul><h4 id="重点"><a href="#重点" class="headerlink" title="重点"></a>重点</h4><ul><li>理解并发和并发的区别</li><li>并发和共享互为存在条件</li><li>没有并发和共享，就谈不上虚拟和异步，因此并发和共享是操作系统的两个最基本的特性</li></ul><h1 id="操作系统的发展和分类"><a href="#操作系统的发展和分类" class="headerlink" title="操作系统的发展和分类"></a>操作系统的发展和分类</h1><p><img src="/posts/4194d1de52bf/image-20220317203705558.png" alt="image-20220317203705558"></p><h4 id="手工操作阶段"><a href="#手工操作阶段" class="headerlink" title="手工操作阶段"></a>手工操作阶段</h4><ul><li><p>人–字带机–计算机—字带机人</p></li><li><p>主要缺点：用户独占全机，人机速度矛盾导致资源利用率低</p></li></ul><h4 id="批次处理阶段–单道批处理系统"><a href="#批次处理阶段–单道批处理系统" class="headerlink" title="批次处理阶段–单道批处理系统"></a>批次处理阶段–单道批处理系统</h4><ul><li><p>引入脱机输入&#x2F;输出技术（利用磁带技术），并监督程序负责控制作业的输入，输出</p></li><li><p>人–自带机—外围机–磁带–计算机–磁带–……</p></li><li><p>主要优点：缓解了一定程度的人机速度矛盾，资源利用率有所提升</p></li><li><p>主要缺点：内存中仅能由一道程序运行，只有该程序运行结束之后才能调入下一道程序。CPU有大量的时间是在空闲等待I&#x2F;O完成。资源利用率依然很低</p></li></ul><h4 id="批处理阶段–多道批处理系统"><a href="#批处理阶段–多道批处理系统" class="headerlink" title="批处理阶段–多道批处理系统"></a>批处理阶段–多道批处理系统</h4><ul><li>在磁带部分，每次往内存中输入多道程序</li><li>操作系统正式诞生，并引入中断技术，由操作系统负责管理这些程序的运行。各个程序并发执行。</li><li>主要优点:多道程序并发执行，共享计算机资源。资源利用率大幅度提升，CPU和其他资源保持“忙碌”状态，系统吞吐量增大。</li><li>主要缺点：用户响应时间长，没有人机交互功能（用户提升自己的作业之后就只能等待计算机处理完成，中间不能控制自己的作业执行）</li></ul><h4 id="分时操作系统"><a href="#分时操作系统" class="headerlink" title="分时操作系统"></a>分时操作系统</h4><ul><li>分时操作系统：计算机以时间片为单位轮流为各个用户&#x2F;作业服务，各个用户可通过终端与计算机进行交互</li><li>主要优点：用户请求可以被即时响应，解决了人机交互问题。允许多个用户同时使用一台计算机，并且用户对计算机的操作相互独立，感受不到别人的存在</li><li>主要缺点：不能优先处理一些紧急任务。操作系统对各个用户&#x2F;作业都是完全公平的，循环地为每个用户&#x2F;作业服务一个时间片，不能区分任务的紧急性。</li></ul><h4 id="实时操作系统"><a href="#实时操作系统" class="headerlink" title="实时操作系统"></a>实时操作系统</h4><ul><li>主要优点：能够优先响应一些紧急任务，某些紧急任务不需要时间片排队。</li><li>在实时操作系统的控制下，计算机系统接收道外部信号后及时进行处理，并且要在严格的时限内处理完事件。实时操作系统的主要特点是及时性和可靠性。</li><li>分类：<ul><li>硬实时操作系统：必须在绝对严格的规定时间内完成处理</li><li>软实时操作系统：能接受偶尔违反时间规定</li></ul></li></ul><h4 id="其他操作系统"><a href="#其他操作系统" class="headerlink" title="其他操作系统"></a>其他操作系统</h4><ul><li>网络操作系统：是伴随着计算机网络的发展而诞生的，能把网络中各个计算机有机地结合起来，实现数据传送等功能，实现网络中各种资源的共享（如文件的共享）和各个计算机之间的通信。（如：Windows NT</li><li>分布式操作系统：主要特点是分布性和并行性。系统中的各台计算机地位相同，任何工作都可以分布在这些计算机上，由他们并行，协同完成这个任务。</li><li>个人计算机操作系统：如Windows xp，MacOs</li></ul><h1 id="操作系统的运行机制和体系结构"><a href="#操作系统的运行机制和体系结构" class="headerlink" title="操作系统的运行机制和体系结构"></a>操作系统的运行机制和体系结构</h1><p><img src="/posts/4194d1de52bf/image-20220318152656657.png"></p><h4 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h4><p>指令和代码的区别：代码——&gt;翻译——&gt;指令</p><p>指令就是处理器（CPU）能够识别，执行的最基本命令</p><h3 id="运行机制"><a href="#运行机制" class="headerlink" title="运行机制"></a>运行机制</h3><h4 id="两种指令"><a href="#两种指令" class="headerlink" title="两种指令"></a>两种指令</h4><ul><li>特权指令：如内存清零指令（不允许用户程序使用）</li><li>非特权指令：如普通的运算指令</li></ul><h4 id="两种处理器状态"><a href="#两种处理器状态" class="headerlink" title="两种处理器状态"></a>两种处理器状态</h4><ul><li>用户态（目态）：此时CPU只能执行非特权指令</li><li>核心态（管态）：特权指令，非特权指令都可以执行</li></ul><p>Ps:用程序状态寄存器（PSW）中的某标志位来标识当前处理器处于什么状态。如0为用户态，1为核心态</p><h4 id="两种程序"><a href="#两种程序" class="headerlink" title="两种程序"></a>两种程序</h4><ul><li>内核程序：操作系统的内核程序是系统的管理者，既可以执行特权指令，也可以执行非特权指令，运行在核心态</li><li>应用程序：为了保证系统能安全运行，普通应用程序只能执行非特权指令，运行在用户态</li></ul><h3 id="操作系统的内核"><a href="#操作系统的内核" class="headerlink" title="操作系统的内核"></a>操作系统的内核</h3><ul><li>内核是计算机上配置的底层软件，是操作系统最基本，最核心的部分。</li><li>实现操作系统内核功能的那些程序就是内核程序。</li></ul><p><img src="/posts/4194d1de52bf/image-20220318155126326-16484908229091.png" alt="image-20220318155126326"></p><p><img src="/posts/4194d1de52bf/image-20220318155148226-16484908312752.png" alt="image-20220318155148226"></p><h3 id="操作系统的体系结构"><a href="#操作系统的体系结构" class="headerlink" title="操作系统的体系结构"></a>操作系统的体系结构</h3><h4 id="大内核"><a href="#大内核" class="headerlink" title="大内核"></a>大内核</h4><ul><li>将操作系统的主要功能模块都作为系统内核，运行在核心态</li><li>优点：高性能</li><li>缺点：内核代码庞大，结构混乱，难以维护</li></ul><h4 id="微内核"><a href="#微内核" class="headerlink" title="微内核"></a>微内核</h4><ul><li>只把最基本的功能保留在内核</li><li>优点：内核功能少，结构清晰，方便维护</li><li>缺点：需要频繁地在核心态和用户态之间切换，性能低</li></ul><p><img src="/posts/4194d1de52bf/image-20220318160402910.png" alt="image-20220318160402910"></p><h1 id="中断和异常"><a href="#中断和异常" class="headerlink" title="中断和异常"></a>中断和异常</h1><p><img src="/posts/4194d1de52bf/image-20220318181900829.png" alt="image-20220318181900829"></p><h4 id="中断机制的诞生"><a href="#中断机制的诞生" class="headerlink" title="中断机制的诞生"></a>中断机制的诞生</h4><ul><li>为了解决早期计算机各个程序只能串行执行，系统利用率低的问题；人们发明了操作系统，引入中断机制，实现了多道程序并发执行</li><li>本质：发生中断就意味着需要操作系统介入，开展管理工作</li></ul><h4 id="中断的概念和作用"><a href="#中断的概念和作用" class="headerlink" title="中断的概念和作用"></a>中断的概念和作用</h4><ol><li>当中断发生时，CPU立即进入核心态</li><li>当中端发生后，当前运行的进程暂停运行，并由操作系统内核对中断进行处理</li><li>对于不同的中断信号，会进行不同的处理</li></ol><ul><li><p>发生了中断，就意味着需要操作系统的介入，开展管理工作。由于操作系统的管理工作（比如进程的切换，分配I&#x2F;O设备等）需要使用特权指令，因此CPU要从用户态转为核心态。中断可以使CPU从用户态切换为核心态，使操作系统获得计算机的控制权。有了中断，才能实现多道程序并发执行。</p></li><li><p>用户态—&gt;核心态 是通过中断实现的，并且中断是唯一途径。</p><p>核心态—&gt;用户态的切换是通过执行一个特权指令，将程序状态字（PSW）的标志位设置为”用户态“</p></li></ul>]]></content>
    
    
    <summary type="html">基于b站王道考研--操作系统视频课程学习时写的随堂笔记，侵权即删。</summary>
    
    
    
    <category term="操作系统" scheme="http://101.43.65.22/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="学习笔记" scheme="http://101.43.65.22/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio_3.4widget组件</title>
    <link href="http://101.43.65.22/posts/d0d9b16eeaae/"/>
    <id>http://101.43.65.22/posts/d0d9b16eeaae/</id>
    <published>2022-03-09T09:13:54.000Z</published>
    <updated>2022-03-31T09:13:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li><p>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</p></li><li><p>本章内容为：widget组件的介绍，使用方法和相关样例代码。</p></li><li><p>部分素材以及drawable中的文件代码没有给出，请读者自己补全或者删除。（可以将有关@drawable的有关代码删除）</p></li><li><p>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></p></li></ul><h1 id="widget组件通用属性"><a href="#widget组件通用属性" class="headerlink" title="widget组件通用属性"></a>widget组件通用属性</h1><table><thead><tr><th>属性名称</th><th>功能描述</th></tr></thead><tbody><tr><td>android:id</td><td>设置控件的索引</td></tr><tr><td>android:layout_height</td><td>设置布局的高度</td></tr><tr><td>android:layout_width</td><td>设置布局的宽度</td></tr><tr><td>android:autoLink</td><td>设置是否当文本为URL链接时，文本显示为可点击的链接</td></tr><tr><td>android:autoText</td><td>设置是否自动执行输入值的拼写纠正</td></tr><tr><td>android:bufferType</td><td>指定getText()方式取得的文本类型</td></tr><tr><td>android:capitalize</td><td>设置英文字母大写类型。需要弹出输入法才能看到</td></tr><tr><td>android:cursorVisible</td><td>设定光标为显示&#x2F;隐藏，默认显示</td></tr></tbody></table><h1 id="TextView"><a href="#TextView" class="headerlink" title="TextView"></a>TextView</h1><h4 id="TextView用于在屏幕中显示静态字符串"><a href="#TextView用于在屏幕中显示静态字符串" class="headerlink" title="TextView用于在屏幕中显示静态字符串"></a>TextView用于在屏幕中显示静态字符串</h4><p><img src="/posts/d0d9b16eeaae/image-20220401111228667.png" alt="image-20220401111228667"></p><h4 id="TextView类的XML属性及描述"><a href="#TextView类的XML属性及描述" class="headerlink" title="TextView类的XML属性及描述"></a>TextView类的XML属性及描述</h4><table><thead><tr><th>XML属性</th><th>功能描述</th></tr></thead><tbody><tr><td>android:layout_alignParentLeft</td><td>指定该组件是否与布局容器左对齐</td></tr><tr><td>android:digits</td><td>设置允许输入哪些字符</td></tr><tr><td>android:drawbaleLeft</td><td>在text的左边输出一个drawable</td></tr><tr><td>android:drawbalePadding</td><td>设置text与drawable的间隔</td></tr><tr><td>android:drawbleRight</td><td>在text的右边输出一个drawable</td></tr><tr><td>android:drawbleTop</td><td>在text的正上方输出一个drawable</td></tr><tr><td>android:ellipsize</td><td>设置当文字过长时如何显示该控件</td></tr><tr><td>android:gravity</td><td>设置文本位置，例如center表示文本将居中表示</td></tr><tr><td>android:hint</td><td>设置文本为空时显示的提示信息</td></tr><tr><td>android:ems</td><td>设置TextView的宽度为N个字符的宽度</td></tr><tr><td>android:maxEms</td><td>设置TextView的宽度为最长为N个字符的宽度</td></tr><tr><td>android:minEms</td><td>设置TextView的宽度为最短为N个字符的宽度</td></tr><tr><td>android:maxLength</td><td>限制显示的最大文本长度，超出部分不显示</td></tr><tr><td>android:lines</td><td>设置文本的行数</td></tr><tr><td>androidmaxLines</td><td>设置文本的最大显示行数</td></tr><tr><td>android:minLines</td><td>设置文本的最小行数</td></tr><tr><td>android:linksClickable</td><td>设置链接是否可以点击</td></tr><tr><td>android:lineSpacingExtra</td><td>设置行间距</td></tr><tr><td>android:singleLine</td><td>设置单行显示</td></tr><tr><td>android:text</td><td>设置显示文本</td></tr><tr><td>android:textAppearance</td><td>设置文本外观</td></tr><tr><td>android:textColor</td><td>设置文本颜色</td></tr><tr><td>android:textColorHighlight</td><td>设置被选中文字的底色，默认是蓝色</td></tr><tr><td>android:textColorHint</td><td>设置提示信息文字的颜色，默认是灰色</td></tr><tr><td>android:textColorLink</td><td>文件链接的颜色</td></tr><tr><td>android:textScaleX</td><td>设置文字的缩放，默认为1.0f</td></tr><tr><td>android:textSize</td><td>设置文字大小</td></tr><tr><td>android:textStyle</td><td>设置字形（粗体，斜体等）</td></tr><tr><td></td><td></td></tr></tbody></table><h4 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p><img src="/posts/d0d9b16eeaae/image-20220401143925701.png" alt="image-20220401143925701"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.text.Html;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TextView mTv;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_text_view);</span><br><span class="line"></span><br><span class="line">        mTv=findViewById(R.id.tv7);</span><br><span class="line"><span class="comment">//        mTv.getPaint().setFakeBoldText(true);</span></span><br><span class="line"><span class="comment">//        mTv.getPaint().setStrikeThruText(true);</span></span><br><span class="line"><span class="comment">//        mTv.getPaint().setUnderlineText(true);</span></span><br><span class="line"><span class="comment">//        mTv.getPaint().setAntiAlias(true);</span></span><br><span class="line">        mTv.setText(Html.fromHtml(<span class="string">&quot;&lt;u&gt;&lt;b&gt;&lt;s&gt;www.baidu.com&lt;/s&gt;&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.TextViewActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;北京冬奥会，舞动青春&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#970C0C&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;italic|bold&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">TextView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;http://www.baidu.com&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:autoLink</span>=<span class="string">&quot;web&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ellipsize</span>=<span class="string">&quot;middle&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;北京东奥会，舞动青春&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:lines</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawableLeft</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawablePadding</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;有图片的文字&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv7&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;北京冬奥会&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;北京冬奥会,舞动青春，绽放热情&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:singleLine</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:ellipsize</span>=<span class="string">&quot;marquee&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:marqueeRepeatLimit</span>=<span class="string">&quot;marquee_forever&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:focusableInTouchMode</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:focusable</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:clickable</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">TextView</span>&gt;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h1><h4 id="button类常用方法"><a href="#button类常用方法" class="headerlink" title="button类常用方法"></a>button类常用方法</h4><table><thead><tr><th>方法</th><th>功能描述</th></tr></thead><tbody><tr><td>onkeyDown()</td><td>当用户按键时，该方法被调用</td></tr><tr><td>onkeyUp()</td><td>当用户按键弹起后，该方法被调用</td></tr><tr><td>onKeyLongPress()</td><td>当用户长按键时，该方法被调用</td></tr><tr><td>onKeyMultiple()</td><td>当用户多次按键时时，该方法被调用</td></tr><tr><td>invalidateDrawable()</td><td>用于刷新Drawable对象</td></tr><tr><td>onPreDraw()</td><td>用于设置视图显示</td></tr><tr><td>setOnClickListener()</td><td>用于设置点击监听器</td></tr></tbody></table><h4 id="测试样例代码-1"><a href="#测试样例代码-1" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p><img src="/posts/d0d9b16eeaae/image-20220401143713245.png" alt="image-20220401143713245"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ButtonActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnClick;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_button);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        mBtnClick=findViewById(R.id.btn_click);</span><br><span class="line">        mBtnClick.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                Toast.makeText(ButtonActivity.<span class="built_in">this</span>,<span class="string">&quot;ButtonActivity&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.ButtonActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_normal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;普通按钮&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#f00&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;实心圆角&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/circleradius&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_normal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_solid&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_hollow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;空心圆角&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/hollow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_solid&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_press&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按压效果&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/pressresult&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_hollow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/textcolor&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_click&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;点击效果&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_press&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="EditText"><a href="#EditText" class="headerlink" title="EditText"></a>EditText</h1><h4 id="EditText编辑框-常用属性"><a href="#EditText编辑框-常用属性" class="headerlink" title="EditText编辑框,常用属性"></a>EditText编辑框,常用属性</h4><ul><li>android:hint 提示信息</li><li>android:inputType 输入类型</li></ul><h4 id="在EditText中，常用的inputType属性值"><a href="#在EditText中，常用的inputType属性值" class="headerlink" title="在EditText中，常用的inputType属性值"></a>在EditText中，常用的inputType属性值</h4><table><thead><tr><th>属性值</th><th>功能描述</th></tr></thead><tbody><tr><td>text</td><td>普通文本，默认</td></tr><tr><td>textCapCharacters</td><td>字母大写</td></tr><tr><td>textCapWords</td><td>每个单词的首字母大写</td></tr><tr><td>textAutoCorrect</td><td>自动完成</td></tr><tr><td>textMultiLine</td><td>多行输入</td></tr><tr><td>textNoSuggestions</td><td>不提示</td></tr><tr><td>textUri</td><td>网址</td></tr><tr><td>textEmailAddress</td><td>电子邮件地址</td></tr><tr><td>textEmailSubject</td><td>邮件主题</td></tr><tr><td>textShortMessage</td><td>短讯</td></tr><tr><td>textLongMessage</td><td>长信息</td></tr><tr><td>textPassword</td><td>密码</td></tr><tr><td>number</td><td>数字</td></tr><tr><td>numberSigned</td><td>带符号数字格式</td></tr><tr><td>numberDecimal</td><td>带小数点的浮点格式</td></tr><tr><td>phone</td><td>拨号键盘</td></tr><tr><td>datetime</td><td>时间日期</td></tr><tr><td>date</td><td>日期键盘</td></tr><tr><td>time</td><td>时间键盘</td></tr></tbody></table><h4 id="测试样例代码-2"><a href="#测试样例代码-2" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p><img src="/posts/d0d9b16eeaae/image-20220401143851911.png" alt="image-20220401143851911"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.text.Editable;</span><br><span class="line"><span class="keyword">import</span> android.text.TextWatcher;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EditTextActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> EditText mEtUser;</span><br><span class="line">    <span class="keyword">private</span> EditText mEtPwd;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_edit_text);</span><br><span class="line"></span><br><span class="line">        mEtUser=findViewById(R.id.et_user);</span><br><span class="line">        mEtUser.addTextChangedListener(<span class="keyword">new</span> <span class="title class_">TextWatcher</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeTextChanged</span><span class="params">(CharSequence charSequence, <span class="type">int</span> i, <span class="type">int</span> i1, <span class="type">int</span> i2)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTextChanged</span><span class="params">(CharSequence charSequence, <span class="type">int</span> i, <span class="type">int</span> i1, <span class="type">int</span> i2)</span> &#123;</span><br><span class="line">                Log.i(<span class="string">&quot;EditTextActivity&quot;</span>, <span class="string">&quot;onTextChanged: &quot;</span>+charSequence);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterTextChanged</span><span class="params">(Editable editable)</span> &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingEnd</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.EditTextActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;用户名: &quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignBaseline</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;请输入号码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:inputType</span>=<span class="string">&quot;phone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bgeditext&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;密   码: &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/et_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignBaseline</span>=<span class="string">&quot;@id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bgeditext&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawablePadding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;请输入密码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="RadioButton"><a href="#RadioButton" class="headerlink" title="RadioButton"></a>RadioButton</h1><h4 id="单选按钮和单选按钮组"><a href="#单选按钮和单选按钮组" class="headerlink" title="单选按钮和单选按钮组"></a>单选按钮和单选按钮组</h4><ul><li><p>RadioButton:单个单选框</p></li><li><p>RadioGroup:容纳多个RadioButton的容器</p></li><li><p>一个RadioGroup中至少有2个RadioButton</p></li><li><p>同一个RadioGroup中，只能有一个RadioButton被选中</p></li><li><p>不同的RadioGroup，相互的RadioButton不影响</p></li></ul><table><thead><tr><th>方法</th><th>功能描述</th></tr></thead><tbody><tr><td>getCheckedRadioButtonId()</td><td>获取被选中的按钮id</td></tr><tr><td>clearCheck()</td><td>清除选中状态</td></tr><tr><td>check(int id)</td><td>通过参数id来设置该选项为选中状态</td></tr><tr><td>setOnCheckedChangeListener(…)</td><td>在一个单选按钮组中，当该单选按钮勾选状态发生改变时所要调用的回调函数</td></tr><tr><td>getText()</td><td>用于获取单选按钮</td></tr></tbody></table><h4 id="测试样例代码-3"><a href="#测试样例代码-3" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p><img src="/posts/d0d9b16eeaae/image-20220401143758949.png" alt="image-20220401143758949"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RadioButtonActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> RadioGroup mRgSex,mRgAge;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnRbOk;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_radio_button);</span><br><span class="line">        mRgAge=findViewById(R.id.rg_age);</span><br><span class="line">        mRgSex=findViewById(R.id.rg_sex);</span><br><span class="line">        mBtnRbOk=findViewById(R.id.btn_rb_ok);</span><br><span class="line">        mRgSex.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> id)</span> &#123;</span><br><span class="line">                RadioButton rb=findViewById(id);</span><br><span class="line">                Toast.makeText(RadioButtonActivity.<span class="built_in">this</span>,rb.getText(),Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        mBtnRbOk.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                String choose=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                RadioButton rb;</span><br><span class="line">                rb=findViewById(mRgSex.getCheckedRadioButtonId());</span><br><span class="line">                choose+=rb.getText();</span><br><span class="line">                rb=findViewById(mRgAge.getCheckedRadioButtonId());</span><br><span class="line">                choose+=<span class="string">&quot;\n&quot;</span>+rb.getText();</span><br><span class="line">                Toast.makeText(RadioButtonActivity.<span class="built_in">this</span>,choose,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.RadioButtonActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_invest&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;问卷调查&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;40sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#00f&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;italic|bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_sex&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;性别: &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/tv_invest&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@id/rg_sex&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_sex&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/tv_sex&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;@id/tv_sex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;男&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;女&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_age&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;年龄: &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;@id/tv_sex&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/tv_sex&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_age&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/tv_age&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;@id/tv_age&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;18--25岁&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:button</span>=<span class="string">&quot;@drawable/rb_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:buttonTint</span>=<span class="string">&quot;#f00&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:button</span>=<span class="string">&quot;@drawable/rb_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:buttonTint</span>=<span class="string">&quot;#f00&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;26--40岁&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:button</span>=<span class="string">&quot;@drawable/rb_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:buttonTint</span>=<span class="string">&quot;#f00&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;41--60岁&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_rb_ok&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;确定&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/pressresult&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/rg_like&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;喜欢此课吗?&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_like&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/rg_age&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_like&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/tv_like&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@id/tv_like&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;是&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/rb_nubutton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/rb_nubutton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;否&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="CheckBox"><a href="#CheckBox" class="headerlink" title="CheckBox"></a>CheckBox</h1><h4 id="checkbox复选框"><a href="#checkbox复选框" class="headerlink" title="checkbox复选框"></a>checkbox复选框</h4><ul><li>在CheckBox复选框组中，允许同时选中多个</li><li>CheckBox复选按钮具有选中和未选中两种状态</li><li>CheckBox默认以矩形表示</li></ul><h4 id="测试样例代码-4"><a href="#测试样例代码-4" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p><img src="/posts/d0d9b16eeaae/image-20220401144017638.png" alt="image-20220401144017638"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.CheckBox;</span><br><span class="line"><span class="keyword">import</span> android.widget.CompoundButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckBoxActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> CheckBox mCb1,mCb2,mCb3,mCb4,mCb5,mCb6;</span><br><span class="line">    <span class="keyword">private</span> Button mBnCbOk;</span><br><span class="line">    <span class="meta">@SuppressLint(&quot;WrongViewCast&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        MyCheckBoxListener myCheckBoxListener=<span class="keyword">new</span> <span class="title class_">MyCheckBoxListener</span>();</span><br><span class="line">        setContentView(R.layout.activity_check_box);</span><br><span class="line">        mCb1=findViewById(R.id.cb1);</span><br><span class="line">        mCb2=findViewById(R.id.cb2);</span><br><span class="line">        mCb3=findViewById(R.id.cb3);</span><br><span class="line">        mCb4=findViewById(R.id.cb4);</span><br><span class="line">        mCb5=findViewById(R.id.cb5);</span><br><span class="line">        mCb6=findViewById(R.id.cb6);</span><br><span class="line">        mBnCbOk=findViewById(R.id.btn_cb_ok);</span><br><span class="line">        mCb1.setOnCheckedChangeListener(myCheckBoxListener);</span><br><span class="line">        mCb2.setOnCheckedChangeListener(myCheckBoxListener);</span><br><span class="line">        mCb3.setOnCheckedChangeListener(myCheckBoxListener);</span><br><span class="line">        mCb4.setOnCheckedChangeListener(myCheckBoxListener);</span><br><span class="line">        mCb5.setOnCheckedChangeListener(myCheckBoxListener);</span><br><span class="line">        mCb6.setOnCheckedChangeListener(myCheckBoxListener);</span><br><span class="line"></span><br><span class="line">        mBnCbOk.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                String chooseCb=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">if</span>(mCb1.isChecked())chooseCb+=<span class="string">&quot;\n&quot;</span>+mCb1.getText();</span><br><span class="line">                <span class="keyword">if</span>(mCb2.isChecked())chooseCb+=<span class="string">&quot;\n&quot;</span>+mCb2.getText();</span><br><span class="line">                <span class="keyword">if</span>(mCb3.isChecked())chooseCb+=<span class="string">&quot;\n&quot;</span>+mCb3.getText();</span><br><span class="line">                <span class="keyword">if</span>(mCb4.isChecked())chooseCb+=<span class="string">&quot;\n&quot;</span>+mCb4.getText();</span><br><span class="line">                <span class="keyword">if</span>(mCb5.isChecked())chooseCb+=<span class="string">&quot;\n&quot;</span>+mCb5.getText();</span><br><span class="line">                <span class="keyword">if</span>(mCb6.isChecked())chooseCb+=<span class="string">&quot;\n&quot;</span>+mCb6.getText();</span><br><span class="line">                Toast.makeText(CheckBoxActivity.<span class="built_in">this</span>,chooseCb,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MyCheckBoxListener</span> <span class="keyword">implements</span> <span class="title class_">CompoundButton</span>.OnCheckedChangeListener&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(CompoundButton compoundButton, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(compoundButton.isChecked())&#123;</span><br><span class="line">                Toast.makeText(CheckBoxActivity.<span class="built_in">this</span>,compoundButton.getText()+<span class="string">&quot;Clicked&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.CheckBoxActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;兴趣爱好: &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;36sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold|italic&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;游泳&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;绘画&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;阅读&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:button</span>=<span class="string">&quot;@drawable/checkbox_bg&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:buttonTint</span>=<span class="string">&quot;#F80606&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;唱歌&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:button</span>=<span class="string">&quot;@drawable/checkbox_bg_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:buttonTint</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb5&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;钢琴&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/rb_nubutton&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/cb6&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;吉他&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/rb_nubutton&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_cb_ok&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/pressresult&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;确定&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ToggleButton"><a href="#ToggleButton" class="headerlink" title="ToggleButton"></a>ToggleButton</h1><h4 id="ToggleButton开关控件"><a href="#ToggleButton开关控件" class="headerlink" title="ToggleButton开关控件"></a>ToggleButton开关控件</h4><table><thead><tr><th>XML属性</th><th>对应方法</th><th>功能描述</th></tr></thead><tbody><tr><td>android:checked</td><td>setChecked(boolean)</td><td>设置按钮是否选中</td></tr><tr><td>android:textOff</td><td>setTextOff(CharSequence)</td><td>设置按钮的状态关闭时所显示的文本</td></tr><tr><td>android:textOn</td><td>setTextOn(CharSequence)</td><td>设置按钮的状态打开时所显示的文本</td></tr></tbody></table><h1 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h1><h4 id="Switch开关控件"><a href="#Switch开关控件" class="headerlink" title="Switch开关控件"></a>Switch开关控件</h4><table><thead><tr><th>XML属性</th><th>对应方法</th><th>功能描述</th></tr></thead><tbody><tr><td>android:checked</td><td>setChecked(boolean)</td><td>设置按钮是否选中</td></tr><tr><td>android:textOff</td><td>setTextOff(CharSequence)</td><td>设置按钮的状态关闭时所显示的文本</td></tr><tr><td>android:textOn</td><td>setTextOn(CharSequence)</td><td>设置按钮的状态打开时所显示的文本</td></tr><tr><td>android:swichMinWidth</td><td>setSwitchMinWidth(int)</td><td>设置开关的最小宽度</td></tr><tr><td>android:textStyle</td><td>setSwitchTypeface(Typeface ,int )</td><td>设置开关的文本风格</td></tr><tr><td>android:typeface</td><td>setSwitchTypeface</td><td>设置开关的文本的字体风格</td></tr><tr><td>android:switchPadding</td><td>setSwitchPadding(int)</td><td>设置开关与标题文本之间的空白</td></tr><tr><td>android:thumb</td><td>setThumbResource(int)</td><td>用自定义的Drawable来绘制开关的开关按钮</td></tr><tr><td>android:track</td><td>setTrackResource(int)</td><td>用自定义的Drawble来绘制开关的开关轨道</td></tr></tbody></table><h1 id="ImageView"><a href="#ImageView" class="headerlink" title="ImageView"></a>ImageView</h1><h4 id="ImgeView图片视图"><a href="#ImgeView图片视图" class="headerlink" title="ImgeView图片视图"></a>ImgeView图片视图</h4><ul><li>imgeview用于显示图像资源</li></ul><table><thead><tr><th>XML属性</th><th>对应方法</th><th>功能描述</th></tr></thead><tbody><tr><td>android:adjustViewBounds</td><td>setAdajustViewBounds(boolean)</td><td>是否保持长宽比</td></tr><tr><td>android:cropToPadding</td><td>setCropToPadding(boolean)</td><td>截取指定区域用是否用空白代替</td></tr><tr><td>android:maxHeight</td><td>setMaxHeight(int)</td><td>设置View的最大高度</td></tr><tr><td>android:maxWidth</td><td>setMaxWidth(int)</td><td>设置View的最大宽度</td></tr><tr><td>android:src</td><td>setImageResource(int)</td><td>设置ImageView显示的Drawable对象</td></tr><tr><td>android:scaleType</td><td>setScaleType(ImageView.ScaleType)</td><td>设置图片如何缩放或者移动以适应ImageView的大小</td></tr></tbody></table><ul><li>scaleType属性取值</li></ul><table><thead><tr><th>XML属性</th><th>效果</th></tr></thead><tbody><tr><td>FIT_XY</td><td>不按比例缩放，拉伸填充整个ImageView</td></tr><tr><td>FIT_CENTER</td><td>按比例缩放让图片最长边和ImageView最长边相等</td></tr><tr><td>FIT_START</td><td>按比例缩放，图片靠上左对齐</td></tr><tr><td>FIT_END</td><td>按比例缩放，图片靠右下对齐</td></tr><tr><td>CENTER</td><td>中心点一致，不缩放</td></tr><tr><td>CENTER_CROP</td><td>拉伸填充，使最小边一致</td></tr><tr><td>CENTER_INSIDE</td><td>图片比ImageView大时缩小，缩小效果跟FIT_CENTER一致，实际上就是确保在里面</td></tr><tr><td>MATRIX</td><td>左上角开始绘制，可以设置各种平移，旋转等策略</td></tr></tbody></table><h4 id="测试样例代码-5"><a href="#测试样例代码-5" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p>该测试样例包含ToggleButton，Switch和imageView的使用方法 </p><p><img src="/posts/d0d9b16eeaae/image-20220401144057800.png" alt="image-20220401144057800"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.graphics.Matrix;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.CompoundButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Switch;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"><span class="keyword">import</span> android.widget.ToggleButton;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToggleSwitchActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TextView mTvTbSw;</span><br><span class="line">    <span class="keyword">private</span> ToggleButton mTb1,mTb2;</span><br><span class="line">    <span class="keyword">private</span> Switch mSw1,mSw2;</span><br><span class="line">    <span class="keyword">private</span> ImageView mIvTbSw;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> count;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_toggle_switch);</span><br><span class="line">        mTb1=findViewById(R.id.tb1);</span><br><span class="line">        mTb2=findViewById(R.id.tb2);</span><br><span class="line">        mSw1=findViewById(R.id.sw1);</span><br><span class="line">        mSw2=findViewById(R.id.sw2);</span><br><span class="line">        mIvTbSw=findViewById(R.id.iv_tbsw);</span><br><span class="line">        mTvTbSw=findViewById(R.id.tv_tbsw);</span><br><span class="line"></span><br><span class="line">        MyTbSwCheckedChangeListener myTbSwCheckedChangeListener=<span class="keyword">new</span> <span class="title class_">MyTbSwCheckedChangeListener</span>();</span><br><span class="line">        mTb1.setOnCheckedChangeListener(myTbSwCheckedChangeListener);</span><br><span class="line">        mTb2.setOnCheckedChangeListener(myTbSwCheckedChangeListener);</span><br><span class="line"></span><br><span class="line">        mSw1.setOnCheckedChangeListener(myTbSwCheckedChangeListener);</span><br><span class="line">        mSw2.setOnCheckedChangeListener(myTbSwCheckedChangeListener);</span><br><span class="line"></span><br><span class="line">        mIvTbSw.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">switch</span> (count%<span class="number">8</span>)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        str=<span class="string">&quot;FIT_CENTER&quot;</span>;</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.FIT_CENTER);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.FIT_START);</span><br><span class="line">                        str=<span class="string">&quot;FIT_START&quot;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.FIT_END);</span><br><span class="line">                        str=<span class="string">&quot;FIT_END&quot;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.FIT_XY);</span><br><span class="line">                        str=<span class="string">&quot;FIT_XY&quot;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.CENTER);</span><br><span class="line">                        str=<span class="string">&quot;CENTER&quot;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.CENTER_CROP);</span><br><span class="line">                        str=<span class="string">&quot;CENTER_CROP&quot;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.CENTER_INSIDE);</span><br><span class="line">                        str=<span class="string">&quot;CENTER_INSIDE&quot;</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                        mIvTbSw.setScaleType(ImageView.ScaleType.MATRIX);</span><br><span class="line">                        str=<span class="string">&quot;MATRIX&quot;</span>;</span><br><span class="line">                        Matrix matrix=<span class="keyword">new</span> <span class="title class_">Matrix</span>();</span><br><span class="line">                        matrix.setTranslate(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">                        matrix.postRotate(<span class="number">30</span>);</span><br><span class="line">                        mIvTbSw.setImageMatrix(matrix);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                mTvTbSw.setText(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MyTbSwCheckedChangeListener</span> <span class="keyword">implements</span> <span class="title class_">CompoundButton</span>.OnCheckedChangeListener&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(CompoundButton compoundButton, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(compoundButton==mSw2)&#123;</span><br><span class="line">                mIvTbSw.setImageResource(R.mipmap.checkbox_round_1);</span><br><span class="line"><span class="comment">//                mIvTbSw.setImageDrawable(getDrawable(R.mipmap.delect));</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compoundButton==mTb2)&#123;</span><br><span class="line">                mIvTbSw.setImageResource(R.drawable.school);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(compoundButton==mSw1)&#123;</span><br><span class="line">                mIvTbSw.setImageResource(R.drawable.longlongt);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(compoundButton.isChecked())&#123;</span><br><span class="line">                Toast.makeText(ToggleSwitchActivity.<span class="built_in">this</span>,<span class="string">&quot;打开&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.ToggleSwitchActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ToggleButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tb1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;power&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ToggleButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tb2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textOff</span>=<span class="string">&quot;关&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textOn</span>=<span class="string">&quot;开&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/tb1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sw1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/tb1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:switchMinWidth</span>=<span class="string">&quot;100dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sw2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">&quot;@id/sw1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignTop</span>=<span class="string">&quot;@id/tb2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:switchMinWidth</span>=<span class="string">&quot;150dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:thumb</span>=<span class="string">&quot;@drawable/thumb&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:track</span>=<span class="string">&quot;@drawable/track&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_tbsw&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/tb2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#C9E91E63&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_tbsw&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/iv_tbsw&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a>Dialog</h1><h4 id="Dialog对话框"><a href="#Dialog对话框" class="headerlink" title="Dialog对话框"></a>Dialog对话框</h4><p>Android提供了丰富的对话框支持，其中常用的对话框有4种：</p><ul><li>AlertDialog提示对话框</li><li>ProgressDialog进度条对话框</li><li>DatePickerDialog日期对话框</li><li>TimePickerDialog时间对话框</li></ul><h4 id="层次关系图"><a href="#层次关系图" class="headerlink" title="层次关系图"></a>层次关系图</h4><p><img src="/posts/d0d9b16eeaae/image-20220401174105146.png" alt="image-20220401174105146"></p><h4 id="AlertDialog提示对话框"><a href="#AlertDialog提示对话框" class="headerlink" title="AlertDialog提示对话框"></a>AlertDialog提示对话框</h4><ul><li>AlertDialog继承自Dialog类</li><li>使用Builder内部类进行创建</li><li>可以包含一个标题、一个内容消息或者一个选择列表以及0至3个按钮</li></ul><table><thead><tr><th><strong>方法</strong></th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>void  create()</td><td>根据设置的属性，创建一个AlterDialog</td></tr><tr><td>void  show()</td><td>根据设置的属性，显示已创建的AlterDialog</td></tr><tr><td>AlterDialog.Builder  setTitle()</td><td>设置标题</td></tr><tr><td>AlterDialog.Builder  setIcon()</td><td>设置标题的图标</td></tr><tr><td>AlterDialog.Builder  setMessage()</td><td>设置标题的内容</td></tr><tr><td>AlterDialog.Builder  setCancelable()</td><td>设置是否模态</td></tr><tr><td>AlterDialog  setPositiveButton()</td><td>为对话框添加Yes按钮</td></tr><tr><td>AlterDialog  setNegativeButton</td><td>为对话框添加No按钮</td></tr></tbody></table><h4 id="ProgressDialog进度对话框"><a href="#ProgressDialog进度对话框" class="headerlink" title="ProgressDialog进度对话框"></a>ProgressDialog进度对话框</h4><ul><li><p>ProgressDialog有两种显示方式：</p><ul><li>滚动的环状图标</li><li>带刻度的进度条</li></ul></li><li><p>通过ProgressDialog.setProgressStyle()方法进行设置：</p><ul><li>STYLE_HORIZONTAL——刻度滚动</li><li>STYLE_SPINNER——图标滚动，默认选项</li></ul></li></ul><h4 id="测试样例代码-6"><a href="#测试样例代码-6" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><p><img src="/posts/d0d9b16eeaae/image-20220401175828047.png" alt="image-20220401175828047"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.ProgressDialog;</span><br><span class="line"><span class="keyword">import</span> android.content.DialogInterface;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DialogActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnNormal, mBtnList, mBtnSingle, mBtnMulti, mBtnEdit, mBtnCustom;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnCircle,mBtnhori;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_dialog);</span><br><span class="line">        mBtnNormal = findViewById(R.id.btn_normal);</span><br><span class="line">        mBtnList = findViewById(R.id.btn_list);</span><br><span class="line">        mBtnSingle = findViewById(R.id.btn_single);</span><br><span class="line">        mBtnMulti = findViewById(R.id.btn_multi);</span><br><span class="line">        mBtnEdit = findViewById(R.id.btn_edit);</span><br><span class="line">        mBtnCustom = findViewById(R.id.btn_custom);</span><br><span class="line">        mBtnCircle =findViewById(R.id.btn_circle_progress);</span><br><span class="line">        mBtnhori=findViewById(R.id.btn_hori_progress);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">MyDialogClickListener</span> <span class="variable">myDialogClickListener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyDialogClickListener</span>();</span><br><span class="line">        mBtnCustom.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnNormal.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnSingle.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnEdit.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnMulti.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnList.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnhori.setOnClickListener(myDialogClickListener);</span><br><span class="line">        mBtnCircle.setOnClickListener(myDialogClickListener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MyDialogClickListener</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> (view.getId()) &#123;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_normal:</span><br><span class="line">                    normalDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_list:</span><br><span class="line">                    listDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_single:</span><br><span class="line">                    singleDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_multi:</span><br><span class="line">                    multiDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_edit:</span><br><span class="line">                    editDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_custom:</span><br><span class="line">                    customDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_hori_progress:</span><br><span class="line">                    horiProgressDialog();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> R.id.btn_circle_progress:</span><br><span class="line">                    circleProgressDialog();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">circleProgressDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        ProgressDialog circleD=<span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">        circleD.setIcon(R.mipmap.icon_dialog);</span><br><span class="line">        circleD.setTitle(<span class="string">&quot;环状滚动条&quot;</span>);</span><br><span class="line">        circleD.setMessage(<span class="string">&quot;努力加载中.......&quot;</span>);</span><br><span class="line">        circleD.setProgressStyle(ProgressDialog.STYLE_SPINNER);<span class="comment">//不写这个，也是默认环形滚动条</span></span><br><span class="line">        circleD.show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">horiProgressDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        ProgressDialog horiProgress=<span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(<span class="built_in">this</span>);</span><br><span class="line">        horiProgress.setIcon(R.mipmap.icon_dialog);</span><br><span class="line">        horiProgress.setTitle(<span class="string">&quot;水平滚动条&quot;</span>);</span><br><span class="line">        horiProgress.setMessage(<span class="string">&quot;努力加载中......&quot;</span>);</span><br><span class="line">        horiProgress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);</span><br><span class="line">        horiProgress.setProgress(<span class="number">0</span>);<span class="comment">//初始进度值</span></span><br><span class="line">        horiProgress.setMax(<span class="number">100</span>);<span class="comment">//最大进度值</span></span><br><span class="line">        horiProgress.setSecondaryProgress(<span class="number">3</span>);<span class="comment">//二级进度条</span></span><br><span class="line">        horiProgress.setButton(DialogInterface.BUTTON_POSITIVE, <span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                Toast.makeText(DialogActivity.<span class="built_in">this</span>,<span class="string">&quot;点击确定&quot;</span>,Toast.LENGTH_LONG);</span><br><span class="line">                dialogInterface.cancel();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        horiProgress.show();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">while</span>(horiProgress.getProgress()&lt;horiProgress.getMax())&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                        horiProgress.incrementProgressBy(<span class="number">1</span>);<span class="comment">//每100毫秒增加1</span></span><br><span class="line">                        horiProgress.incrementSecondaryProgressBy(<span class="number">2</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">customDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        View view= LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.layout_custom,<span class="literal">null</span>,<span class="literal">false</span>);</span><br><span class="line">        AlertDialog.Builder customD=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        EditText etUser=view.findViewById(R.id.et_user);</span><br><span class="line">        Button mBtnCustomOk=view.findViewById(R.id.btn_custom_ok);</span><br><span class="line">        customD.setView(view).show();</span><br><span class="line">        mBtnCustomOk.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                Toast.makeText(DialogActivity.<span class="built_in">this</span>,etUser.getText(),Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">editDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        AlertDialog.Builder editD=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        EditText editText=<span class="keyword">new</span> <span class="title class_">EditText</span>(<span class="built_in">this</span>);</span><br><span class="line">        editD.setIcon(R.mipmap.icon_dialog)</span><br><span class="line">                .setTitle(<span class="string">&quot;输入对话框&quot;</span>)</span><br><span class="line">                .setView(editText)</span><br><span class="line">                .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        Toast.makeText(DialogActivity.<span class="built_in">this</span>,<span class="string">&quot;内容: &quot;</span>+editText.getText(),Toast.LENGTH_LONG).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ArrayList&lt;Integer&gt; choices =<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">multiDialog</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        String[] items=&#123;<span class="string">&quot;绘画&quot;</span>,<span class="string">&quot;唱歌&quot;</span>,<span class="string">&quot;足球&quot;</span>,<span class="string">&quot;吉他&quot;</span>&#125;;</span><br><span class="line">        <span class="type">boolean</span>[] checkedItems=&#123;<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">true</span>&#125;;</span><br><span class="line">        choices.clear();</span><br><span class="line">        choices.add(<span class="number">0</span>);</span><br><span class="line">        choices.add(<span class="number">3</span>);</span><br><span class="line">        AlertDialog.Builder multiD=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        multiD.setIcon(R.mipmap.icon_dialog)</span><br><span class="line">                .setTitle(<span class="string">&quot;多选对话框&quot;</span>)</span><br><span class="line">                .setMultiChoiceItems(items, checkedItems, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnMultiChoiceClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span>(b)&#123;</span><br><span class="line">                            choices.add(i);</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            choices.remove(Integer.valueOf(i));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                StringBuilder str=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; choices.size(); j++) &#123;</span><br><span class="line">                    str.append(items[choices.get(j)]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                Toast.makeText(DialogActivity.<span class="built_in">this</span>,<span class="string">&quot;兴趣爱好：&quot;</span>+str,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">singleDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        String[] items =&#123;<span class="string">&quot;优秀&quot;</span>,<span class="string">&quot;良好&quot;</span>,<span class="string">&quot;合格&quot;</span>,<span class="string">&quot;不合格&quot;</span>&#125;;</span><br><span class="line">        AlertDialog.Builder singleD=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span>[] choice = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1</span>];</span><br><span class="line">        singleD.setIcon(R.mipmap.icon_dialog)</span><br><span class="line">                .setTitle(<span class="string">&quot;单选对话框&quot;</span>)</span><br><span class="line">                .setSingleChoiceItems(items, <span class="number">0</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        choice[<span class="number">0</span>] =i;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                Toast.makeText(DialogActivity.<span class="built_in">this</span>,<span class="string">&quot;单选结果： &quot;</span>+items[choice[<span class="number">0</span>]],Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).show();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">listDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        String[] items=&#123;<span class="string">&quot;梅花&quot;</span>,<span class="string">&quot;杏花&quot;</span>,<span class="string">&quot;桃花&quot;</span>,<span class="string">&quot;荷花&quot;</span>,<span class="string">&quot;蔷薇&quot;</span>,<span class="string">&quot;烟花&quot;</span>&#125;;</span><br><span class="line">        AlertDialog.Builder listD=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        listD.setIcon(R.mipmap.icon_dialog2)</span><br><span class="line">                .setTitle(<span class="string">&quot;列表对话框&quot;</span>)</span><br><span class="line">                .setItems(items, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        Toast.makeText(DialogActivity.<span class="built_in">this</span>,<span class="string">&quot;花: &quot;</span>+items[i],Toast.LENGTH_LONG).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).show();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">normalDialog</span><span class="params">()</span> &#123;</span><br><span class="line">        AlertDialog.<span class="type">Builder</span> <span class="variable">normalD</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">        normalD.setIcon(R.mipmap.icon_dialog)</span><br><span class="line">                .setTitle(<span class="string">&quot;普通对话框&quot;</span>)</span><br><span class="line">                .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                        Toast.makeText(DialogActivity.<span class="built_in">this</span>, <span class="string">&quot;Ok&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                Toast.makeText(DialogActivity.<span class="built_in">this</span>, <span class="string">&quot;OK&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).setNeutralButton(<span class="string">&quot;再看看&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                Toast.makeText(DialogActivity.<span class="built_in">this</span>, <span class="string">&quot;OK&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.DialogActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_normal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;普通对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_list&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;列表对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_normal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_single&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;单选对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_list&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_multi&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;多选对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_single&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;输入对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_multi&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_custom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;自定义对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;环状滚动条&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_circle_progress&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_custom&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;300dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;水平滚动条&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_hori_progress&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn_circle_progress&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingEnd</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.EditTextActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;用户名: &quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignBaseline</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;请输入号码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:inputType</span>=<span class="string">&quot;phone&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bgeditext&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">&quot;@id/tv_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;密   码: &quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/et_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/et_user&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignBaseline</span>=<span class="string">&quot;@id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/bgeditext&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawablePadding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:hint</span>=<span class="string">&quot;请输入密码&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/tv_pwd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_custom_ok&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;确定&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/pressresult&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">本章内容为：widget组件的介绍，使用方法和相关样例代码。</summary>
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI编程基础" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio_3.3事件处理</title>
    <link href="http://101.43.65.22/posts/a69d6c48b245/"/>
    <id>http://101.43.65.22/posts/a69d6c48b245/</id>
    <published>2022-03-08T09:13:54.000Z</published>
    <updated>2022-03-31T09:13:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基于监听的事件处理"><a href="#基于监听的事件处理" class="headerlink" title="基于监听的事件处理"></a>基于监听的事件处理</h1><h3 id="Android系统中引用了三个事件模型："><a href="#Android系统中引用了三个事件模型：" class="headerlink" title="Android系统中引用了三个事件模型："></a>Android系统中引用了三个事件模型：</h3><ul><li>事件 ——改变事件源的状态的对象： 点击，触摸.键盘按键事件</li><li>事件源——–触发事件的对象：按钮，组件</li><li>事件监听器——– 处理事件</li></ul><h3 id="Android中的事件监听器"><a href="#Android中的事件监听器" class="headerlink" title="Android中的事件监听器"></a>Android中的事件监听器</h3><table><thead><tr><th>事件监听器</th><th>事件</th><th>功能描述</th></tr></thead><tbody><tr><td>OnClickListener</td><td>单击事件</td><td>当用户点击某个组件或者方向键触发该事件</td></tr><tr><td>OnFoucusChangeListener</td><td>焦点事件</td><td>当组件获得或者失去焦点时触发该事件</td></tr><tr><td>OnKeyListener</td><td>按键事件</td><td>当用户按下或者释放设备上的某个按键触发的事件</td></tr><tr><td>OnTouchListener</td><td>触摸事件</td><td>当触碰屏幕时触发该事件</td></tr><tr><td>OnCreateContextMenuListener</td><td>创建上下文菜单事件</td><td>当创建上下文菜单时触发该事件</td></tr><tr><td>OnCheckedChangeListener</td><td>选项改变事件</td><td>当选择改变时触发该事件</td></tr></tbody></table><h3 id="在程序中实现事件监听器，通常有以下五种形式："><a href="#在程序中实现事件监听器，通常有以下五种形式：" class="headerlink" title="在程序中实现事件监听器，通常有以下五种形式："></a>在程序中实现事件监听器，通常有以下五种形式：</h3><ul><li>Activity本身作为事件监听器:通过Activity实现监听器接口，并实现事件处理方法</li><li>匿名内部类形式：使用匿名内部类创建事件监听器对象</li><li>内部类形式：将事件监听类定义为当前类的内部类</li><li>外部类形式：将事件监听类定义为普通外部类</li><li>绑定标签：在布局文件中为指定标签绑定事件处理方法</li></ul><h3 id="实现基于监听的事件处理步骤："><a href="#实现基于监听的事件处理步骤：" class="headerlink" title="实现基于监听的事件处理步骤："></a>实现基于监听的事件处理步骤：</h3><ol><li>实现事件监听器类，在事件处理方法中编写事件处理代码</li><li>获取事件源（组件）</li><li>在相应的组件上注册监听器</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.testapplication2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestActivity02</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line">    <span class="keyword">private</span> Button btnOne;</span><br><span class="line">    <span class="keyword">private</span> Button btnTwo;</span><br><span class="line">    <span class="keyword">private</span> Button btnThree;</span><br><span class="line">    <span class="keyword">private</span> Button btnFour;</span><br><span class="line">    <span class="keyword">private</span> Button btnFive;</span><br><span class="line">    <span class="keyword">private</span> TextView tvOne;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_test02);</span><br><span class="line">        btnOne=findViewById(R.id.btn_one);</span><br><span class="line">        btnTwo=findViewById(R.id.btn_two);</span><br><span class="line">        btnThree=findViewById(R.id.btn_three);</span><br><span class="line">        btnFour=findViewById(R.id.btn_four);</span><br><span class="line">        btnFive=findViewById(R.id.btn_five);</span><br><span class="line">        tvOne=findViewById(R.id.tv_one);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Activity继承OnClickListener接口,本身作为监听器</span></span><br><span class="line">        btnOne.setOnClickListener(TestActivity02.<span class="built_in">this</span>);</span><br><span class="line">        <span class="comment">//匿名内部类监听器</span></span><br><span class="line">        btnTwo.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                tvOne.setText(<span class="string">&quot;匿名内部类作为监听器&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//内部类实现监听器</span></span><br><span class="line">        btnThree.setOnClickListener(<span class="keyword">new</span> <span class="title class_">InnerListener</span>());</span><br><span class="line">        <span class="comment">//外部类监听器</span></span><br><span class="line">        btnFour.setOnClickListener(<span class="keyword">new</span> <span class="title class_">OuterListener</span>(tvOne));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        tvOne.setText(<span class="string">&quot;Activity本身作为监听器&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//绑定标签</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showText</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        tvOne.setText(<span class="string">&quot;绑定标签形式&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">InnerListener</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">            tvOne.setText(<span class="string">&quot;普通内部类作为监听器&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>监听外部类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyOuterClickListener</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnClickListener &#123;</span><br><span class="line">    <span class="keyword">private</span> MainActivity mainActivity;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyOuterClickListener</span><span class="params">(MainActivity activity)</span>&#123;</span><br><span class="line">        mainActivity=activity;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">        Toast.makeText(mainActivity,<span class="string">&quot;Outer Click&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>绑定标签</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_event&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:onClick</span>=<span class="string">&quot;showToast&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;Event Click&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h1 id="基于回调机制的事件处理"><a href="#基于回调机制的事件处理" class="headerlink" title="基于回调机制的事件处理"></a>基于回调机制的事件处理</h1><p>在回调机制的事件处理中，事件源和事件监听器是同一个对象，是统一的</p><h3 id="Android为View中提供了事件处理的回调方法："><a href="#Android为View中提供了事件处理的回调方法：" class="headerlink" title="Android为View中提供了事件处理的回调方法："></a>Android为View中提供了事件处理的回调方法：</h3><ul><li>onKeyDown()  用于捕捉手机键盘被按下的事件</li><li>onKeyUp()   用于捕捉手机键盘被抬起的事件</li><li>onTouchEvent()  用于处理手机屏幕的触摸事件</li><li>onFocusChanged()  焦点改变的回调方法</li></ul><h3 id="OnKeyDown-方法"><a href="#OnKeyDown-方法" class="headerlink" title="OnKeyDown()方法"></a>OnKeyDown()方法</h3><ul><li>用来捕捉手机键盘被按下的事件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onKeyDown</span> <span class="params">(<span class="type">int</span> keyCode, KeyEvent event)</span></span><br></pre></td></tr></table></figure><ul><li>参数keyCode表示被按下的键值</li><li>参数event用于封装按键事件的对象</li></ul><table><thead><tr><th><strong>常量名</strong></th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>KEYCODE_POWER</td><td>电源键</td></tr><tr><td>KEYCODE_NOTIFICATION</td><td>通知键</td></tr><tr><td>KEYCODE_MUTE</td><td>话筒静音键</td></tr><tr><td>KEYCODE_VOLUME_MUTE</td><td>扬声器静音键</td></tr><tr><td>KEYCODE_VOLUME_UP</td><td>音量增加键</td></tr><tr><td>KEYCODE_VOLUME_DOWN</td><td>音量减小键</td></tr><tr><td>KEYCODE_CALL</td><td>拨号键</td></tr><tr><td>KEYCODE_ENDCALL</td><td>挂机键</td></tr></tbody></table><h3 id="onKeyUp-方法"><a href="#onKeyUp-方法" class="headerlink" title="onKeyUp()方法"></a>onKeyUp()方法</h3><ul><li>用来捕捉手机键盘按键抬起的事件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onKeyUp</span> <span class="params">(<span class="type">int</span> keyCode, KeyEvent event)</span></span><br></pre></td></tr></table></figure><ul><li>参数keyCode表示触发事件的按键码</li><li>参数event是一个事件封装类的对象</li><li>返回值为boolean类型</li></ul><h3 id="onTouchEvent-方法"><a href="#onTouchEvent-方法" class="headerlink" title="onTouchEvent()方法"></a>onTouchEvent()方法</h3><ul><li>用来处理手机屏幕的触摸事件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span> <span class="params">(MotionEvent event)</span></span><br></pre></td></tr></table></figure><ul><li>参数event是手机屏幕触摸事件封装类的对象，用于封装件的相关信息</li><li>返回值为boolean类型</li></ul><h3 id="onFocusChanged-方法"><a href="#onFocusChanged-方法" class="headerlink" title="onFocusChanged()方法"></a>onFocusChanged()方法</h3><ul><li>焦点改变的回调方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onFocusChanged</span> <span class="params">(</span></span><br><span class="line"><span class="params">Boolean gainFocus, <span class="type">int</span> direction, Rect previouslyFocusedRect)</span></span><br></pre></td></tr></table></figure><ul><li><p>每按下一次按键，会调用两次onFocusChanged()方法，一次是某个按钮失去焦点时调用，第二次是另一个按钮获得焦点时调用</p></li><li><p>常见的焦点相关方法</p><table><thead><tr><th><strong>方法</strong></th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>setFocusable()</td><td>用于设置View是否可以拥有焦点</td></tr><tr><td>isFocusable()</td><td>用于判断View是否可以拥有焦点</td></tr><tr><td>setNextFocusDownId()</td><td>用于设置View的焦点向下移动后获得焦点View的ID</td></tr><tr><td>hasFocus()</td><td>用于判断View的父控件是否获得了焦点</td></tr><tr><td>requestFocus()</td><td>用于尝试让此View获得焦点</td></tr><tr><td>isFocusableTouchMode()</td><td>用于设置View是否可以在触摸模式下获得焦点，默认情况下不可用</td></tr></tbody></table></li></ul><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.AppCompatButton;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyButton</span> <span class="keyword">extends</span> <span class="title class_">AppCompatButton</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyButton</span><span class="params">(<span class="meta">@NonNull</span> Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onTouchEvent</span><span class="params">(MotionEvent event)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onTouchEvent(event);</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction())&#123;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                Log.i(<span class="string">&quot;MyButton&quot;</span>, <span class="string">&quot;onTouchEvent: &quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ps：返回值为boolean值，为true则表示处理完，为false则activity会继续调用回调方法。优先级：监听器–&gt;组件的回调方法—&gt;组件所在的activity的回调方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.graphics.Rect;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEditText</span> <span class="keyword">extends</span> <span class="title class_">androidx</span>.appcompat.widget.AppCompatEditText &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyEditText</span><span class="params">(<span class="meta">@NonNull</span> Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onKeyDown</span><span class="params">(<span class="type">int</span> keyCode, KeyEvent event)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onKeyDown(keyCode, event);</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction())&#123;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.ACTION_DOWN:</span><br><span class="line">                Log.i(<span class="string">&quot;MyEditText&quot;</span>, <span class="string">&quot;onKeyDown: &quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onKeyUp</span><span class="params">(<span class="type">int</span> keyCode, KeyEvent event)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onKeyUp(keyCode, event);</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction())&#123;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.ACTION_UP:</span><br><span class="line">                Log.i(<span class="string">&quot;MyEditText&quot;</span>, <span class="string">&quot;onKeyUp: &quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onFocusChanged</span><span class="params">(<span class="type">boolean</span> focused, <span class="type">int</span> direction, Rect previouslyFocusedRect)</span> &#123;</span><br><span class="line"></span><br><span class="line">        Log.i(<span class="string">&quot;MyEditText&quot;</span>, <span class="string">&quot;onFocusChanged: &quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>.onFocusChanged(focused, direction, previouslyFocusedRect);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;基于监听的事件处理&quot;&gt;&lt;a href=&quot;#基于监听的事件处理&quot; class=&quot;headerlink&quot; title=&quot;基于监听的事件处理&quot;&gt;&lt;/a&gt;基于监听的事件处理&lt;/h1&gt;&lt;h3 id=&quot;Android系统中引用了三个事件模型：&quot;&gt;&lt;a href=&quot;#Andro</summary>
      
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI编程基础" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>AndroidStudio_3.2其他布局</title>
    <link href="http://101.43.65.22/posts/c18eb9ca10b4/"/>
    <id>http://101.43.65.22/posts/c18eb9ca10b4/</id>
    <published>2022-03-07T09:13:54.000Z</published>
    <updated>2022-03-31T09:13:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="表格布局"><a href="#表格布局" class="headerlink" title="表格布局"></a>表格布局</h1><p>TableLayout类似表格形式，以行和列的方式来布局子组件</p><p>在TableLayout中，可以通过以下3种方式对单元格进行设置：</p><ul><li>Shrinkeale</li><li>Stretchable</li><li>Collapsed</li></ul><table><thead><tr><th align="left">XML属性</th><th>java代码对应的方法</th><th>功能描述</th></tr></thead><tbody><tr><td align="left">android：shrinkColumns</td><td>setShrinkAllColumns(boolean)</td><td>设置可收缩的列</td></tr><tr><td align="left">android：stretchColumns</td><td>setStretchAllColumns(boolean)</td><td>设置可伸展的列</td></tr><tr><td align="left">android:collapseColumns</td><td>setColumnCollapsed(int,boolean)</td><td>设置可隐藏的列</td></tr></tbody></table><p>使用TableRow.LayoutParams对TableRow的子元素进行修饰</p><table><thead><tr><th>XML属性</th><th>功能描述</th></tr></thead><tbody><tr><td>android:layout_column</td><td>指定该单元格在第几列显示</td></tr><tr><td>android:layout_span</td><td>指定该单元格占据的列数（未指定时默认为1）</td></tr><tr><td>TableRow标签&#x2F;子元素</td><td>表示一行</td></tr></tbody></table><h1 id="网格布局"><a href="#网格布局" class="headerlink" title="网格布局"></a>网格布局</h1><p>GridLayout比TableLayout灵活好用</p><table><thead><tr><th>XML属性</th><th>功能描述</th></tr></thead><tbody><tr><td>android:orientation</td><td>组件的排列方式</td></tr><tr><td>android:colunmCount</td><td>设置网格布局列数</td></tr><tr><td>android:rowCount</td><td>设置网格布局的行数</td></tr><tr><td>android:layout_rowSpan</td><td>组件跨行数</td></tr><tr><td>android:layout_columnSpan</td><td>组件跨列数</td></tr></tbody></table><h1 id="相对布局"><a href="#相对布局" class="headerlink" title="相对布局"></a>相对布局</h1><p>RelativeLayout:</p><ul><li>子组件的位置相对于父容器</li></ul><p><img src="/posts/c18eb9ca10b4/image-20220308173314897.png" alt="image-20220308173314897"></p><table><thead><tr><th>XML属性</th><th align="left">功能描述</th></tr></thead><tbody><tr><td>android:layout_alignParentTop</td><td align="left">控制该组件与父容器是否顶部对齐</td></tr><tr><td>android:layout_alinParantLeft</td><td align="left">控制该组件与父容器是否左对齐</td></tr><tr><td>android:layout_centerHorizontal</td><td align="left">控制该组件位于父容器的水平居中</td></tr><tr><td>android:layout_centerVertical</td><td align="left">控制该组件位于父容器的垂直居中</td></tr><tr><td>android:layout_centerInParent</td><td align="left">控制该组件位于父容器的中间位置</td></tr><tr><td>android:layout_alinParantEnd</td><td align="left">控制该组件与父容器是否右对齐</td></tr></tbody></table><ul><li>子组件位置相对于兄弟组件</li></ul><p><img src="/posts/c18eb9ca10b4/image-20220308175654891.png" alt="image-20220308175654891"></p><p>ps：View2和View3是兄弟组件（在同一层）</p><table><thead><tr><th>XML属性</th><th>功能描述</th></tr></thead><tbody><tr><td>android:layout_toLeftOf</td><td>控制该组件位于指定id组件的左侧</td></tr><tr><td>android:layout_toRightOf</td><td>控制该组件位于指定id组件的右侧</td></tr><tr><td>android:layout_above</td><td>控制该组件位于指定id组件的上方</td></tr><tr><td>android:layout_below</td><td>控制该组件位于指定id组件的下方</td></tr><tr><td>android:layout_alignLeft</td><td>控制该组件与指定id组件的左边界对齐</td></tr><tr><td>android:layout_alignTop</td><td>控制该组件与指定id组件的顶边界对齐</td></tr><tr><td>android:layout_alignRight</td><td>控制该组件与指定id组件的右边界对齐</td></tr></tbody></table><h1 id="约束布局"><a href="#约束布局" class="headerlink" title="约束布局"></a>约束布局</h1><p>采用方向约束定位，保证水平和垂直方向都至少有一个约束</p><p><img src="/posts/c18eb9ca10b4/image-20220308193859847-16487205906461.png" alt="image-20220308193859847"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;表格布局&quot;&gt;&lt;a href=&quot;#表格布局&quot; class=&quot;headerlink&quot; title=&quot;表格布局&quot;&gt;&lt;/a&gt;表格布局&lt;/h1&gt;&lt;p&gt;TableLayout类似表格形式，以行和列的方式来布局子组件&lt;/p&gt;
&lt;p&gt;在TableLayout中，可以通过以下3种方</summary>
      
    
    
    
    <category term="AndroidStudio学习笔记" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI编程基础" scheme="http://101.43.65.22/categories/AndroidStudio%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="AndroidStudio" scheme="http://101.43.65.22/tags/AndroidStudio/"/>
    
  </entry>
  
  <entry>
    <title>找质数的优化算法</title>
    <link href="http://101.43.65.22/posts/91e3f64e2d8e/"/>
    <id>http://101.43.65.22/posts/91e3f64e2d8e/</id>
    <published>2022-01-12T09:13:54.000Z</published>
    <updated>2022-03-31T09:13:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="找质数的优化算法"><a href="#找质数的优化算法" class="headerlink" title="找质数的优化算法"></a>找质数的优化算法</h2><h3 id="优化一"><a href="#优化一" class="headerlink" title="优化一"></a>优化一</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>2是唯一的偶数质数，先将2输出</p><p>其余的质数都是奇数，所有被除数从3开始算，每次加2，遍历所有范围内的奇数</p><p>除数从3开始遍历，遍历到被除数的平方（一个数因数都是一个大于等于该数平方，一个小于等于该数平方，成对出现）</p><h4 id="例题与代码"><a href="#例题与代码" class="headerlink" title="例题与代码"></a>例题与代码</h4><h4 id="题目一"><a href="#题目一" class="headerlink" title="题目一"></a>题目一</h4><p><img src="/posts/91e3f64e2d8e/image-20220113165624682-16420641855811.png" alt="image-20220113165624682"> </p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> N ;</span><br><span class="line">    cin &gt;&gt; N;</span><br><span class="line">    <span class="keyword">if</span>(N&gt;=<span class="number">2</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;2\n&quot;</span>);<span class="comment">// 2 是质数</span></span><br><span class="line">    &#125;    </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt; N; i += <span class="number">2</span>) &#123;<span class="comment">//质数除了2之外，其他都是奇数</span></span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;<span class="comment">//质数标记 一开始为true，有一个数能被整除则改成false</span></span><br><span class="line"><span class="type">int</span> stop = <span class="built_in">sqrt</span>(i);<span class="comment">//因数是成对出现的，只有平方自己和平方前的数就可以了</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">3</span>; j &lt;=stop; j += <span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (i % j == <span class="number">0</span>) &#123; </span><br><span class="line">flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (flag) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="题目二"><a href="#题目二" class="headerlink" title="题目二"></a>题目二</h4><p><img src="/posts/91e3f64e2d8e/image-20220113165655812-16420642177882.png" alt="image-20220113165655812"> </p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> N;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cin &gt;&gt; N;</span><br><span class="line"><span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (t &lt; N) &#123;</span><br><span class="line">cin &gt;&gt; arr[t];</span><br><span class="line">t++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断1</span></span><br><span class="line"><span class="keyword">if</span> (arr[i] == <span class="number">1</span>) flag = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//判断是不是偶数 除了2，其他的偶数一定不是质数</span></span><br><span class="line"><span class="keyword">if</span> (arr[i]!=<span class="number">2</span> &amp;&amp; arr[i]%<span class="number">2</span> == <span class="number">0</span>)  flag = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断9到正无穷的数 因为3 5 7是质数刚好直接输出 </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">3</span>; j &lt;= <span class="built_in">sqrt</span>(arr[i]); j+=<span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (arr[i] % j == <span class="number">0</span>) &#123;</span><br><span class="line">flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (flag) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优化二-埃氏筛"><a href="#优化二-埃氏筛" class="headerlink" title="优化二  埃氏筛"></a>优化二  埃氏筛</h3><h4 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h4><p>如果我们想要知道小于等于 n 有多少个素数呢？</p><p>一个自然的想法是我们对于小于等于 n 的每个数进行一次判定。这种暴力的做法显然不能达到最优复杂度，考虑如何优化。</p><p>考虑这样一件事情：如果 i 是合数，那么 i 的倍数也一定是合数。利用这个结论，我们可以避免很多次不必要的检测。</p><p>如果我们从小到大考虑每个数，然后同时把当前这个数的所有（比自己大的）倍数记为合数，那么运行结束的时候没有被标记的数就是素数了。</p><h4 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>$$<br>O(nlogn)<br>$$</p><p>代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span>  <span class="type">int</span> N=<span class="number">100000000</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> <span class="type">int</span> is_prime[N];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> <span class="type">int</span> prime[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Eratosthenes</span><span class="params">(<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//全假设为质数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) is_prime[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//0，1提前设为合数</span></span><br><span class="line">    is_prime[<span class="number">0</span>] = is_prime[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_prime[i]) &#123;</span><br><span class="line">            prime[p++] = i;  <span class="comment">// prime记录质数</span></span><br><span class="line">            <span class="comment">// 因为从 2 到 i - 1 的倍数我们之前筛过了，这里直接从 i的倍数开始，提高了运行速度</span></span><br><span class="line">            <span class="comment">// 因为小于i*i的数,如果是合数，这个合数肯定有一个因数肯定小于是i的，在前面就被筛选掉了</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> j = i * i; j &lt;= n;j += i)</span><br><span class="line">                is_prime[j] = <span class="number">0</span>;  <span class="comment">//是i的倍数的均不是素数 标记为掉</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">Eratosthenes</span>(n);i++) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,prime[i]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优化三-欧拉筛"><a href="#优化三-欧拉筛" class="headerlink" title="优化三 欧拉筛"></a>优化三 欧拉筛</h3><h4 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h4><p>在埃氏筛的基础上优化 ，每次只筛选到（i*（i除了1之外最小公因数的数）</p><p>确保不重复筛选 </p><p>(加一行代码)</p><h4 id="时间复杂度-1"><a href="#时间复杂度-1" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>$$<br>O(n)<br>$$</p><h4 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span>  <span class="type">int</span> N=<span class="number">10000000</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> <span class="type">int</span> is_prime[N],prime[N];</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> MAXN)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> i = <span class="number">2</span>; i &lt;= MAXN; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!is_prime[i]) &#123;</span><br><span class="line">            prime[cnt++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> <span class="type">int</span> j = <span class="number">0</span>; j &lt; cnt; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ( i * prime[j] &gt; MAXN) <span class="keyword">break</span>;</span><br><span class="line">            is_prime[i * prime[j]] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i%prime[j]==<span class="number">0</span>)  <span class="keyword">break</span>;<span class="comment">//关键</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="built_in">init</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;cnt;i++) <span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>,prime[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(i%prime[j]==0)  break;//关键</span><br></pre></td></tr></table></figure><p><img src="/posts/91e3f64e2d8e/70" alt="img"></p><p>参考文献：</p><ol><li><p><a href="https://www.cnblogs.com/lfri/p/11679306.html">线性筛的理解及应用 - Rogn - 博客园 (cnblogs.com)</a></p></li><li><p><a href="https://blog.csdn.net/sodacoco/article/details/81519269">(21条消息) 线性筛_二喵君的博客-CSDN博客_线性筛</a></p></li></ol>]]></content>
    
    
    <summary type="html">找质数的优化算法</summary>
    
    
    
    <category term="算法" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="算法" scheme="http://101.43.65.22/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>数据结构课设报告</title>
    <link href="http://101.43.65.22/posts/4fcdac8c8023/"/>
    <id>http://101.43.65.22/posts/4fcdac8c8023/</id>
    <published>2022-01-06T15:45:56.000Z</published>
    <updated>2022-03-30T04:44:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="项目一：迷宫求解"><a href="#项目一：迷宫求解" class="headerlink" title="项目一：迷宫求解"></a>项目一：迷宫求解</h2><h4 id="a-需求分析："><a href="#a-需求分析：" class="headerlink" title="a)需求分析："></a>a)需求分析：</h4><h5 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h5><p>可以输入一个任意大小的迷宫数据，用非递归的方法求出一条走出迷宫的路径，并将路径输出</p><h4 id="b-概要设计："><a href="#b-概要设计：" class="headerlink" title="b)概要设计："></a>b)概要设计：</h4><h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><ul><li>我打算设计一个迷宫游戏，用不同的算法生成迷宫，再用不同算法作路径规划</li><li>非递归的方法排除dfs路径规划方法</li><li>制作成可视化的程序</li></ul><ul><li><p>实现BFS算法寻找迷宫终点</p></li><li><p>实现基本的地图及寻找路径可视化</p></li><li><p>实现prim迷宫生成算法</p></li><li><p>改进BFS算法</p></li><li><p>独立出地图绘制类，供不同算法使用</p></li><li><p>封装主地图类</p></li><li><p>封装节点类</p></li><li><p>启用Scene Builder工具编写界面-</p></li><li><p>实现基本的UI界面</p></li><li><p>封装所有页面，改写为ButtonChose类的方法，实现页面跳转</p></li><li><p>加入DFS迷宫生成算法</p></li></ul><ul><li>重构MainMap类及其子类</li><li>重构bfs寻路算法</li><li>加入AStar寻路算法</li><li>加入bfs寻路算法</li></ul><h5 id="项目整体的设置思路图"><a href="#项目整体的设置思路图" class="headerlink" title="项目整体的设置思路图"></a>项目整体的设置思路图</h5><p><img src="/posts/4fcdac8c8023/io-1-16414137320101.png" alt="io-1"></p><h5 id="一些数据结构设计图"><a href="#一些数据结构设计图" class="headerlink" title="一些数据结构设计图"></a>一些数据结构设计图</h5><p><img src="/posts/4fcdac8c8023/io6.drawio-164142402935115-164142404151216.png" alt="io6.drawio"></p><p><img src="/posts/4fcdac8c8023/io7.drawio-164142501839317.png" alt="io7.drawio"></p><h5 id="设计说明："><a href="#设计说明：" class="headerlink" title="设计说明："></a>设计说明：</h5><p>该项目被我设计了一个迷宫游戏，玩家可以通过选择界面对迷宫的大小尺寸，迷宫的生成方式，起点与终点，屏幕分辨率等等属性进行时设置</p><p>点击开始游戏后，游戏会根据玩家的设置根据相应算法生成迷宫，玩家可以通过aswd四个键位操作角色走迷宫。</p><p>玩家可以通过按键J来使用BFS算法实时实现路径规划（显示角色到终点的路径，实时运算）</p><p>玩家可以通过按键L来使用AStar算法实时实现路径规划（显示角色到终点的路径，实时运算）</p><p>玩家可以通过按键K来进行角色导航（显示角色到终点的行走动画，实时运算，默认BFS算法）</p><h5 id="算法的设计有："><a href="#算法的设计有：" class="headerlink" title="算法的设计有："></a>算法的设计有：</h5><ol><li>随机prim迷宫生成算法</li><li>随机dfs迷宫生成算法</li><li>AStar路径规划算法</li><li>BFS路径规划算法</li></ol><h5 id="用到的数据结构有："><a href="#用到的数据结构有：" class="headerlink" title="用到的数据结构有："></a>用到的数据结构有：</h5><ol><li>链表</li><li>队列</li><li>双端队列</li><li>栈</li><li>优先队列</li><li>广义表</li><li>数组</li><li>树</li></ol><h4 id="c）详细设计："><a href="#c）详细设计：" class="headerlink" title="c）详细设计："></a>c）详细设计：</h4><h5 id="地图的每个点–Node类的设计"><a href="#地图的每个点–Node类的设计" class="headerlink" title="地图的每个点–Node类的设计"></a>地图的每个点–Node类的设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> FValue;<span class="comment">//总代价</span></span><br><span class="line">    <span class="type">int</span> HValue;<span class="comment">//预估代价 当前点到终点的的代价</span></span><br><span class="line">    <span class="type">int</span> GValue;<span class="comment">//当前代价 当前点到起点的代价</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> x, y;<span class="comment">//x坐标，y坐标</span></span><br><span class="line">    <span class="type">int</span> pre;<span class="comment">//上个节点</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//编号</span></span><br><span class="line">    <span class="type">boolean</span> isVisited=<span class="literal">false</span>;<span class="comment">//是否访问</span></span><br><span class="line">    <span class="type">int</span> value=<span class="number">1</span>;<span class="comment">//1是墙，0是路</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">()</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> pre)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">        <span class="built_in">this</span>.pre = pre;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(<span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPre</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pre;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPre</span><span class="params">(<span class="type">int</span> pre)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pre = pre;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isVisited</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isVisited;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVisited</span><span class="params">(<span class="type">boolean</span> visited)</span> &#123;</span><br><span class="line">        isVisited = visited;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHValue</span><span class="params">(Node end)</span> &#123;</span><br><span class="line">           HValue= Math.abs(x-end.getX())+Math.abs(y- end.getY());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGValue</span><span class="params">(Node start)</span> &#123;</span><br><span class="line">        <span class="comment">//曼哈顿计算G值</span></span><br><span class="line">        HValue= Math.abs(x-start.getX())+Math.abs(y- start.getY());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFValue</span><span class="params">()</span> &#123;</span><br><span class="line">        FValue=HValue+GValue;</span><br><span class="line">        <span class="keyword">return</span> FValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(x+<span class="string">&quot; &quot;</span>+y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="迷宫生成算法接口的设计"><a href="#迷宫生成算法接口的设计" class="headerlink" title="迷宫生成算法接口的设计"></a>迷宫生成算法接口的设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainMap</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Node start;<span class="comment">//起点</span></span><br><span class="line">    <span class="keyword">protected</span> Node end;<span class="comment">//终点</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> col;<span class="comment">//列数</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> row;<span class="comment">//行数</span></span><br><span class="line">    <span class="keyword">protected</span> Node nodeMap[][];<span class="comment">//地图</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCol</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> col;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCol</span><span class="params">(<span class="type">int</span> col)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.col = col;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> row;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRow</span><span class="params">(<span class="type">int</span> row)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.row = row;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MainMap</span><span class="params">(<span class="type">int</span> col, <span class="type">int</span> row)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.col = col;</span><br><span class="line">        <span class="built_in">this</span>.row = row;</span><br><span class="line">        nodeMap=<span class="keyword">new</span> <span class="title class_">Node</span>[row][col];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">InitMap</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 设置全为墙</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt; col;j++)&#123;</span><br><span class="line">                Node temp=<span class="keyword">new</span> <span class="title class_">Node</span>(i,j);</span><br><span class="line">                nodeMap[i][j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**随机生成起点和终点</span></span><br><span class="line"><span class="comment">         * 避免起点和终点靠得太近，将地图四分起点只在左上生成，终点在右下生成</span></span><br><span class="line"><span class="comment">         * 起点和终点不能同时在边界处</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        start=<span class="keyword">new</span> <span class="title class_">Node</span>(((<span class="type">int</span>)(Math.random()*row/<span class="number">2</span>+<span class="number">1</span>)),((<span class="type">int</span>)(Math.random()*col/<span class="number">2</span>+<span class="number">1</span>)));</span><br><span class="line"><span class="comment">//        System.out.println(&quot;开始点&quot;+start.getX()+&quot; &quot;+start.getY());</span></span><br><span class="line"></span><br><span class="line">        end=<span class="keyword">new</span> <span class="title class_">Node</span>((<span class="type">int</span>)((Math.random()*row)/<span class="number">2</span>+row/<span class="number">2</span>),(<span class="type">int</span>)((Math.random()*col))/<span class="number">2</span>+col/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeMap</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">getStart</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> start;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStart</span><span class="params">(Node start)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">getEnd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEnd</span><span class="params">(Node end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMap</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;起点：&quot;</span>+start.getX()+<span class="string">&quot; &quot;</span>+start.getY());</span><br><span class="line">        System.out.println(<span class="string">&quot;终点：&quot;</span>+end.getX()+<span class="string">&quot; &quot;</span>+end.getY());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt; col;j++)&#123;</span><br><span class="line">                System.out.print(nodeMap[i][j].value +<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//制作副本</span></span><br><span class="line">    <span class="keyword">public</span> MainMap <span class="title function_">clone</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MainMap</span> <span class="variable">clone</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">MainMap</span>(col,row);</span><br><span class="line">        clone.InitMap();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;col;j++)&#123;</span><br><span class="line">                clone.nodeMap[i][j].setValue(nodeMap[i][j].getValue());</span><br><span class="line">                clone.nodeMap[i][j].setPre(nodeMap[i][j].getPre());</span><br><span class="line">                clone.nodeMap[i][j].setVisited(nodeMap[i][j].isVisited());</span><br><span class="line">                clone.nodeMap[i][j].setX(nodeMap[i][j].getX());</span><br><span class="line">                clone.nodeMap[i][j].setY(nodeMap[i][j].getY());</span><br><span class="line">                clone.nodeMap[i][j].setId(nodeMap[i][j].getId());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        clone.end=end;</span><br><span class="line">        clone.start=start;</span><br><span class="line">        <span class="keyword">return</span> clone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="地图接口设计"><a href="#地图接口设计" class="headerlink" title="地图接口设计"></a>地图接口设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainMap</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Node start;<span class="comment">//起点</span></span><br><span class="line">    <span class="keyword">protected</span> Node end;<span class="comment">//终点</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> col;<span class="comment">//列数</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> row;<span class="comment">//行数</span></span><br><span class="line">    <span class="keyword">protected</span> Node nodeMap[][];<span class="comment">//地图</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCol</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> col;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCol</span><span class="params">(<span class="type">int</span> col)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.col = col;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getRow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> row;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRow</span><span class="params">(<span class="type">int</span> row)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.row = row;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MainMap</span><span class="params">(<span class="type">int</span> col, <span class="type">int</span> row)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.col = col;</span><br><span class="line">        <span class="built_in">this</span>.row = row;</span><br><span class="line">        nodeMap=<span class="keyword">new</span> <span class="title class_">Node</span>[row][col];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">InitMap</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 设置全为墙</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt; col;j++)&#123;</span><br><span class="line">                Node temp=<span class="keyword">new</span> <span class="title class_">Node</span>(i,j);</span><br><span class="line">                nodeMap[i][j]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**随机生成起点和终点</span></span><br><span class="line"><span class="comment">         * 避免起点和终点靠得太近，将地图四分起点只在左上生成，终点在右下生成</span></span><br><span class="line"><span class="comment">         * 起点和终点不能同时在边界处</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        start=<span class="keyword">new</span> <span class="title class_">Node</span>(((<span class="type">int</span>)(Math.random()*row/<span class="number">2</span>+<span class="number">1</span>)),((<span class="type">int</span>)(Math.random()*col/<span class="number">2</span>+<span class="number">1</span>)));</span><br><span class="line"><span class="comment">//        System.out.println(&quot;开始点&quot;+start.getX()+&quot; &quot;+start.getY());</span></span><br><span class="line"></span><br><span class="line">        end=<span class="keyword">new</span> <span class="title class_">Node</span>((<span class="type">int</span>)((Math.random()*row)/<span class="number">2</span>+row/<span class="number">2</span>),(<span class="type">int</span>)((Math.random()*col))/<span class="number">2</span>+col/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeMap</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">getStart</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> start;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStart</span><span class="params">(Node start)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">getEnd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEnd</span><span class="params">(Node end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMap</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;起点：&quot;</span>+start.getX()+<span class="string">&quot; &quot;</span>+start.getY());</span><br><span class="line">        System.out.println(<span class="string">&quot;终点：&quot;</span>+end.getX()+<span class="string">&quot; &quot;</span>+end.getY());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt; col;j++)&#123;</span><br><span class="line">                System.out.print(nodeMap[i][j].value +<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//制作副本</span></span><br><span class="line">    <span class="keyword">public</span> MainMap <span class="title function_">clone</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MainMap</span> <span class="variable">clone</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">MainMap</span>(col,row);</span><br><span class="line">        clone.InitMap();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;col;j++)&#123;</span><br><span class="line">                clone.nodeMap[i][j].setValue(nodeMap[i][j].getValue());</span><br><span class="line">                clone.nodeMap[i][j].setPre(nodeMap[i][j].getPre());</span><br><span class="line">                clone.nodeMap[i][j].setVisited(nodeMap[i][j].isVisited());</span><br><span class="line">                clone.nodeMap[i][j].setX(nodeMap[i][j].getX());</span><br><span class="line">                clone.nodeMap[i][j].setY(nodeMap[i][j].getY());</span><br><span class="line">                clone.nodeMap[i][j].setId(nodeMap[i][j].getId());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        clone.end=end;</span><br><span class="line">        clone.start=start;</span><br><span class="line">        <span class="keyword">return</span> clone;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="路径规划算法接口设计"><a href="#路径规划算法接口设计" class="headerlink" title="路径规划算法接口设计"></a>路径规划算法接口设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SF</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> LinkedList&lt;Node&gt; <span class="title function_">find3</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Prim随机生成地图算法原理与代码"><a href="#Prim随机生成地图算法原理与代码" class="headerlink" title="Prim随机生成地图算法原理与代码"></a>Prim随机生成地图算法原理与代码</h5><p>1.让迷宫全是墙.<br>2.选一个单元格作为迷宫的通路，然后把它的邻墙放入列表<br>3.当列表里还有墙时<br>    1.从列表里随机选一个墙，如果这面墙分隔的两个单元格只有一个单元格被访问过<br>        1.那就从列表里移除这面墙，即把墙打通，让未访问的单元格成为迷宫的通路<br>        2.把这个格子的墙加入列表<br>    2.如果墙两面的单元格都已经被访问过，那就从列表里移除这面墙</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeMap</span><span class="params">()</span>&#123;</span><br><span class="line">    InitMap();</span><br><span class="line">    nodeMap[<span class="number">1</span>][<span class="number">1</span>].setValue(<span class="number">0</span>);<span class="comment">//将起点变成路</span></span><br><span class="line"></span><br><span class="line">    LinkedList&lt;Node&gt; listA=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    LinkedList&lt;Node&gt; listB= <span class="literal">null</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tempR</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tempC</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//待选路点进入链表</span></span><br><span class="line">    Node temp=nodeMap[<span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">    listA.add(temp);</span><br><span class="line">    temp=nodeMap[<span class="number">3</span>][<span class="number">1</span>];</span><br><span class="line">    listA.add(temp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (listA.size()!=<span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> randomNodeId=(<span class="type">int</span>)(listA.size()*Math.random());<span class="comment">//随机备选点作为A</span></span><br><span class="line">        Node randomA=listA.get(randomNodeId);<span class="comment">//随机路点A</span></span><br><span class="line">        listB=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line">        <span class="comment">//将选路点A四周是路的进入备选池</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:tempR=randomA.getX()-<span class="number">2</span>;tempC=randomA.getY();<span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:tempR=randomA.getX()+<span class="number">2</span>;tempC=randomA.getY();<span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:tempR=randomA.getX();tempC=randomA.getY()+<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:tempR=randomA.getX();tempC=randomA.getY()-<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!(tempC&lt;col&amp;&amp;tempC&gt;=<span class="number">0</span>&amp;&amp;tempR&gt;=<span class="number">0</span>&amp;&amp;tempR&lt;row))&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//判断是否通路    加入临时通路备选池B</span></span><br><span class="line">            <span class="keyword">if</span>(nodeMap[tempR][tempC].getValue()==<span class="number">0</span>)&#123;</span><br><span class="line">                temp=nodeMap[tempR][tempC];</span><br><span class="line">                listB.add(temp);<span class="comment">// listB其实用数组更好 ，大小只有0-3 有1个是来的点，肯定访问过了</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//判断是否为墙和A中是否包含该点加入 待选路点链表listA</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nodeMap[tempR][tempC].getValue()==<span class="number">1</span>&amp;&amp;!listA.contains(nodeMap[tempR][tempC]))&#123;</span><br><span class="line">                    temp=nodeMap[tempR][tempC];</span><br><span class="line">                    listA.add(temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> randomPass=(<span class="type">int</span>)(listB.size()*Math.random());<span class="comment">//随机备选点作为B</span></span><br><span class="line">        Node randomB=listB.get(randomPass);<span class="comment">//随机通路点</span></span><br><span class="line">        <span class="comment">//打通一条通路</span></span><br><span class="line">        nodeMap[randomA.getX()][randomA.getY()].setValue(<span class="number">0</span>);</span><br><span class="line">        nodeMap[(randomB.getX()+randomA.getX())&gt;&gt;<span class="number">1</span>][(randomA.getY()+randomB.getY())&gt;&gt;<span class="number">1</span>].setValue(<span class="number">0</span>);</span><br><span class="line">        listA.remove(randomA);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//确保生成一个可达的终点</span></span><br><span class="line">    <span class="keyword">while</span> (nodeMap[end.getX()][end.getY()].getValue()==<span class="number">1</span>)&#123;</span><br><span class="line">        end=<span class="keyword">new</span> <span class="title class_">Node</span>((<span class="type">int</span>)((Math.random()*row)/<span class="number">2</span>+row/<span class="number">2</span>),(<span class="type">int</span>)((Math.random()*col))/<span class="number">2</span>+col/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="DFS随机生成地图算法原理与代码"><a href="#DFS随机生成地图算法原理与代码" class="headerlink" title="DFS随机生成地图算法原理与代码"></a>DFS随机生成地图算法原理与代码</h5><p>1.将起点作为当前迷宫单元并标记为已访问<br>2.当还存在未标记的迷宫单元，进行循环<br>    1.如果当前迷宫单元有未被访问过的的相邻的迷宫单元<br>        1.随机选择一个未访问的相邻迷宫单元<br>        2.将当前迷宫单元入栈<br>        3.移除当前迷宫单元与相邻迷宫单元的墙<br>        4.标记相邻迷宫单元并用它作为当前迷宫单元<br>    2.如果当前迷宫单元不存在未访问的相邻迷宫单元，并且栈不空<br>        1.栈顶的迷宫单元出栈<br>        2.令其成为当前迷宫单元</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeMap</span><span class="params">()</span>&#123;</span><br><span class="line">        InitMap();</span><br><span class="line">        LinkedList&lt;Node&gt; stackList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        1.将起点作为当前迷宫单元并标记为已访问</span></span><br><span class="line">        Node current=nodeMap[<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">        nodeMap[<span class="number">1</span>][<span class="number">1</span>].setVisited(<span class="literal">true</span>);</span><br><span class="line">        stackList.add(current);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        2.当还存在未标记的迷宫单元，进行循环</span></span><br><span class="line">        <span class="keyword">while</span>(stackList.size()!=<span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//遍历4个方向</span></span><br><span class="line">            <span class="type">int</span> tempR=<span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> tempC=<span class="number">0</span>;</span><br><span class="line">            LinkedList&lt;Node&gt; AdjList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:tempR=current.getX()-<span class="number">2</span>;tempC=current.getY();<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:tempR=current.getX()+<span class="number">2</span>;tempC=current.getY();<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:tempR=current.getX();tempC=current.getY()+<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:tempR=current.getX();tempC=current.getY()-<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//处理边界问题</span></span><br><span class="line">                <span class="keyword">if</span>(!(tempC&lt;col&amp;&amp;tempC&gt;<span class="number">0</span>&amp;&amp;tempR&gt;<span class="number">0</span>&amp;&amp;tempR&lt;row))&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//未访问过的进入选择</span></span><br><span class="line">                <span class="keyword">if</span>(nodeMap[tempR][tempC].isVisited==<span class="literal">false</span>)&#123;</span><br><span class="line">                   AdjList.add(nodeMap[tempR][tempC]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//          1.如果当前迷宫单元有未被访问过的的相邻的迷宫单元</span></span><br><span class="line">            <span class="keyword">if</span>(AdjList.size()!=<span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">//              1.随机选择一个未访问的相邻迷宫单元</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">randomDir</span> <span class="operator">=</span> (<span class="type">int</span>) ((AdjList.size() * Math.random()));</span><br><span class="line">                <span class="type">Node</span> <span class="variable">adjNode</span> <span class="operator">=</span> AdjList.get(randomDir);</span><br><span class="line"><span class="comment">//              2.将当前迷宫单元入栈</span></span><br><span class="line">                stackList.push(current);</span><br><span class="line"><span class="comment">//              3.移除当前迷宫单元与相邻迷宫单元的墙</span></span><br><span class="line">                adjNode.setValue(<span class="number">0</span>);</span><br><span class="line">                current.setValue(<span class="number">0</span>);</span><br><span class="line">                nodeMap[(adjNode.getX()+current.getX())&gt;&gt;<span class="number">1</span>][(adjNode.getY()+current.getY())&gt;&gt;<span class="number">1</span>].setValue(<span class="number">0</span>);</span><br><span class="line">                nodeMap[(adjNode.getX()+current.getX())&gt;&gt;<span class="number">1</span>][(adjNode.getY()+current.getY())&gt;&gt;<span class="number">1</span>].setVisited(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//              4.标记相邻迷宫单元并用它作为当前迷宫单元</span></span><br><span class="line">                adjNode.setVisited(<span class="literal">true</span>);</span><br><span class="line">                current=adjNode;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//          2.如果当前迷宫单元不存在未访问的相邻迷宫单元，并且栈不空</span></span><br><span class="line">            <span class="keyword">if</span>(stackList.size()!=<span class="number">0</span>&amp;&amp;AdjList.size()==<span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">//              1.栈顶的迷宫单元出栈</span></span><br><span class="line"><span class="comment">//              2.令其成为当前迷宫单元</span></span><br><span class="line">                 current=stackList.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//确保生成一个可达的终点</span></span><br><span class="line">        <span class="keyword">while</span> (nodeMap[end.getX()][end.getY()].getValue()==<span class="number">1</span>)&#123;</span><br><span class="line">            end=<span class="keyword">new</span> <span class="title class_">Node</span>((<span class="type">int</span>)((Math.random()*row)/<span class="number">2</span>+row/<span class="number">2</span>),(<span class="type">int</span>)((Math.random()*col))/<span class="number">2</span>+col/<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="BFS路径规划算法原理及代码"><a href="#BFS路径规划算法原理及代码" class="headerlink" title="BFS路径规划算法原理及代码"></a>BFS路径规划算法原理及代码</h5><p>从迷宫的入口开始，进行层次优先遍历（BFS，我更喜欢称之为层次优先遍历，因为这样更形象）。BFS遍历的关键就是需要用到一个队列，在这道题中，只需要从入口点出发，依次看下它的上下左右四个结点是否可以走，如果可以走，就立即把这个结点push到队列尾部，然后每次找的时候就是从队头取出一个点，依次看它的上下左右四个方向。遍历的路径的时候注意是从出口往入口找，所以需要用到一个栈保存一下路径。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">()</span>&#123;</span><br><span class="line">    Node start= mainMap.getStart();</span><br><span class="line">    Node end=mainMap.getEnd();</span><br><span class="line">    start.setPre(-<span class="number">1</span>);</span><br><span class="line">    nodeMap =mainMap.nodeMap;</span><br><span class="line"></span><br><span class="line">    linkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    Node temp=<span class="literal">null</span>;</span><br><span class="line">    linkedList.offer(start);</span><br><span class="line">    rear++;</span><br><span class="line">    nodeMap[start.getX()][start.getY()].setValue(-<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(!(front==rear)) &#123;</span><br><span class="line">        temp=linkedList.get(++front);</span><br><span class="line">        <span class="comment">//判断是不是终点</span></span><br><span class="line">        <span class="keyword">if</span> (temp.getX() ==end.getX() &amp;&amp; temp.getY() ==end.getY()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//遍历4个方向</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Node</span> <span class="variable">temp2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x, temp.y - <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x, temp.y + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    temp2 =  <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x - <span class="number">1</span>, temp.y);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x + <span class="number">1</span>, temp.y);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//可走进队</span></span><br><span class="line">            <span class="keyword">if</span> (temp2.getX()&lt;mainMap.getCol()&amp;&amp;temp2.getX()&gt;<span class="number">0</span>&amp;&amp;temp.getY()&gt;<span class="number">0</span>&amp;&amp;temp2.getY()&lt;mainMap.getRow()&amp;&amp;nodeMap[temp2.getX()][temp2.getY()].getValue()==<span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                linkedList.offer(temp2);</span><br><span class="line">                rear++;</span><br><span class="line">                temp2.id=linkedList.indexOf(temp2);</span><br><span class="line">                temp2.setPre(temp.getId());</span><br><span class="line">                nodeMap[temp2.getX()][temp2.getY()].setValue(-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>  <span class="type">boolean</span> <span class="title function_">find2</span><span class="params">()</span>&#123;</span><br><span class="line">    linkedList2=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    linkedList2.add(linkedList.get(front));</span><br><span class="line">    <span class="type">int</span> j=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (linkedList2.get(j).getPre()!=-<span class="number">1</span>)&#123;</span><br><span class="line">        linkedList2.add(linkedList.get(linkedList2.get(j).getPre()));</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    linkedList=linkedList2;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> LinkedList&lt;Node&gt; <span class="title function_">find3</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> time1=<span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">    System.out.println(time1);</span><br><span class="line">    find();</span><br><span class="line">    find2();</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> time2=<span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">    System.out.println(time2);</span><br><span class="line">    System.out.println(time2-time1);</span><br><span class="line">    <span class="keyword">return</span> linkedList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AStar路径规划算法原理及代码</p><p> 1.起点先添加到开启列表中<br> 2.开启列表中有节点的话，取出第一个节点，即最小F值的节点<br>  判断此节点是否是目标点，是则找到了，跳出<br>  根据此节点取得四个方向的节点，求出G，H，F值<br>  判断每个节点在地图中是否能通过，不能通过则加入关闭列表中，跳出<br>  判断每个节点是否在关闭列表中，在则跳出<br>  判断每个节点是否在开启列表中，在则更新G值，F值，还更新其父节点；不在则将其添加到开启列表中，计算G值，H值，F值，添加其节点<br> 3.把此节点从开启列表中删除，再添加到关闭列表中<br> 4.把开启列表中按照F值最小的节点进行排序，最小的F值在第一个<br> 5.重复2，3，4步骤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//建立一个优先队列</span></span><br><span class="line">        open=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(NodeComparator);</span><br><span class="line">        <span class="comment">//建一个保存链表</span></span><br><span class="line">        keptList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//起点的当前代价为0 预估代价用曼哈顿公式算</span></span><br><span class="line">        start=mainMap.getStart();</span><br><span class="line">        start.setPre(-<span class="number">1</span>);</span><br><span class="line">        nodeMap[start.getX()][start.getY()].setValue(-<span class="number">1</span>);</span><br><span class="line">        start.setGValue(start);</span><br><span class="line">        start.setHValue(end);</span><br><span class="line"></span><br><span class="line">        open.add(start);</span><br><span class="line"><span class="comment">//      开启列表中有节点的话，取出第一个节点，即最小F值的节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        int GValue=1;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(open.size()!=<span class="number">0</span>)&#123;</span><br><span class="line">            Node current=open.poll();</span><br><span class="line"></span><br><span class="line">            keptList.offer(current);<span class="comment">//保存下来，就可以找到路径了</span></span><br><span class="line">            current.id=keptList.indexOf(current);</span><br><span class="line"><span class="comment">//            判断此节点是否是目标点，是则找到了，跳出</span></span><br><span class="line">            <span class="keyword">if</span>(current.getX()==end.getX()&amp;&amp;current.getY()==end.getY()) &#123;<span class="keyword">break</span>;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//遍历4个方向</span></span><br><span class="line"></span><br><span class="line">            <span class="type">Node</span> <span class="variable">temp2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(current.x, current.y - <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(current.x, current.y + <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        temp2 =  <span class="keyword">new</span> <span class="title class_">Node</span>(current.x - <span class="number">1</span>, current.y);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                        temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(current.x + <span class="number">1</span>, current.y);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//可走进队</span></span><br><span class="line">                <span class="keyword">if</span> (temp2.getX()&lt;mainMap.getCol()&amp;&amp;temp2.getX()&gt;<span class="number">0</span>&amp;&amp;temp2.getY()&gt;<span class="number">0</span>&amp;&amp;temp2.getY()&lt;mainMap.getRow()&amp;&amp;nodeMap[temp2.getX()][temp2.getY()].getValue()==<span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//将四周的点都加入优先队列 算出所有FValue</span></span><br><span class="line">                    temp2.setGValue(start);</span><br><span class="line">                    temp2.setHValue(end);</span><br><span class="line"></span><br><span class="line">                    temp2.setPre(current.getId());</span><br><span class="line">                    nodeMap[temp2.getX()][temp2.getY()].setValue(-<span class="number">1</span>);</span><br><span class="line">                    open.add(temp2);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>  <span class="type">boolean</span> <span class="title function_">find2</span><span class="params">()</span>&#123;</span><br><span class="line">        LinkedList&lt;Node&gt;linkedList2=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        linkedList2.add(keptList.getLast());</span><br><span class="line">        <span class="type">int</span> j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (linkedList2.get(j).getPre()!=-<span class="number">1</span>)&#123;</span><br><span class="line">            linkedList2.add(keptList.get(linkedList2.get(j).getPre()));</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        keptList=linkedList2;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> LinkedList&lt;Node&gt; <span class="title function_">find3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">long</span> time1=<span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">        System.out.println(time1);</span><br><span class="line">        find();</span><br><span class="line">        find2();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> time2=<span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">        System.out.println(time2);</span><br><span class="line">        System.out.println(time2-time1);</span><br><span class="line">        <span class="keyword">return</span> keptList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>绘图接口设计</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.mazegame4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javafx.scene.Group;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainPrint</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Group group;</span><br><span class="line">    <span class="keyword">protected</span> MainMap mainMap;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> OneCol;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> OneRow;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MainPrint</span><span class="params">(Group group,MainMap mainMap)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.group = group;</span><br><span class="line">        <span class="built_in">this</span>.mainMap = mainMap;</span><br><span class="line">        OneCol=(<span class="type">double</span>) <span class="number">800</span> / mainMap.getCol();</span><br><span class="line">        OneRow=(<span class="type">double</span>) <span class="number">800</span>/mainMap.getRow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="d）调试分析"><a href="#d）调试分析" class="headerlink" title="d）调试分析"></a>d）调试分析</h4><h5 id="开始界面（选择界面）"><a href="#开始界面（选择界面）" class="headerlink" title="开始界面（选择界面）"></a>开始界面（选择界面）</h5><p><img src="/posts/4fcdac8c8023/image-20220106044727148-16414156488732.png" alt="image-20220106044727148"></p><h5 id="Prim算法随机生成41-41迷宫"><a href="#Prim算法随机生成41-41迷宫" class="headerlink" title="Prim算法随机生成41*41迷宫"></a>Prim算法随机生成41*41迷宫</h5><p><img src="/posts/4fcdac8c8023/image-20220106044954737.png" alt="image-20220106044954737"></p><h5 id="DFS算法随机生成41-41迷宫"><a href="#DFS算法随机生成41-41迷宫" class="headerlink" title="DFS算法随机生成41*41迷宫"></a>DFS算法随机生成41*41迷宫</h5><p><img src="/posts/4fcdac8c8023/image-20220106045220105.png" alt="image-20220106045220105"></p><h5 id="路径规划（解迷宫）"><a href="#路径规划（解迷宫）" class="headerlink" title="路径规划（解迷宫）"></a>路径规划（解迷宫）</h5><p><img src="/posts/4fcdac8c8023/image-20220106045336440.png" alt="image-20220106045336440"></p><p><img src="/posts/4fcdac8c8023/image-20220106045056685-16414158585143.png" alt="image-20220106045056685"></p><h5 id="角色导航"><a href="#角色导航" class="headerlink" title="角色导航"></a>角色导航</h5><p><img src="/posts/4fcdac8c8023/image-20220106051028359.png" alt="image-20220106051028359"></p><h5 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h5><p>prim迷宫生成算法：原：O(n²)，使用优先队列改进：O(mlogn)</p><p>DFS迷宫生成算法：O(n²)</p><p>BFS路径规划算法：O(n²)</p><p>AStar路径规划算法：O（m*n）;m,n分别是地图的行数和列数</p><h2 id="项目二：手写计算器"><a href="#项目二：手写计算器" class="headerlink" title="项目二：手写计算器"></a>项目二：手写计算器</h2><h4 id="a-需求分析：-1"><a href="#a-需求分析：-1" class="headerlink" title="a)需求分析："></a>a)需求分析：</h4><h5 id="要求-1"><a href="#要求-1" class="headerlink" title="要求"></a>要求</h5><p>利用计算器实现一元多项式计算，表达式求值是实现程序设计语言的基本问题之一，栈的应用。设计一个程序，演示用算符优先法对算术表达式求值的过程。 </p><p>该计算器可以进行加减乘除，求余，阶乘，次方根的一元多项式计算</p><h4 id="b-概要设计：-1"><a href="#b-概要设计：-1" class="headerlink" title="b)概要设计："></a>b)概要设计：</h4><h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><ul><li>利用栈将输入的算术式（中缀表达式）转逆波兰式（后缀表达式）</li><li>利用逆波兰式借助栈进行运算</li><li>实现基本的可视化以及用户交互功能</li></ul><h5 id="整体设计思路图"><a href="#整体设计思路图" class="headerlink" title="整体设计思路图"></a>整体设计思路图</h5><p><img src="/posts/4fcdac8c8023/io2.drawio.png" alt="io2.drawio"></p><h5 id="存储结构的设计"><a href="#存储结构的设计" class="headerlink" title="存储结构的设计"></a>存储结构的设计</h5><p><img src="/posts/4fcdac8c8023/io3.drawio.png" alt="io3.drawio"></p><h4 id="c）详细设计：-1"><a href="#c）详细设计：-1" class="headerlink" title="c）详细设计："></a>c）详细设计：</h4><h5 id="栈设计"><a href="#栈设计" class="headerlink" title="栈设计"></a>栈设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 手写栈</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyStack</span>&lt;E&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> MaxSize=<span class="number">1010</span>;</span><br><span class="line">    <span class="keyword">private</span> E data[];<span class="comment">//泛型+强制类型转换</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> top=-<span class="number">1</span>;<span class="comment">//栈顶指针</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyStack</span><span class="params">()</span> &#123;</span><br><span class="line">        data=(E[])<span class="keyword">new</span> <span class="title class_">Object</span>[MaxSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断是否栈空</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (top==-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//进栈</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(E e)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(top==MaxSize-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;栈满了&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        data[++top]=e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//出栈</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(top==-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;栈空&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data[top--];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//取栈顶符号</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">getTop</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(top==-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;栈空&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data[top];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="逆波兰式算法的实现"><a href="#逆波兰式算法的实现" class="headerlink" title="逆波兰式算法的实现"></a>逆波兰式算法的实现</h5><p>将一个普通的中缀表达式转换为<a href="https://baike.baidu.com/item/%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F">逆波兰表达式</a>的一般算法是：</p><p>首先需要分配2个栈，一个作为临时存储运算符的栈S1（含一个结束符号），一个作为存放结果（逆波兰式）的栈S2（空栈），S1栈可先放入优先级最低的运算符#，注意，中缀式应以此最低优先级的运算符结束。可指定其他字符，不一定非#不可。从中缀式的左端开始取字符，逐序进行如下步骤：</p><p>（1）若取出的字符是操作数，则分析出完整的运算数，该操作数直接送入S2栈。</p><p>（2）若取出的字符是运算符，则将该运算符与S1栈栈顶元素比较，如果该运算符(不包括括号运算符)优先级高于S1栈栈顶运算符（包括左括号）优先级，则将该运算符进S1栈（或者栈空），否则，将S1栈的栈顶运算符弹出，送入S2栈中，直至S1栈栈顶运算符（包括左括号）低于（不包括等于）该运算符优先级时停止弹出运算符，最后将该运算符送入S1栈。</p><p>（3）若取出的字符是“（”，则直接送入S1栈顶。</p><p>（4）若取出的字符是“）”，则将距离S1栈栈顶最近的“（”之间的运算符，逐个出栈，依次送入S2栈，此时抛弃“（”。</p><p>（5）重复上面的1~4步，直至处理完所有的输入字符。</p><p>（6）若取出的字符是“#”，则将S1栈内所有运算符（不包括“#”），逐个出栈，依次送入S2栈。</p><h5 id="计算方法的实现"><a href="#计算方法的实现" class="headerlink" title="计算方法的实现"></a>计算方法的实现</h5><p>新建一个表达式,如果当前字符为变量或者为数字，则压栈，如果是运算符，则将栈顶两个元素弹出作相应运算，结果再入栈，最后当表达式扫描完后，栈里的就是结果。</p><h5 id="计算器代码的设计-逆波兰式-计算方法"><a href="#计算器代码的设计-逆波兰式-计算方法" class="headerlink" title="计算器代码的设计:逆波兰式+计算方法"></a>计算器代码的设计:逆波兰式+计算方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="type">int</span> State;</span><br><span class="line">    MyStack &lt;Character&gt;tempStack;<span class="comment">//符号栈 临时栈</span></span><br><span class="line">    MyStack &lt;Character&gt;outStack2;<span class="comment">//    输出栈</span></span><br><span class="line">    MyStack &lt;String&gt; coutStack;<span class="comment">// 运算栈</span></span><br><span class="line">    String stringArr[];<span class="comment">//字符串数组</span></span><br><span class="line">    <span class="type">int</span> j;</span><br><span class="line">    String suffix;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Calculator</span><span class="params">()</span> &#123;</span><br><span class="line">        tempStack=<span class="keyword">new</span> <span class="title class_">MyStack</span>&lt;&gt;();</span><br><span class="line">        outStack2=<span class="keyword">new</span> <span class="title class_">MyStack</span>&lt;&gt;();</span><br><span class="line">        coutStack=<span class="keyword">new</span> <span class="title class_">MyStack</span>&lt;&gt;();</span><br><span class="line">        suffix=<span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line">        stringArr=<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">25</span>];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取优先级</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getState</span><span class="params">(<span class="type">char</span> c)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span> || c == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">             <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;*&#x27;</span> || c == <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;%&#x27;</span> || c == <span class="string">&#x27;^&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;!&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getSuffix</span><span class="params">(<span class="type">char</span>[] input)</span>&#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(input[i]!=<span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">//数字直接进输出栈</span></span><br><span class="line">            <span class="keyword">if</span>(input[i]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;input[i]&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line"></span><br><span class="line">                outStack2.push(input[i++]);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//处理运算符</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(input[i]==<span class="string">&#x27;+&#x27;</span>||input[i]==<span class="string">&#x27;-&#x27;</span>||input[i]==<span class="string">&#x27;*&#x27;</span>||input[i]==<span class="string">&#x27;/&#x27;</span>||input[i]==<span class="string">&#x27;!&#x27;</span>||input[i]==<span class="string">&#x27;%&#x27;</span>||input[i]==<span class="string">&#x27;^&#x27;</span>)&#123;</span><br><span class="line">                <span class="comment">//如果该运算符(不包括括号运算符)优先级高于tempStack栈栈顶运算符（包括左括号）优先级(或者栈空)，则将该运算符进tempStack栈</span></span><br><span class="line">                <span class="keyword">if</span>(tempStack.isEmpty()||tempStack.getTop()==<span class="string">&#x27;(&#x27;</span>||getState(input[i])&gt;getState(tempStack.getTop()))&#123;</span><br><span class="line">                    tempStack.push(input[i++]);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//否则，将tempStack栈的栈顶运算符弹出，送入outStack栈中，直至tempStack栈栈顶运算符（包括左括号）低于（不包括等于）该运算符优先级时停止弹出运算符，最后将该运算符送入outStack栈</span></span><br><span class="line">                    <span class="keyword">while</span>(!tempStack.isEmpty()&amp;&amp;getState(input[i])&lt;getState(tempStack.getTop()))&#123;</span><br><span class="line">                        outStack2.push(tempStack.pop());</span><br><span class="line">                    &#125;</span><br><span class="line">                    outStack2.push(tempStack.pop());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//若取出的字符是&#x27;(&#x27;，则直接入tempStack栈。</span></span><br><span class="line">            <span class="keyword">if</span> (input[i]==<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                tempStack.push(input[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//若取出的字符是&#x27;)&#x27;，tempStack一直出栈到outStack栈中直到遇到 &#x27;(&#x27;,将&#x27;(&#x27;丢弃</span></span><br><span class="line">            <span class="keyword">if</span> (input[i]==<span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">while</span>(tempStack.getTop()!=<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                    outStack2.push(tempStack.pop());</span><br><span class="line">                &#125;</span><br><span class="line">                tempStack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!tempStack.isEmpty())&#123;</span><br><span class="line">            outStack2.push(tempStack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSuffix</span><span class="params">(String input)</span>&#123;</span><br><span class="line">        suffix=<span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;input.length();i++)&#123;</span><br><span class="line">            <span class="comment">//数字直接进输出栈 将数字变成浮点数类型</span></span><br><span class="line">            <span class="keyword">if</span>(input.charAt(i)&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;input.charAt(i)&lt;=<span class="string">&#x27;9&#x27;</span>||input.charAt(i)==<span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">                suffix += input.charAt(i);</span><br><span class="line"></span><br><span class="line">                String temp=<span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line">                temp += input.charAt(i);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> (i+<span class="number">1</span>&lt;input.length()&amp;&amp;input.charAt(i+<span class="number">1</span>)&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;input.charAt(i+<span class="number">1</span>)&lt;=<span class="string">&#x27;9&#x27;</span>||i+<span class="number">1</span>&lt;input.length()&amp;&amp;input.charAt(i+<span class="number">1</span>)==<span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">                    suffix += input.charAt(i+<span class="number">1</span>);</span><br><span class="line">                    temp += input.charAt(i+<span class="number">1</span>);</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                stringArr[j++]=temp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//处理运算符</span></span><br><span class="line">             <span class="keyword">else</span> <span class="keyword">if</span>(input.charAt(i)==<span class="string">&#x27;+&#x27;</span>||input.charAt(i)==<span class="string">&#x27;-&#x27;</span>||input.charAt(i)==<span class="string">&#x27;*&#x27;</span>||input.charAt(i)==<span class="string">&#x27;/&#x27;</span>||input.charAt(i)==<span class="string">&#x27;!&#x27;</span>||input.charAt(i)==<span class="string">&#x27;%&#x27;</span>||input.charAt(i)==<span class="string">&#x27;^&#x27;</span>)&#123;</span><br><span class="line">                <span class="comment">//如果该运算符(不包括括号运算符)优先级高于tempStack栈栈顶运算符（包括左括号）优先级(或者栈空)，则将该运算符进tempStack栈</span></span><br><span class="line">                <span class="keyword">if</span>(tempStack.isEmpty()||tempStack.getTop()==<span class="string">&#x27;(&#x27;</span>||getState(input.charAt(i))&gt;getState(tempStack.getTop()))&#123;</span><br><span class="line">                    tempStack.push(input.charAt(i));</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//否则，将tempStack栈的栈顶运算符弹出，送入outStack栈中，直至tempStack栈栈顶运算符（包括左括号）低于（不包括等于）该运算符优先级时停止弹出运算符，最后将该运算符送入outStack栈</span></span><br><span class="line">                    <span class="keyword">while</span>(!tempStack.isEmpty()&amp;&amp;getState(input.charAt(i))&lt;getState(tempStack.getTop()))&#123;</span><br><span class="line">                        stringArr[j++]= String.valueOf(tempStack.getTop());</span><br><span class="line">                        suffix+=tempStack.pop();</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    tempStack.push(input.charAt(i));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//若取出的字符是&#x27;(&#x27;，则直接入tempStack栈。</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (input.charAt(i)==<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">               tempStack.push(input.charAt(i));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//若取出的字符是&#x27;)&#x27;，tempStack一直出栈到outStack栈中直到遇到 &#x27;(&#x27;,将&#x27;(&#x27;丢弃</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (input.charAt(i)==<span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">while</span>(tempStack.getTop()!=<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">                    stringArr[j++]= String.valueOf(tempStack.getTop());</span><br><span class="line">                    suffix+=(tempStack.pop());</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                tempStack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!tempStack.isEmpty())&#123;</span><br><span class="line">            stringArr[j++]= String.valueOf(tempStack.getTop());</span><br><span class="line">            suffix+=(tempStack.pop());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> suffix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新建一个表达式,如果当前字符为变量或者为数字，则压栈，如果是运算符，则将栈顶两个元素弹出作相应运算，结果再入栈，最后当表达式扫描完后，栈里的就是结果</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">double</span> result;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;j;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;+&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">double</span> A= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> B= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> C= B+A;</span><br><span class="line">                    coutStack.push(String.valueOf(C));</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;-&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">double</span> A= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> B= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> C= B-A;</span><br><span class="line">                    coutStack.push(String.valueOf(C));</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;*&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">double</span> A= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> B= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> C= B*A;</span><br><span class="line">                    coutStack.push(String.valueOf(C));</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;/&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">double</span> A= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> B= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> C= B/A;</span><br><span class="line">                    coutStack.push(String.valueOf(C));</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;!&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">int</span> A= Integer.parseInt(coutStack.pop());</span><br><span class="line">                    <span class="type">int</span> B=<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">while</span> (A!=<span class="number">1</span>)&#123;</span><br><span class="line">                        B=B*A;</span><br><span class="line">                        A--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    coutStack.push(String.valueOf(B));</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;%&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">double</span> A= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> B= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> C= B%A;</span><br><span class="line">                    coutStack.push(String.valueOf(C));</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stringArr[i].equals(<span class="string">&quot;^&quot;</span>))&#123;</span><br><span class="line">                    <span class="type">double</span> A= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> B= Double.parseDouble(coutStack.pop());</span><br><span class="line">                    <span class="type">double</span> C= Math.pow(B,A);</span><br><span class="line">                    coutStack.push(String.valueOf(C));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                    coutStack.push(stringArr[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        result= Double.parseDouble(coutStack.pop());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="d）调试分析-1"><a href="#d）调试分析-1" class="headerlink" title="d）调试分析"></a>d）调试分析</h4><p>界面展示</p><p><img src="/posts/4fcdac8c8023/image-20220106054907661-16414193496586.png" alt="image-20220106054907661"></p><p>一元多项式运算</p><p><img src="/posts/4fcdac8c8023/image-20220106055136813.png" alt="image-20220106055136813"></p><p><img src="/posts/4fcdac8c8023/image-20220106055637698.png" alt="image-20220106055637698"></p><h2 id="项目三：猴子选大王-amp-Joseph环–可视化"><a href="#项目三：猴子选大王-amp-Joseph环–可视化" class="headerlink" title="项目三：猴子选大王&amp;Joseph环–可视化"></a>项目三：猴子选大王&amp;Joseph环–可视化</h2><h4 id="a-需求分析：-2"><a href="#a-需求分析：-2" class="headerlink" title="a)需求分析："></a>a)需求分析：</h4><h5 id="joseph"><a href="#joseph" class="headerlink" title="joseph"></a>joseph</h5><p>编号是1，2，„„,n的n个人按照顺时针方向围坐一圈，每个人只有一个密码（正整数）。一开始任选一个正整数作为报数上限值m,从第一个仍开始顺时针方向自1开始顺序报数，报到m时停止报数。报m的人出列，将他的密码作为新的m值，从他在顺时针方向的下一个人开始重新从1报数，如此下去，直到所有人全                                 部出列为止。设计一个程序来求出出列顺序</p><h5 id="猴子选大王"><a href="#猴子选大王" class="headerlink" title="猴子选大王"></a>猴子选大王</h5><p>n只猴子围坐成一个圈，按顺时针方向从1到n编号。然后从1号猴子开始沿顺时针方向从1开始报数，报到m的猴子出局，再从刚出局猴子的下一个位置重新开始报数，如此重复，直至剩下一个猴子，它就是大王。设计并编写程序，实现如下功能：（1） 要求由用户输入开始时的猴子数n、报数的最后一个数m。（2） 给出当选猴王的初始编号。</p><h4 id="b-概要设计：-2"><a href="#b-概要设计：-2" class="headerlink" title="b)概要设计："></a>b)概要设计：</h4><h5 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h5><p>因为这两个题目比较相近，我写了在一起了，用一个可自定义的大小循环队列的解决一次解决，并将此过程可视化，添加用户交互。</p><h5 id="整体设计思路图-1"><a href="#整体设计思路图-1" class="headerlink" title="整体设计思路图"></a>整体设计思路图</h5><p><img src="/posts/4fcdac8c8023/io4.drawio-16414207490917.png" alt="io4.drawio"></p><p>在此说明每个部分的算法设计说明（可以是描述算法的流程图），每个程序中使用的存储结构设计说明（如果指定存储结构请写出该存储结构的定义）。</p><h5 id="存储结构的设计-1"><a href="#存储结构的设计-1" class="headerlink" title="存储结构的设计"></a>存储结构的设计</h5><p><img src="/posts/4fcdac8c8023/io5.drawio-16414220263348.png" alt="io5.drawio"></p><h4 id="c）详细设计：-2"><a href="#c）详细设计：-2" class="headerlink" title="c）详细设计："></a>c）详细设计：</h4><h5 id="循环队列设计"><a href="#循环队列设计" class="headerlink" title="循环队列设计"></a>循环队列设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.moneyking;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 手写循环队列</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySqQueue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> Size;<span class="comment">//指定大小</span></span><br><span class="line">    E data[];<span class="comment">//泛型+强制类型转换</span></span><br><span class="line">    <span class="type">int</span> rear=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> front=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> length=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MySqQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        Size=(<span class="type">int</span>)<span class="number">1e6</span>;</span><br><span class="line">        data=(E[])<span class="keyword">new</span> <span class="title class_">Object</span>[Size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MySqQueue</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.Size = size;</span><br><span class="line">        data=(E[])<span class="keyword">new</span> <span class="title class_">Object</span>[Size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断是否为空</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> front==rear&amp;&amp;length==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//进队</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">enqueue</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>((rear+<span class="number">1</span>)%Size==front)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;队满了&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        data[rear] = e;                <span class="comment">//进队</span></span><br><span class="line">        rear = (rear+<span class="number">1</span>)%Size;          <span class="comment">//尾指针+1</span></span><br><span class="line">        length++;                       <span class="comment">//长度+1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//出队</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">dequeue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;队列为空&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> data[front];          <span class="comment">//出队元素</span></span><br><span class="line">        front = (front+<span class="number">1</span>)%data.length; <span class="comment">//头指针+1</span></span><br><span class="line">        length--;                 <span class="comment">//长度-1</span></span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="算法设计"><a href="#算法设计" class="headerlink" title="算法设计"></a>算法设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">    MySqQueue&lt;Integer&gt; sqQueue=<span class="keyword">new</span> <span class="title class_">MySqQueue</span>&lt;&gt;(MoneyNumber+<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//给每个猴子从1到n编号 全部进队</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;MoneyNumber;i++)&#123;</span><br><span class="line">        sqQueue.enqueue(i+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个计数器</span></span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!sqQueue.isEmpty())&#123;</span><br><span class="line">        <span class="type">int</span> temp=sqQueue.dequeue();<span class="comment">//非空出队</span></span><br><span class="line">        System.out.print(temp+<span class="string">&quot; &quot;</span>);<span class="comment">//输出</span></span><br><span class="line">        count++;<span class="comment">//计数器+1</span></span><br><span class="line">        <span class="keyword">if</span>(count==index)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;-------&quot;</span>+temp+<span class="string">&quot;出局&quot;</span>);</span><br><span class="line">           count=<span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!sqQueue.isEmpty())&#123;</span><br><span class="line">            sqQueue.enqueue(temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="d）调试分析-2"><a href="#d）调试分析-2" class="headerlink" title="d）调试分析"></a>d）调试分析</h4><h5 id="设置界面"><a href="#设置界面" class="headerlink" title="设置界面"></a>设置界面</h5><p><img src="/posts/4fcdac8c8023/image-20220106063719254-16414222408549.png" alt="image-20220106063719254"></p><h5 id="猴子选大王-1"><a href="#猴子选大王-1" class="headerlink" title="猴子选大王"></a>猴子选大王</h5><p><img src="/posts/4fcdac8c8023/image-20220106063752608-164142227383010.png" alt="image-20220106063752608"></p><p><img src="/posts/4fcdac8c8023/image-20220106063826976-164142230869811.png" alt="image-20220106063826976"></p><h5 id="joseph-1"><a href="#joseph-1" class="headerlink" title="joseph"></a>joseph</h5><p><img src="/posts/4fcdac8c8023/image-20220106063914161-164142235588812.png" alt="image-20220106063914161"></p><p><img src="/posts/4fcdac8c8023/image-20220106063928978-164142237056713-164142295756114.png" alt="image-20220106063928978"></p><h2 id="课设总结"><a href="#课设总结" class="headerlink" title="课设总结"></a>课设总结</h2><h5 id="课程设计过程的收获"><a href="#课程设计过程的收获" class="headerlink" title="课程设计过程的收获"></a>课程设计过程的收获</h5><p>这次数据结构课设，让我了解了很多算法的设计，很多数据结构的使用。在设计迷宫时我学习编写使用了队列，双端队列，优先队列，栈，链表，数值和广义表。利用prim算法生成迷宫其实是一个最小生成树也就是传说的完美迷宫，而DFS设计的迷宫则是利用了栈的递归回溯。而迷宫节点设计其实是参考了广义表的设计。在写A星路径规划算法时，则是设计使用了优先队列，通过比较总代价（当前路径+绝对路径）来确定路径方向。在设计计算机项目时，则是使用了栈后进先出的特点，来求解逆波兰式计算算式结果。最后是猴子选大王项目和joseph项目，则是使用了队列的先进先出特点，设计的算法。</p><h5 id="对数据结构这门课程的思考"><a href="#对数据结构这门课程的思考" class="headerlink" title="对数据结构这门课程的思考"></a>对数据结构这门课程的思考</h5><p>学习数据结构之前、一直以为数据结构是一门新的语言、后来才知道学习数据结构是为了更加高效的的组织数据、设计出良好的算法，而算法则是一个程序的灵魂。经过了一学期的数据结构了，在期末之际对其进行总结。首先，学完数据结构我们应该知道数据结构讲的是什么，数据结构课程主要是研究非数值计算的研究的程序设计问题中所出现的计算机处理对象以及它们之间关系和操作的学科。 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;项目一：迷宫求解&quot;&gt;&lt;a href=&quot;#项目一：迷宫求解&quot; class=&quot;headerlink&quot; title=&quot;项目一：迷宫求解&quot;&gt;&lt;/a&gt;项目一：迷宫求解&lt;/h2&gt;&lt;h4 id=&quot;a-需求分析：&quot;&gt;&lt;a href=&quot;#a-需求分析：&quot; class=&quot;header</summary>
      
    
    
    
    <category term="课设报告" scheme="http://101.43.65.22/categories/%E8%AF%BE%E8%AE%BE%E6%8A%A5%E5%91%8A/"/>
    
    
    <category term="课设报告" scheme="http://101.43.65.22/tags/%E8%AF%BE%E8%AE%BE%E6%8A%A5%E5%91%8A/"/>
    
  </entry>
  
  <entry>
    <title>C++课设报告——工资管理系统</title>
    <link href="http://101.43.65.22/posts/c5b84aebdb34/"/>
    <id>http://101.43.65.22/posts/c5b84aebdb34/</id>
    <published>2021-12-30T22:38:22.000Z</published>
    <updated>2022-03-30T04:42:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li><p>这是期末C++课设项目的文字报告</p></li><li><p>项目github地址：<a href="https://github.com/ufovsmba/ManaSystem.git">https://github.com/ufovsmba/ManaSystem.git</a></p></li><li><p>项目gitee地址：<a href="https://gitee.com/gallifrey1011/ManaSystem.git">https://gitee.com/gallifrey1011/ManaSystem.git</a></p></li></ul><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1    概述"></a>1    概述</h2><h3 id="1-1程序的基本功能"><a href="#1-1程序的基本功能" class="headerlink" title="1.1程序的基本功能"></a>1.1程序的基本功能</h3><h4 id="1-1-1-登陆功能"><a href="#1-1-1-登陆功能" class="headerlink" title="1.1.1 登陆功能"></a>1.1.1 登陆功能</h4><p>该系统设置了管理员登陆校验，只有输入正确的管理员账号和密码成功登陆才能进行相应的权限操作。</p><h4 id="1-1-2-查询功能"><a href="#1-1-2-查询功能" class="headerlink" title="1.1.2 查询功能"></a>1.1.2 查询功能</h4><p>该系统设置模糊（前模糊和后模糊）查找功能，可以根据职工编号快速找到相应的职工信息</p><h4 id="1-1-3-删除功能"><a href="#1-1-3-删除功能" class="headerlink" title="1.1.3 删除功能"></a>1.1.3 删除功能</h4><p>该系统具有删除职工工资信息功能</p><h4 id="1-1-4-新增表单功能"><a href="#1-1-4-新增表单功能" class="headerlink" title="1.1.4 新增表单功能"></a>1.1.4 新增表单功能</h4><p>该系统具有新增表单功能</p><h4 id="1-1-5-修改数据功能"><a href="#1-1-5-修改数据功能" class="headerlink" title="1.1.5 修改数据功能"></a>1.1.5 修改数据功能</h4><p>该系统可方便更改数据    </p><h4 id="1-1-6账目自动统计"><a href="#1-1-6账目自动统计" class="headerlink" title="1.1.6账目自动统计"></a>1.1.6账目自动统计</h4><p>该系统会自动统计职工的每月工资，应发数，个人所得税，实发数，并确保计算所得数据准确且无法被人为修改。</p><h3 id="1-2其他功能"><a href="#1-2其他功能" class="headerlink" title="1.2其他功能"></a>1.2其他功能</h3><h4 id="1-2-1信息安全"><a href="#1-2-1信息安全" class="headerlink" title="1.2.1信息安全"></a>1.2.1信息安全</h4><p>该系统将信息保存在本地的文件类型数据库SQLite中，确保数据安全。</p><h4 id="1-2-2可视化界面"><a href="#1-2-2可视化界面" class="headerlink" title="1.2.2可视化界面"></a>1.2.2可视化界面</h4><p>该系统具有美观，易读，易操作的可视化界面</p><h4 id="1-2-3动画效果"><a href="#1-2-3动画效果" class="headerlink" title="1.2.3动画效果"></a>1.2.3动画效果</h4><p>部分组件增加动画效果，提高观赏性</p><h2 id="2-课题的分析"><a href="#2-课题的分析" class="headerlink" title="2    课题的分析"></a>2    课题的分析</h2><h3 id="2-1-图形化界面开发框架选择"><a href="#2-1-图形化界面开发框架选择" class="headerlink" title="2.1    图形化界面开发框架选择"></a>2.1    图形化界面开发框架选择</h3><p>考虑到是给用户使用的工资管理系统，我认为可视化的界面是必不可少的。因为C++的标准库中并没有包含GUI，我只能从第三方C++图形化界面开发库中选择。最终我选择了Qt，因为Qt是一个比较老的C++图形界面开发框架，各种功能都比较完善，问题解决方法也比较多，有优秀的跨平台性。而且集成开发工具和跨平台的IDE，可视化地图形化界面设计，可以减少很多前端学习成本。</p><h3 id="2-2-数据库选择"><a href="#2-2-数据库选择" class="headerlink" title="2.2    数据库选择"></a>2.2    数据库选择</h3><p>考虑要存储数据，我第一时间想到的就是数据库。我最初想使用mysql数据库的，因为我个人对MySQL数据库比熟悉，而且mysql数据库配合navicat可以极大加快我的开发效率。但是因为Qt对MySQL的驱动支持问题（mysql版本太多），最终还是使用Qt自带的数据库SQLite。SQLite是一款轻型的数据库，它的设计目标是嵌入式的，而且已经在很多嵌入式产品中使用了它，它占用资源非常的低。</p><h3 id="2-3-MVC模式"><a href="#2-3-MVC模式" class="headerlink" title="2.3   MVC模式"></a>2.3   MVC模式</h3><p>这次课程设计，我打算用mvc模式来写。将视图，模型，控制器和业务逻辑等分离出来。但是毕竟是一个C++的课设，而我又从未接触过Qt，所以可能只是尽可能往mvc模式方向设计。但并不能说严格地像springboot一样规范。</p><h2 id="3-详细设计"><a href="#3-详细设计" class="headerlink" title="3    详细设计"></a>3    详细设计</h2><h3 id="3-1-数据库设计"><a href="#3-1-数据库设计" class="headerlink" title="3.1    数据库设计"></a>3.1    数据库设计</h3><p><img src="/posts/c5b84aebdb34/image-20211231073900186-16409075427701.png" alt="image-20211231073900186"></p><p>EmpMoney（职工工资）就是我这次用到的数据库表，SQLite只有4种数据类型，除了表主键id，职工编号empID外，其余用于计算工资的数值类型均选择了与double亲和类型最近的real类型</p><table><thead><tr><th align="left">亲和类型</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">TEXT</td><td align="left">数值型数据在被插入之前，需要先被转换为文本格式，之后再插入到目标字段中。</td></tr><tr><td align="left">NUMERIC</td><td align="left">当文本数据被插入到亲缘性为NUMERIC的字段中时，如果转换操作不会导致数据信息丢失以及完全可逆，那么SQLite就会将该文本数据转换为INTEGER或REAL类型的数据，如果转换失败，SQLite仍会以TEXT方式存储该数据。对于NULL或BLOB类型的新数据，SQLite将不做任何转换，直接以NULL或BLOB的方式存储该数据。需要额外说明的是，对于浮点格式的常量文本，如”30000.0”，如果该值可以转换为INTEGER同时又不会丢失数值信息，那么SQLite就会将其转换为INTEGER的存储方式。</td></tr><tr><td align="left">INTEGER</td><td align="left">对于亲缘类型为INTEGER的字段，其规则等同于NUMERIC，唯一差别是在执行CAST表达式时。</td></tr><tr><td align="left">REAL</td><td align="left">其规则基本等同于NUMERIC，唯一的差别是不会将”30000.0”这样的文本数据转换为INTEGER存储方式。</td></tr><tr><td align="left">NONE</td><td align="left">不做任何的转换，直接以该数据所属的数据类型进行存储。</td></tr></tbody></table><h3 id="3-2-实体类模型设计"><a href="#3-2-实体类模型设计" class="headerlink" title="3.2    实体类模型设计"></a>3.2    实体类模型设计</h3><p><img src="/posts/c5b84aebdb34/image-20211231075318560-16409084000922.png" alt="image-20211231075318560"></p><p>数据中所有职工工资映射的实体类</p><h3 id="3-3-数据库连接层设计"><a href="#3-3-数据库连接层设计" class="headerlink" title="3.3    数据库连接层设计"></a>3.3    数据库连接层设计</h3><p><img src="/posts/c5b84aebdb34/image-20211231075430040-16409084717213.png" alt="image-20211231075430040"></p><p>LinkSQLite类的设计，用于连接数据，编写SQLite的sql语句，数据库的增删改查得以实现</p><h3 id="3-4-控制器和视图交互"><a href="#3-4-控制器和视图交互" class="headerlink" title="3.4    控制器和视图交互"></a>3.4    控制器和视图交互</h3><p><img src="/posts/c5b84aebdb34/image-20211231075645138-16409086071364.png" alt="image-20211231075645138"></p><p>视图层和控制器合二为一 了，删去冗余的业务逻辑层，在mainwindow完成了模型和视图的交互，并处理业务逻辑。</p><h2 id="4-课程设计总结"><a href="#4-课程设计总结" class="headerlink" title="4    课程设计总结"></a>4    课程设计总结</h2><h3 id="4-1-完成情况"><a href="#4-1-完成情况" class="headerlink" title="4.1    完成情况"></a>4.1    完成情况</h3><h4 id="4-1-1登陆功能"><a href="#4-1-1登陆功能" class="headerlink" title="4.1.1登陆功能"></a>4.1.1登陆功能</h4><p>1.登陆失败提醒 （管理员初始账号密码均为:admin）</p><p><img src="/posts/c5b84aebdb34/image-20211231075929729-16409087715345.png" alt="image-20211231075929729"></p><p>2.登陆成功显示所有职工工资信息</p><p><img src="/posts/c5b84aebdb34/image-20211231080924094-164090936582010.png" alt="image-20211231080924094"></p><h4 id="4-1-2查询功能"><a href="#4-1-2查询功能" class="headerlink" title="4.1.2查询功能"></a>4.1.2查询功能</h4><p>1.精确查询  （登陆页面提供折叠功能，已经折叠）</p><p><img src="/posts/c5b84aebdb34/image-20211231080419776-16409090618328.png" alt="image-20211231080419776"></p><p>2.模糊查询</p><p><img src="/posts/c5b84aebdb34/image-20211231080628305-16409091900989.png" alt="image-20211231080628305"></p><h4 id="4-1-3删除功能"><a href="#4-1-3删除功能" class="headerlink" title="4.1.3删除功能"></a>4.1.3删除功能</h4><p><img src="/posts/c5b84aebdb34/image-20211231081053441-164090945580411.png" alt="image-20211231081053441"></p><p><img src="/posts/c5b84aebdb34/image-20211231081106889.png" alt="image-20211231081106889"></p><p><img src="/posts/c5b84aebdb34/image-20211231081116856.png" alt="image-20211231081116856"></p><h4 id="4-1-3新增表单功能"><a href="#4-1-3新增表单功能" class="headerlink" title="4.1.3新增表单功能"></a>4.1.3新增表单功能</h4><p>1.点击查找旁边的增加表单按钮 进入新增表单页面</p><p><img src="/posts/c5b84aebdb34/image-20211231081213874-164090953660712.png" alt="image-20211231081213874"></p><p>2.填写并提交</p><p><img src="/posts/c5b84aebdb34/image-20211231081635985-164090979750414.png" alt="image-20211231081635985"></p><p>3.自动计算工资税务，应发数，实发数</p><p><img src="/posts/c5b84aebdb34/image-20211231081701713-164090982304515.png" alt="image-20211231081701713"></p><p>4.14修改</p><p><img src="/posts/c5b84aebdb34/image-20211231081858674-164090994025416.png" alt="image-20211231081858674"></p><p><img src="/posts/c5b84aebdb34/image-20211231081913857-164090995552617.png" alt="image-20211231081913857"></p><p><img src="/posts/c5b84aebdb34/image-20211231081937034.png" alt="image-20211231081937034"></p><h3 id="4-2-遇到的问题及解决"><a href="#4-2-遇到的问题及解决" class="headerlink" title="4.2    遇到的问题及解决"></a>4.2    遇到的问题及解决</h3><p>​    SQLite字符串传参多次失效，改用Qt的字符串类型QString，情况极大改善。</p><p>​    添加数据的输入文本框设计时，数据库连接中断，程序崩坏。后查明是io流阻塞问题，采用单窗口解决了。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>1.<a href="https://www.runoob.com/sqlite/sqlite-tutorial.html">SQLite 教程 | 菜鸟教程 (runoob.cohttps://www.runoob.com/sqlite/sqlite-tutorial.htmlm)</a></p><p><a href="https://www.runoob.com/sqlite/sqlite-tutorial.html">https://www.runoob.com/sqlite/sqlite-tutorial.html</a></p><p>2.<a href="https://www.qt.io/design">User Interface Design Toolshttps://www.qt.io/design | The Best UI Design Software | Qt Designer | Qt</a></p><p>3.<a href="https://blog.csdn.net/qq_42243240/article/details/110951793">(21条消息) Qt主线程阻塞导致消息队列中的uart动作处理不及时(处理耗时操作导致界面卡顿)_我金啊的博客-CSDN博客_qt主线程被阻塞</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;这是期末C++课设项目的文字报告&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;项目github地址：&lt;a href=&quot;https:/</summary>
      
    
    
    
    <category term="课设报告" scheme="http://101.43.65.22/categories/%E8%AF%BE%E8%AE%BE%E6%8A%A5%E5%91%8A/"/>
    
    
    <category term="课设报告" scheme="http://101.43.65.22/tags/%E8%AF%BE%E8%AE%BE%E6%8A%A5%E5%91%8A/"/>
    
    <category term="Qt" scheme="http://101.43.65.22/tags/Qt/"/>
    
    <category term="C++" scheme="http://101.43.65.22/tags/C/"/>
    
    <category term="SqLite" scheme="http://101.43.65.22/tags/SqLite/"/>
    
  </entry>
  
  <entry>
    <title>Java框架课设报告</title>
    <link href="http://101.43.65.22/posts/66f755d23c96/"/>
    <id>http://101.43.65.22/posts/66f755d23c96/</id>
    <published>2021-12-11T15:45:56.000Z</published>
    <updated>2022-03-30T04:42:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MFMF花卉交易平台设计报告"><a href="#MFMF花卉交易平台设计报告" class="headerlink" title="MFMF花卉交易平台设计报告"></a>MFMF花卉交易平台设计报告</h1><h2 id="1-框架介绍"><a href="#1-框架介绍" class="headerlink" title="1.框架介绍"></a>1.框架介绍</h2><h3 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a><em><strong>Vue</strong></em></h3><p><strong>Vue</strong> 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p><h3 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a><em>SpringBoot</em></h3><p><strong>Spring Boot</strong>是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。</p><h3 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a><em><strong>MyBatis</strong></em></h3><p><strong>MyBatis</strong> 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以对配置和原生Map使用简单的 XML 或注解，将接口和 Java 的 POJOs(Plain Old Java Objects,普通的 Java对象)映射成数据库中的记录。</p><h3 id="Lombok"><a href="#Lombok" class="headerlink" title="Lombok"></a><em>Lombok</em></h3><p><strong>Lombok</strong>框架是用于简化代码编写的框架，在项目中编写实体类、VO类等类时，都会为属性添<br>加SETTERS &amp; GETTERS方法，重新生成 toString() ，保留无参数构造方法，生成 hashCode()<br>和 equals() ……Lombok框架只需要使用一些注解即可在编译时插入这些方法，则编写代码时<br>只需要声明属性并添加注解即可</p><h2 id="2-系统名称"><a href="#2-系统名称" class="headerlink" title="2. 系统名称"></a>2. 系统名称</h2><p><strong>MFMF花卉交易平台</strong></p><p>MFMF是my flowers my friends的简写，MFMF花卉交易平台（下面简称MFMF平台）是用于设计给管理员管理用户和用户交易虚拟花卉（MFMF flower）的系统平台。</p><p>管理员用户可以在MFMF平台上实现对普通用户的处理（查询用户，新建用户，修改用户信息，封禁用户，删除用户）。</p><p>MFMF用户在注册时将在四种MFMF虚拟花种（MFMF virtual flower seed）中选择一份初始花种，和免费获得5花币（MFMF coin）作为自己的初始财产。</p><p>用户可以在MFMF平台培育场模块中选择一片MFMF地区栽种MFMF花种，该地区将以真实的地区实时气候以及和花种的适应性来决定MFMF虚拟花卉的成长期，在MFMF虚拟花卉成熟后，用户将获取该虚拟花卉和诺干该花卉的花种作为自己的资产。</p><p>不同的诺干个虚拟花种栽种在相同地区，气候适合的情况下有一定概率产生新的杂交变种花种，以此培育新的MFMF花卉。</p><p>用户可以在MFMF平台上的交易所中和其他用户用花币交易虚拟花种（MFMF flower seed）和MFMF虚拟花卉，在此过程中平台将收取00.1%的花币作为手续费用。用户购买或栽种得来的MFMF花卉可以在MFMF平台的展示厅模块进行展示。</p><h2 id="3．应用的框架"><a href="#3．应用的框架" class="headerlink" title="3．应用的框架"></a>3．应用的框架</h2><p> <strong>以下是我选择的框架及其原因：</strong></p><h3 id="Vue-1"><a href="#Vue-1" class="headerlink" title="Vue"></a>Vue</h3><p><strong>Vue</strong> 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p><h3 id="SringBoot"><a href="#SringBoot" class="headerlink" title="SringBoot"></a><em>SringBoot</em></h3><p><strong>Spring Boot</strong>是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。</p><h3 id="MyBatis-1"><a href="#MyBatis-1" class="headerlink" title="MyBatis"></a><em><strong>MyBatis</strong></em></h3><p><strong>MyBatis</strong> 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。MyBatis 可以对配置和原生Map使用简单的 XML 或注解，将接口和 Java 的 POJOs(Plain Old Java Objects,普通的 Java对象)映射成数据库中的记录。</p><h3 id="Lombok-1"><a href="#Lombok-1" class="headerlink" title="Lombok"></a><em>Lombok</em></h3><p><strong>Lombok</strong>框架是用于简化代码编写的框架，在项目中编写实体类、VO类等类时，都会为属性添<br>加SETTERS &amp; GETTERS方法，重新生成 toString() ，保留无参数构造方法，生成 hashCode()<br>和 equals() ……Lombok框架只需要使用一些注解即可在编译时插入这些方法，则编写代码时<br>只需要声明属性并添加注解即可</p><h2 id="4．项目目录和文件名的截图"><a href="#4．项目目录和文件名的截图" class="headerlink" title="4．项目目录和文件名的截图"></a>4．项目目录和文件名的截图</h2><h3 id="文件名："><a href="#文件名：" class="headerlink" title="文件名："></a>文件名：</h3><p><img src="/posts/66f755d23c96/clip_image002.png" alt="img"><img src="/posts/66f755d23c96/clip_image003.png" alt="img"></p><p><img src="/posts/66f755d23c96/image-20211211235457282.png" alt="image-20211211235457282"></p><p><img src="/posts/66f755d23c96/image-20211211235558614.png" alt="image-20211211235558614"></p><h3 id="Springboot项目目录结构："><a href="#Springboot项目目录结构：" class="headerlink" title="Springboot项目目录结构："></a>Springboot项目目录结构：</h3><p><img src="/posts/66f755d23c96/clip_image005.jpg" alt="img"></p><h3 id="Vue项目目录结构："><a href="#Vue项目目录结构：" class="headerlink" title="Vue项目目录结构："></a>Vue项目目录结构：</h3><p><img src="/posts/66f755d23c96/clip_image007.jpg" alt="img"></p><h2 id="5．主要文件的内容截图"><a href="#5．主要文件的内容截图" class="headerlink" title="5．主要文件的内容截图"></a>5．主要文件的内容截图</h2><h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><p><img src="/posts/66f755d23c96/clip_image009.jpg" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image011.jpg" alt="img"></p><h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><p><img src="/posts/66f755d23c96/clip_image013.jpg" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image015.jpg" alt="img"></p><h2 id="6．功能模块实现"><a href="#6．功能模块实现" class="headerlink" title="6．功能模块实现"></a>6．功能模块实现</h2><ol><li>登陆页面</li><li>用户列表</li><li>安全退出按钮</li><li>添加用户按钮</li><li>查询用户框</li><li>修改用户信息按钮</li><li>改变用户状态按钮</li><li>删除用户按钮</li></ol><h2 id="7．功能模块的描述"><a href="#7．功能模块的描述" class="headerlink" title="7．功能模块的描述"></a>7．功能模块的描述</h2><ol><li>登陆页面：用户&#x2F;管理员登陆</li><li>用户列表：分页并显示所有用户</li><li>安全退出按钮：清除Session中储存的用户信息</li><li>添加用户按钮：实现添加用户</li><li>查询用户框：通过用户名或者昵称查询用户</li><li>修改用户信息按钮：修改用户信息</li><li>改变用户状态按钮：改变用户状态</li><li>删除用户按钮：删除用户</li></ol><h2 id="8．功能实现的截图"><a href="#8．功能实现的截图" class="headerlink" title="8．功能实现的截图"></a>8．功能实现的截图</h2><h3 id="登陆页面"><a href="#登陆页面" class="headerlink" title="登陆页面"></a>登陆页面</h3><p><img src="/posts/66f755d23c96/clip_image017.jpg" alt="img"></p><h3 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h3><p><img src="/posts/66f755d23c96/clip_image019.jpg" alt="img"></p><h3 id="用户列表"><a href="#用户列表" class="headerlink" title="用户列表"></a>用户列表</h3><p><img src="/posts/66f755d23c96/clip_image021.jpg" alt="img"></p><h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><p><img src="/posts/66f755d23c96/clip_image023.jpg" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image025.jpg" alt="img"></p><h3 id="查询用户"><a href="#查询用户" class="headerlink" title="查询用户"></a>查询用户</h3><p><img src="/posts/66f755d23c96/clip_image027.jpg" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image028.png" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image030.jpg" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image032.jpg" alt="img"></p><h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><p><img src="/posts/66f755d23c96/clip_image033.png" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image035.jpg" alt="img"></p><p><img src="/posts/66f755d23c96/clip_image037.jpg" alt="img"></p><h3 id="改变用户状态"><a href="#改变用户状态" class="headerlink" title="改变用户状态"></a>改变用户状态</h3><p><img src="/posts/66f755d23c96/image-20211212000733830.png" alt="image-20211212000733830"></p><p><img src="/posts/66f755d23c96/image-20211212000808308.png" alt="image-20211212000808308"></p><p><img src="/posts/66f755d23c96/image-20211212000828854.png" alt="image-20211212000828854"></p><h2 id="9．相关代码截图"><a href="#9．相关代码截图" class="headerlink" title="9．相关代码截图"></a>9．相关代码截图</h2><p><img src="/posts/66f755d23c96/image-20211212001658380.png" alt="image-20211212001658380"></p><p><img src="/posts/66f755d23c96/image-20211212001718416.png" alt="image-20211212001718416"></p><p><img src="/posts/66f755d23c96/image-20211212001738941.png" alt="image-20211212001738941"></p><p><img src="/posts/66f755d23c96/image-20211212001748493.png" alt="image-20211212001748493"></p><p><img src="/posts/66f755d23c96/image-20211212001756912.png" alt="image-20211212001756912"></p><p><img src="/posts/66f755d23c96/image-20211212001816613.png" alt="image-20211212001816613"></p><p><img src="/posts/66f755d23c96/image-20211212001840482.png" alt="image-20211212001840482"></p><p><img src="/posts/66f755d23c96/image-20211212001849144.png" alt="image-20211212001849144"></p><p><img src="/posts/66f755d23c96/image-20211212001903606.png" alt="image-20211212001903606"></p><p><img src="/posts/66f755d23c96/image-20211212001922247.png" alt="image-20211212001922247"></p><h2 id="10．结束语"><a href="#10．结束语" class="headerlink" title="10．结束语"></a>10．结束语</h2><p>这次大作业是我写的第一个前后端分离的项目，实话实说开发大部分时间都花在了学习前端vue语言和处理前后端跨越问题上了。这次Vue中用到异步的方法真的让我很吃惊，惊叹于前端语言的发展已经如此完善了，但是跨域问题依旧很难处理。虽然这次大作业结束了。但是MFMF花卉平台的开发还远远没有结束。在将来我将逐步和完善实现MFMF平台设计之初设计的功能。在将MFMF平台完善到一定的程度后，我将会把这个平台放上服务器，让大家可以真正使用到这个平台来。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MFMF花卉交易平台设计报告&quot;&gt;&lt;a href=&quot;#MFMF花卉交易平台设计报告&quot; class=&quot;headerlink&quot; title=&quot;MFMF花卉交易平台设计报告&quot;&gt;&lt;/a&gt;MFMF花卉交易平台设计报告&lt;/h1&gt;&lt;h2 id=&quot;1-框架介绍&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="课设报告" scheme="http://101.43.65.22/categories/%E8%AF%BE%E8%AE%BE%E6%8A%A5%E5%91%8A/"/>
    
    
    <category term="课设报告" scheme="http://101.43.65.22/tags/%E8%AF%BE%E8%AE%BE%E6%8A%A5%E5%91%8A/"/>
    
    <category term="Java" scheme="http://101.43.65.22/tags/Java/"/>
    
    <category term="SpringBoot" scheme="http://101.43.65.22/tags/SpringBoot/"/>
    
    <category term="Vue" scheme="http://101.43.65.22/tags/Vue/"/>
    
    <category term="MySql" scheme="http://101.43.65.22/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>基础算法二</title>
    <link href="http://101.43.65.22/posts/103f21646138/"/>
    <id>http://101.43.65.22/posts/103f21646138/</id>
    <published>2021-10-19T09:13:54.000Z</published>
    <updated>2022-03-31T09:13:54.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="高精度加法"><a href="#高精度加法" class="headerlink" title="高精度加法"></a>高精度加法</h4><p>就是手工模拟一次加法的过程</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">add</span> <span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;A,vector&lt;<span class="type">int</span>&gt; &amp;B)</span></span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; C;</span><br><span class="line">    <span class="keyword">if</span>(A.<span class="built_in">size</span>()&lt;B.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="built_in">add</span>(B,A);<span class="comment">//确保A是最大的数，能遍历所有的数</span></span><br><span class="line">     <span class="type">int</span> t=<span class="number">0</span>;<span class="comment">//开始进位为0</span></span><br><span class="line">     <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;A.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">         t+=A[i];</span><br><span class="line">         <span class="keyword">if</span>(B.<span class="built_in">size</span>()&gt;i) t+=B[i];<span class="comment">//B该位有数则加上</span></span><br><span class="line">         C.<span class="built_in">push_back</span>(t%<span class="number">10</span>);</span><br><span class="line">         t/=<span class="number">10</span>;<span class="comment">//进位变为1或者0</span></span><br><span class="line">     &#125;</span><br><span class="line">    <span class="keyword">if</span>(t)  C.<span class="built_in">push_back</span>(t);<span class="comment">//算完之后t=1，则加上这个最高位    A-19 B-1  add(A,B)--》00--》001《--C</span></span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">    string a,b;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; A,B;</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=a.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) A.<span class="built_in">push_back</span>(a[i]-<span class="string">&#x27;0&#x27;</span>);<span class="comment">//Ascall码中字符0-9与数字0-9，相差48刚好一个字符0-&#x27;0&#x27; 从个位开始进入容器,进行计算</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=b.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) B.<span class="built_in">push_back</span>(b[i]-<span class="string">&#x27;0&#x27;</span>);<span class="comment">//同上</span></span><br><span class="line">    <span class="keyword">auto</span> C=<span class="built_in">add</span>(A,B);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=C.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,C[i]);<span class="comment">//将结果从最高位开始输出</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="高精度减法"><a href="#高精度减法" class="headerlink" title="高精度减法"></a>高精度减法</h4><p>就是手工模拟一次减法的过程</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//是否 A&gt;=B</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;A,vector&lt;<span class="type">int</span>&gt;&amp;B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(A.<span class="built_in">size</span>()!=B.<span class="built_in">size</span>()) <span class="keyword">return</span> A.<span class="built_in">size</span>()&gt;B.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=A.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(A[i]!=B[i]) <span class="keyword">return</span> A[i]&gt;B[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//C=A-B</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sub</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;A,vector&lt;<span class="type">int</span>&gt; &amp;B)</span></span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;C;</span><br><span class="line">    <span class="type">int</span> t=<span class="number">0</span>;<span class="comment">//借位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;A.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">        </span><br><span class="line">        t=A[i]-t;</span><br><span class="line">        <span class="keyword">if</span>(B.<span class="built_in">size</span>()&gt;i) t-=B[i];</span><br><span class="line">        C.<span class="built_in">push_back</span>((t+<span class="number">10</span>)%<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">if</span>(t&lt;<span class="number">0</span>) t=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> t=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//去掉前导0</span></span><br><span class="line">    <span class="keyword">while</span>(C.<span class="built_in">size</span>()&gt;<span class="number">1</span>&amp;&amp;C.<span class="built_in">back</span>()==<span class="number">0</span>) C.<span class="built_in">pop_back</span>();</span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    string a,b;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; A,B;</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=a.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) A.<span class="built_in">push_back</span>(a[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=b.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) B.<span class="built_in">push_back</span>(b[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//判断A,B的大小 如果A-B，B&gt;A则变成sub(B-A),输出时在前面加&quot;-&quot;</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">cmp</span>(A,B))&#123; </span><br><span class="line">       <span class="keyword">auto</span> C=<span class="built_in">sub</span>(A,B);</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> i=C.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,C[i]);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">       <span class="keyword">auto</span> C=<span class="built_in">sub</span>(B,A);</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> i=C.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,C[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="高精度乘低精度"><a href="#高精度乘低精度" class="headerlink" title="高精度乘低精度"></a>高精度乘低精度</h4><p>大整数乘以一个小整数</p><p>就是一个大整数的每一位都乘以这个小整数，对结果求余（%10）就得到的最低位就是当前位数；对结果除以10就可以得到进位</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">mul</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;A,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; C;</span><br><span class="line">    <span class="type">int</span> t=<span class="number">0</span>;<span class="comment">//进位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;A.<span class="built_in">size</span>()||t;i++)&#123;<span class="comment">//进位未处理或者A未遍历完</span></span><br><span class="line">        <span class="keyword">if</span>(A.<span class="built_in">size</span>()&gt;i) t+=A[i]*b;</span><br><span class="line">        C.<span class="built_in">push_back</span>(t%<span class="number">10</span>); </span><br><span class="line">        t/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//处理前导0</span></span><br><span class="line">    <span class="keyword">while</span>(C.<span class="built_in">size</span>()&gt;<span class="number">1</span>&amp;&amp;C.<span class="built_in">back</span>()==<span class="number">0</span>) C.<span class="built_in">pop_back</span>();</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string a;</span><br><span class="line">    <span class="type">int</span> b;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; A;</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=a.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) A.<span class="built_in">push_back</span>(a[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> C=<span class="built_in">mul</span>(A,b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=C.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,C[i]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="高精度除以低精度"><a href="#高精度除以低精度" class="headerlink" title="高精度除以低精度"></a>高精度除以低精度</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">div</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;A,<span class="type">int</span> b,<span class="type">int</span> &amp;r)</span></span>&#123;</span><br><span class="line">    vector &lt;<span class="type">int</span>&gt;C;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=A.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        r=r*<span class="number">10</span>+A[i];</span><br><span class="line">        C.<span class="built_in">push_back</span>(r/b);</span><br><span class="line">        r=r%b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">reverse</span>(C.<span class="built_in">begin</span>(),C.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(C.<span class="built_in">size</span>()&gt;<span class="number">1</span>&amp;&amp;C.<span class="built_in">back</span>()==<span class="number">0</span>) C.<span class="built_in">pop_back</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> b;</span><br><span class="line">    string a;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt;A;</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=a.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) A.<span class="built_in">push_back</span>(a[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="type">int</span> r=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">auto</span> C=<span class="built_in">div</span>(A,b,r);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=C.<span class="built_in">size</span>()<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,C[i]); </span><br><span class="line">    </span><br><span class="line">    cout&lt;&lt;endl&lt;&lt;r&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="一维前缀和"><a href="#一维前缀和" class="headerlink" title="一维前缀和"></a>一维前缀和</h4><p>把S[0]&#x3D;0,更方便，所以最好从i&#x3D;1开始</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">S[i] = a[1] + a[2] + ... a[i]</span><br><span class="line">a[l] + ... + a[r] = S[r] - S[l - 1]       时间复杂度 O(1)</span><br></pre></td></tr></table></figure><h4 id="二维前缀和"><a href="#二维前缀和" class="headerlink" title="二维前缀和"></a>二维前缀和</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">S[i, j] = 第i行j列格子左上部分所有元素的和</span><br><span class="line">以(x1, y1)为左上角，(x2, y2)为右下角的子矩阵的和为：</span><br><span class="line">S[x2, y2] - S[x1 - <span class="number">1</span>, y2] - S[x2, y1 - <span class="number">1</span>] + S[x1 - <span class="number">1</span>, y1 - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1000</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n,m,q,arr[N][N],s[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d %d&quot;</span>,&amp;n,&amp;m,&amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;arr[i][j]);</span><br><span class="line">            s[i][j]=s[i<span class="number">-1</span>][j]+s[i][j<span class="number">-1</span>]-s[i<span class="number">-1</span>][j<span class="number">-1</span>]+arr[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> x1,x2,y1,y2;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">        <span class="type">int</span> temp=s[x2][y2]-s[x2][y1<span class="number">-1</span>]-s[x1<span class="number">-1</span>][y2]+s[x1<span class="number">-1</span>][y1<span class="number">-1</span>];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,temp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="一维差分"><a href="#一维差分" class="headerlink" title="一维差分"></a>一维差分</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">给区间[l, r]中的每个数加上c：B[l] += c, B[r + <span class="number">1</span>] -= c</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n,m,arr[N],b[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">b_insert</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r,<span class="type">int</span> c)</span></span>&#123;</span><br><span class="line">    b[l]+=c;</span><br><span class="line">    b[r+<span class="number">1</span>]-=c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;arr[i]);</span><br><span class="line">        <span class="built_in">b_insert</span>(i,i,arr[i]);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">        <span class="type">int</span> l,r,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>,&amp;l,&amp;r,&amp;c);</span><br><span class="line">        <span class="built_in">b_insert</span>(l,r,c);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">         b[i+<span class="number">1</span>]+=b[i];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,b[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="二维差分"><a href="#二维差分" class="headerlink" title="二维差分"></a>二维差分</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">给以(x1, y1)为左上角，(x2, y2)为右下角的子矩阵中的所有元素加上c：</span><br><span class="line">S[x1, y1] += c, S[x2 + <span class="number">1</span>, y1] -= c, S[x1, y2 + <span class="number">1</span>] -= c, S[x2 + <span class="number">1</span>, y2 + <span class="number">1</span>] += c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">1000</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n,m,q,arr[N][N],s[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d %d&quot;</span>,&amp;n,&amp;m,&amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;arr[i][j]);</span><br><span class="line">            s[i][j]=s[i<span class="number">-1</span>][j]+s[i][j<span class="number">-1</span>]-s[i<span class="number">-1</span>][j<span class="number">-1</span>]+arr[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> x1,x2,y1,y2;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">        <span class="type">int</span> temp=s[x2][y2]-s[x2][y1<span class="number">-1</span>]-s[x1<span class="number">-1</span>][y2]+s[x1<span class="number">-1</span>][y1<span class="number">-1</span>];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,temp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="双指针算法"><a href="#双指针算法" class="headerlink" title="双指针算法"></a>双指针算法</h4><p>核心思想：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将朴素算法 O(n^2) 优化成O(n)</span></span><br><span class="line"><span class="comment">//朴素算法：</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j&lt;=i;j&lt;n;j++)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//双指针：</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="keyword">while</span>(j&lt;r&amp;&amp;<span class="built_in">check</span>(i,j)) j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>模板</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; n; i ++ )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; i &amp;&amp; <span class="built_in">check</span>(i, j)) j ++ ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 具体问题的逻辑</span></span><br><span class="line">&#125;</span><br><span class="line">常见问题分类：</span><br><span class="line">    (<span class="number">1</span>) 对于一个序列，用两个指针维护一段区间</span><br><span class="line">    (<span class="number">2</span>) 对于两个序列，维护某种次序，比如归并排序中合并两个有序序列的操作</span><br></pre></td></tr></table></figure><h4 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">求n的第k位数字: n &gt;&gt; k &amp; 1</span><br><span class="line">返回n的最后一位1：lowbit(n) = n &amp; -n</span><br><span class="line">      = n &amp; (~n+1) 补码</span><br></pre></td></tr></table></figure><h4 id="离散化"><a href="#离散化" class="headerlink" title="离散化"></a>离散化</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N=<span class="number">3e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> a[N],s[N];</span><br><span class="line">vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; queryVec,addVec;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; alls;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用二分法找到映射坐标的数组下标</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> r=alls.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">        <span class="type">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(alls[mid]&gt;=x) r=mid;</span><br><span class="line">        <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> l+<span class="number">1</span>;<span class="comment">//注意为了方便前缀和，从1开始算 a[1]----s[1]</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//加入添加数据的坐标</span></span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="type">int</span> x,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;c);</span><br><span class="line">        alls.<span class="built_in">push_back</span>(x);</span><br><span class="line">        addVec.<span class="built_in">push_back</span>(&#123;x,c&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//加入询问的坐标</span></span><br><span class="line">    <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">        <span class="type">int</span> l,r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;r);</span><br><span class="line">        alls.<span class="built_in">push_back</span>(l);</span><br><span class="line">        alls.<span class="built_in">push_back</span>(r);</span><br><span class="line">        queryVec.<span class="built_in">push_back</span>(&#123;l,r&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//排序去重</span></span><br><span class="line">    <span class="built_in">sort</span>(alls.<span class="built_in">begin</span>(),alls.<span class="built_in">end</span>());</span><br><span class="line">    alls.<span class="built_in">erase</span>(<span class="built_in">unique</span>(alls.<span class="built_in">begin</span>(),alls.<span class="built_in">end</span>()),alls.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//处理添加</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> temp:addVec)&#123;</span><br><span class="line">        <span class="type">int</span> x=<span class="built_in">find</span>(temp.first);</span><br><span class="line">        a[x]+=temp.second;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//处理前缀和</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=alls.<span class="built_in">size</span>();i++) s[i]=s[i<span class="number">-1</span>]+a[i];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//处理查询</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> temp:queryVec)&#123;</span><br><span class="line">        <span class="type">int</span> l=<span class="built_in">find</span>(temp.first);</span><br><span class="line">        <span class="type">int</span> r=<span class="built_in">find</span>(temp.second);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,s[r]-s[l<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="区间合并"><a href="#区间合并" class="headerlink" title="区间合并"></a>区间合并</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; seg;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; &amp;seg)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">    <span class="type">int</span> l=<span class="number">-2e9</span>,r=<span class="number">-2e9</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> temp:seg)&#123;</span><br><span class="line">        <span class="keyword">if</span>(temp.first&gt;r)&#123;</span><br><span class="line">            <span class="comment">//确保不是开始那个无限远的区间再加入</span></span><br><span class="line">            <span class="keyword">if</span>(l!=<span class="number">-2e9</span>) res.<span class="built_in">push_back</span>(&#123;l,r&#125;);</span><br><span class="line">            <span class="comment">//开始检测新区间</span></span><br><span class="line">            l=temp.first;</span><br><span class="line">            r=temp.second;</span><br><span class="line">        &#125;<span class="keyword">else</span> r=<span class="built_in">max</span>(r,temp.second);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(l!=<span class="number">-2e9</span>) res.<span class="built_in">push_back</span>(&#123;l,r&#125;);<span class="comment">//加上最后一个区间</span></span><br><span class="line">    seg=res;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">     <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="type">int</span> l,r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;r);</span><br><span class="line">        seg.<span class="built_in">push_back</span>(&#123;l,r&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">sort</span>(seg.<span class="built_in">begin</span>(),seg.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">merge</span>(seg);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,seg.<span class="built_in">size</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">高精度,前缀和，差分，双指针，位运算，离散化</summary>
    
    
    
    <category term="算法" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="AcWing算法基础" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/AcWing%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="算法" scheme="http://101.43.65.22/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>基础算法一</title>
    <link href="http://101.43.65.22/posts/dd2049917d93/"/>
    <id>http://101.43.65.22/posts/dd2049917d93/</id>
    <published>2021-10-14T09:13:54.000Z</published>
    <updated>2022-03-31T09:13:54.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="快速排序——分治"><a href="#快速排序——分治" class="headerlink" title="快速排序——分治"></a>快速排序——分治</h3><h4 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h4><p>l                                                                 r</p><p>[—————————————————-]</p><p>1.确定分界点:    q[l],    q[r],    q[(l+r)&#x2F;2],    随机</p><p>2.调整区间：</p><p>I                &lt;&#x3D;x                         &gt;&#x3D;x          r</p><p>[—————————I————————-]      <strong>重点</strong></p><p>​            i—&gt;                                 &lt;—-j </p><p><strong>ps</strong>: 定义i和j两个指针，i从头前一位开始走，j从尾部后一位开始走。当i走到第一个大于等于x的数停止，j走到第一个小于等于x的数停止；i和j的数交换。</p><p>3.递归处理左右两段</p><h4 id="代码模板"><a href="#代码模板" class="headerlink" title="代码模板"></a>代码模板</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">quick_sort</span><span class="params">(<span class="type">int</span> q[], <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;<span class="comment">//没有数返回</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = l - <span class="number">1</span>, j = r + <span class="number">1</span>, x = q[l + r &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="comment">//看这里就知道左边界使用左指针就死循环了</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//同理右边界不能右指针</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) <span class="comment">//i和j相遇跳出     </span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">do</span> i ++ ; <span class="keyword">while</span> (q[i] &lt; x);</span><br><span class="line">        <span class="keyword">do</span> j -- ; <span class="keyword">while</span> (q[j] &gt; x);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; j) <span class="built_in">swap</span>(q[i], q[j]); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">quick_sort</span>(q, l, j), <span class="built_in">quick_sort</span>(q, j + <span class="number">1</span>, r);</span><br><span class="line">    <span class="comment">//注意:</span></span><br><span class="line">    <span class="comment">//这里容易发生死循环（取 l（左边界）时，这里不能用i（左指针）；用 r 时，这里不能写 j );</span></span><br><span class="line">    <span class="comment">//写quick_sort(q, l, i-1), quick_sort(q, i, r)时，要注意x=q[l+r+1&gt;&gt;1]处理边界问题,或者x=q[r]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>平均：O(nlog<sub>2</sub>n)</p><h3 id="归并排序—–分治"><a href="#归并排序—–分治" class="headerlink" title="归并排序—–分治"></a>归并排序—–分治</h3><h4 id="解释-1"><a href="#解释-1" class="headerlink" title="解释"></a>解释</h4><p>l             left                            right                   r</p><p>[—————————–I——————————]</p><p>1.确定分界点mid ：(l+r)&#x2F;2</p><p>2.递归排序 left right</p><p>3.归并—合二为一    <strong>重点</strong></p><p>定义两个指针分别指向在两个数组头和中间，比较两个指针所指目标值的大小，将更小值放进新数组，然后该指针++。</p><p> i—&gt;                                                j—-&gt;</p><p>[————————-]left        [————————-]right</p><p>new:</p><p>[——————————————————-]     </p><h4 id="代码模板-1"><a href="#代码模板-1" class="headerlink" title="代码模板"></a>代码模板</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge_sort</span><span class="params">(<span class="type">int</span> q[], <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;<span class="comment">//递归头</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//递归分左右数组</span></span><br><span class="line">    <span class="built_in">merge_sort</span>(q, l, mid);</span><br><span class="line">    <span class="built_in">merge_sort</span>(q, mid + <span class="number">1</span>, r);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//递归结束后得到两个排好序的左数组和右数组，然后再合并</span></span><br><span class="line">    <span class="type">int</span> k = <span class="number">0</span>, i = l, j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class="line">        <span class="keyword">if</span> (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];</span><br><span class="line">        <span class="keyword">else</span> tmp[k ++ ] = q[j ++ ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//有一半走完了，没得比较了，直接输出</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];</span><br><span class="line"><span class="comment">//治 合并</span></span><br><span class="line">    <span class="keyword">for</span> (i = l, j = <span class="number">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="时间复杂度-1"><a href="#时间复杂度-1" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>平均：O(nlog<sub>2</sub>n)</p><h3 id="整数二分法"><a href="#整数二分法" class="headerlink" title="整数二分法"></a>整数二分法</h3><h4 id="解释-2"><a href="#解释-2" class="headerlink" title="解释"></a>解释</h4><p>利用mid&#x3D;l+r &gt;&gt;1 ，不断二分，找到要的数值</p><p>l                                                               r</p><p>[————————-I————————]</p><p>**ps:**不一定要单调性才能使用二分法，核心是每次二分，答案都要在二分得到的一个数组里面（二分法是一定能得到一个答案的）。</p><pre><code>  整数二分要考虑边界死循环的问题，更为麻烦。</code></pre><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;<span class="comment">/* ... */</span>&#125; <span class="comment">// 检查x是否满足某种性质</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 区间[l, r]被划分成[l, mid]和[mid + 1, r]时使用 最终在左半区找符合条件：</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bsearch_1</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">check</span>(mid)) r = mid;    <span class="comment">// check()判断mid是否满足性质</span></span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 区间[l, r]被划分成[l, mid - 1]和[mid, r]时使用 最终在右半区找符合条件：</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">bsearch_2</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> mid = l + r + <span class="number">1</span> &gt;&gt; <span class="number">1</span>;<span class="comment">//取右边的数，不然死循环</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">check</span>(mid)) l = mid;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="时间复杂度-2"><a href="#时间复杂度-2" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><h3 id="浮点数二分法"><a href="#浮点数二分法" class="headerlink" title="浮点数二分法"></a>浮点数二分法</h3><h4 id="解释-3"><a href="#解释-3" class="headerlink" title="解释"></a>解释</h4><p>利用mid&#x3D;l+r &gt;&gt;1 ，不断二分，找到要的数值</p><p>l                                                               r</p><p>[————————-I————————]</p><h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">double</span> x)</span> </span>&#123;<span class="comment">/* ... */</span>&#125; <span class="comment">// 检查x是否满足某种性质</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">bsearch_3</span><span class="params">(<span class="type">double</span> l, <span class="type">double</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-6</span>;   <span class="comment">// eps 表示精度，取决于题目对精度的要求；一般题目要求精度再e-2</span></span><br><span class="line">    <span class="keyword">while</span> (r - l &gt; eps)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">check</span>(mid)) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="时间复杂度-3"><a href="#时间复杂度-3" class="headerlink" title="时间复杂度"></a>时间复杂度</h4>]]></content>
    
    
    <summary type="html">快排和二分</summary>
    
    
    
    <category term="算法" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="AcWing算法基础" scheme="http://101.43.65.22/categories/%E7%AE%97%E6%B3%95/AcWing%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="算法" scheme="http://101.43.65.22/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
</feed>
